import{R as B,P as C,j as e,r as a,F as Fe,a as ea,N as Ce,b as aa,u as le,c as h,d as K,e as ta,f as sa,L as Q,g as re,h as ra,i as na,C as la,k as oa,m as _,B as b,l as L,n as I,o as P,p as Ee,q as ia,s as ca,t as Ie,v as da,w as ma,x as se,y as oe,z as ua,A as ie,D as ha,E as V,G as xa,H as pa,I as fa,J as ga,$ as ya,K as ba,M as De,O as ja,Q as ce,S as Na,T as $e,U as va,V as wa,W as Ta,X as Sa,Y as Ca,Z as ka,_ as Aa,a0 as Ra,a1 as Fa,a2 as Ea,a3 as Ia,a4 as Da,a5 as $a,a6 as Ma,a7 as La,a8 as Pa,a9 as Oa,aa as qa,ab as za,ac as Ba,ad as de,ae as U,af as Ya,ag as Ua,ah as ke,ai as _a,aj as Wa,ak as Ha,al as Va}from"./vendor-CvURDcCG.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}})();const me=B.createContext(null);me.displayName="MaterialTailwindContext";function Ka(t,r){switch(r.type){case"OPEN_SIDENAV":return{...t,openSidenav:r.value};case"SIDENAV_TYPE":return{...t,sidenavType:r.value};case"SIDENAV_COLOR":return{...t,sidenavColor:r.value};case"TRANSPARENT_NAVBAR":return{...t,transparentNavbar:r.value};case"FIXED_NAVBAR":return{...t,fixedNavbar:r.value};case"OPEN_CONFIGURATOR":return{...t,openConfigurator:r.value};default:throw new Error(`Unhandled action type: ${r.type}`)}}function ue({children:t}){const r={openSidenav:!1,sidenavColor:"black",sidenavType:"white",transparentNavbar:!0,fixedNavbar:!1,openConfigurator:!1},[n,o]=B.useReducer(Ka,r),l=B.useMemo(()=>[n,o],[n,o]);return e.jsx(me.Provider,{value:l,children:t})}function X(){const t=B.useContext(me);if(!t)throw new Error("useMaterialTailwindController should be used inside the MaterialTailwindControllerProvider.");return t}ue.displayName="/src/context/index.jsx";ue.propTypes={children:C.node.isRequired};const Me=(t,r)=>t({type:"OPEN_SIDENAV",value:r}),Ae=(t,r)=>t({type:"SIDENAV_TYPE",value:r}),Xa=(t,r)=>t({type:"SIDENAV_COLOR",value:r}),Le=(t,r)=>t({type:"OPEN_CONFIGURATOR",value:r});function he({brandImg:t="/img/ATS.png",brandName:r="ATS",routes:n,onLogOutClick:o}){const[l,s]=X(),{sidenavColor:d,sidenavType:u,openSidenav:f}=l,[x,S]=B.useState({}),j=g=>{S(c=>({...c,[g]:!c[g]}))},v={dark:"bg-gradient-to-br from-gray-800 to-gray-900",white:"bg-white shadow-sm",transparent:"bg-transparent"};return e.jsxs("aside",{className:`${v[u]} ${f?"translate-x-0":"-translate-x-80"} fixed inset-0 z-50 my-4 ml-4 h-[calc(100vh-32px)] w-72 rounded-xl transition-transform duration-300 xl:translate-x-0 border border-blue-gray-100 
    sm:w-56 md:w-64 xl:w-72`,children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"py-6 px-8 text-center flex gap-3 cursor-default",children:[e.jsx("img",{src:t,alt:"Logo",width:"25px",height:"15px",className:"object-contain"}),e.jsx(a.Typography,{variant:"h4",color:u==="dark"?"white":"blue-gray",className:"font-['Aquire'] font-bold",children:r})]}),e.jsx(a.IconButton,{variant:"text",color:"white",size:"sm",ripple:!1,className:"absolute right-0 top-0 grid rounded-br-none rounded-tl-none xl:hidden",onClick:()=>Me(s,!1),children:e.jsx(Fe,{strokeWidth:2.5,className:u==="dark"?"h-5 w-5 text-white":"h-5 w-5 text-black"})})]}),e.jsxs("div",{className:"m-4",children:[n.map(({layout:g,title:c,pages:i},m)=>e.jsxs("ul",{className:"mb-4 flex flex-col gap-1",children:[c&&e.jsx("li",{className:"mx-3.5 mt-4 mb-2",children:e.jsx(a.Typography,{variant:"small",color:u==="dark"?"white":"blue-gray",className:"font-black uppercase opacity-75",children:c})}),i.map(({icon:N,name:p,path:y,menu:w,menuList:$})=>w?e.jsxs(a.Menu,{placement:"right-start",open:x[p]||!1,handler:()=>j(p),offset:15,children:[e.jsx(a.MenuHandler,{className:`flex items-center justify-between p-3 ${u==="dark"?"hover:bg-opacity-20":""} `,children:e.jsxs(a.MenuItem,{children:[e.jsxs("li",{className:`flex gap-4 ${u==="dark"?"text-white":"text-blue-gray-500"} font-normal font-['Nunito'] items-center`,children:[N,e.jsx(a.Typography,{color:"inherit",className:"font-normal font-['Nunito'] capitalize",children:p})]}),e.jsx(ea,{strokeWidth:2.5,className:`h-3.5 w-3.5 transition-transform ${x[p]?"rotate-90":""} ${u==="dark"?"text-white":"text-blue-gray-500"}`})]})}),e.jsx(a.MenuList,{children:$.map(({name:M,path:R})=>e.jsx(Ce,{to:`/${g}${R}`,className:"border-none",children:({isActive:E})=>e.jsx(a.Button,{variant:E?"gradient":"text",color:E?d:u==="dark"?"blue-gray":"white",className:`flex items-center gap-4 px-4 capitalize ${E?d:"text-blue-gray-500"}`,fullWidth:!0,children:e.jsx(a.Typography,{color:"inherit",className:"font-normal capitalize font-['Nunito']",children:M})})},M))})]},p):e.jsx("li",{children:e.jsx(Ce,{to:`/${g}${y}`,children:({isActive:M})=>e.jsxs(a.Button,{variant:M?"gradient":"text",color:M?d:u==="dark"?"white":"blue-gray",className:"flex items-center gap-4 px-4 capitalize",fullWidth:!0,children:[N,e.jsx(a.Typography,{color:"inherit",className:"font-normal font-['Nunito'] capitalize",children:p})]})})},p))]},m)),e.jsxs(a.Button,{variant:"text",color:"red",onClick:o,className:"flex items-center gap-4 px-4 capitalize",fullWidth:!0,children:[e.jsx(aa,{className:"w-5 h-5 text-inherit"}),e.jsx(a.Typography,{color:"inherit",className:"font-normal capitalize font-['Nunito']",children:"Log Out"})]})]})]})}he.propTypes={brandImg:C.string,brandName:C.string,routes:C.arrayOf(C.object).isRequired};he.displayName="/src/widgets/layout/sidnave.jsx";function Pe({user:t}){const[r,n]=X(),{openSidenav:o}=r,{pathname:l}=le(),[s,d]=l.split("/").filter(g=>g!==""),[u,f]=h.useState(null),x=h.useRef(),S=K(),j=g=>{g.preventDefault(),f(x.current.value.toUpperCase())},v=()=>{S(`/dashboard/reports/students?search=${u}`)};return e.jsx(a.Navbar,{color:"transparent",className:"rounded-xl transition-all px-0 py-1",fullWidth:!0,children:e.jsxs("div",{className:"flex flex-col-reverse justify-between gap-6 md:flex-row md:items-center p-4",children:[e.jsxs("div",{className:"capitalize",children:[e.jsxs(a.Breadcrumbs,{className:"bg-transparent p-0 transition-all",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal opacity-50",children:s}),e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:d})]}),e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"uppercase",children:d})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"mr-auto md:mr-4 md:w-56 flex items-center border justify-between px-2 rounded-md border-blue-gray-100",children:[e.jsx("input",{id:"search",placeholder:"Search",name:"search",ref:x,onChange:g=>j(g),className:"p-1 bg-transparent outline-none text-blue-gray-800 font-['Roboto'] font-thin text-sm flex-1"}),e.jsx(ta,{className:"w-4 h-4 text-blue-gray-200 cursor-pointer",strokeWidth:1,onClick:()=>v()})]}),e.jsx(a.IconButton,{variant:"text",color:"blue-gray",className:"grid xl:hidden",onClick:()=>Me(n,!o),children:e.jsx(sa,{strokeWidth:2,className:"h-6 w-6 text-blue-gray-500"})}),e.jsxs(Q,{to:"/dashboard/profile",children:[e.jsxs(a.Button,{variant:"text",color:"blue-gray",className:"hidden items-center gap-1 px-4 xl:flex normal-case font-['Nunito'] font-normal",children:[e.jsx(a.Avatar,{src:t&&t.profile||"/img/no-profile.jpg",alt:"item-1",size:"xs",variant:"circular"}),t==null?void 0:t.displayName]}),e.jsx(a.IconButton,{variant:"text",color:"blue-gray",className:"grid xl:hidden",children:e.jsx(a.Avatar,{src:t&&t.profile||"/img/no-profile.jpg",alt:"item-1",size:"xs",variant:"circular",className:"w-5 h-5"})})]})]})]})})}Pe.displayName="/src/widgets/layout/dashboard-navbar.jsx";function Oe(){const[t,r]=X(),{openConfigurator:n,sidenavColor:o,sidenavType:l}=t,s={black:"from-black to-black border-gray-200",teal:"from-teal-400 to-teal-600",blue:"from-blue-400 to-blue-600",orange:"from-orange-400 to-orange-600"};return e.jsxs("aside",{className:`fixed top-0 right-0 z-50 h-screen w-96 bg-white px-2.5 pb-2 shadow-lg transition-transform duration-300 ${n?"translate-x-0":"translate-x-96"}`,children:[e.jsxs("div",{className:"flex items-start justify-between px-6 pt-8 pb-6",children:[e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h5",color:"blue-gray",children:"Appearance"}),e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"See our dashboard options."})]}),e.jsx(a.IconButton,{variant:"text",color:"blue-gray",onClick:()=>Le(r,!1),children:e.jsx(Fe,{strokeWidth:2.5,className:"h-5 w-5"})})]}),e.jsxs("div",{className:"py-4 px-6",children:[e.jsxs("div",{className:"mb-12",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",children:"Sidenav Colors"}),e.jsx("div",{className:"mt-3 flex items-center gap-2",children:Object.keys(s).map(d=>e.jsx("span",{className:`h-6 w-6 cursor-pointer rounded-full border bg-gradient-to-br transition-transform hover:scale-105 ${s[d]} ${o===d?"border-black":"border-transparent"}`,onClick:()=>Xa(r,d)},d))})]}),e.jsxs("div",{className:"mb-12",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",children:"Sidenav Types"}),e.jsx(a.Typography,{variant:"small",color:"gray",children:"Choose between 2 different sidenav types."}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx(a.Button,{variant:l==="dark"?"gradient":"outlined",onClick:()=>Ae(r,"dark"),children:"Dark"}),e.jsx(a.Button,{variant:l==="white"?"gradient":"outlined",onClick:()=>Ae(r,"white"),children:"White"})]})]})]})]})}Oe.displayName="/src/widgets/layout/configurator.jsx";function xe({brandName:t="Limitify"}){const r=new Date().getFullYear();return e.jsx("footer",{className:"py-2 bottom-0",children:e.jsx("div",{className:"flex w-full items-center justify-center px-2 font-['Nunito']",children:e.jsxs(a.Typography,{variant:"small",className:"font-normal text-inherit",children:["ATS © ",r," Powered by Limitify"]})})})}xe.propTypes={brandName:C.string,routes:C.arrayOf(C.object)};xe.displayName="/src/widgets/layout/footer.jsx";C.string,C.arrayOf(C.object).isRequired,C.node;function pe({brandName:t="ATS",routes:r=[{name:"About",path:"#about",id:"about"},{name:"Contact",path:"#contact",id:"contact"}]}){var g;const[n,o]=X(),{fixedNavbar:l,openSidenav:s}=n,{pathname:d}=le(),u=K(),[f,x]=h.useState(!1),[S,j]=h.useState(""),v=((g=document.querySelector("nav"))==null?void 0:g.offsetHeight)||0;return h.useEffect(()=>{const c=()=>{window.scrollY-v>50?x(!0):x(!1)};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[v]),h.useEffect(()=>{const c=new IntersectionObserver(m=>{m.forEach(N=>{N.isIntersecting&&N.target.id!=="home"&&(j(N.target.id),u(`#${N.target.id}`,{replace:!0}))})},{threshold:1}),i=document.querySelectorAll("section");return i.forEach(m=>c.observe(m)),()=>{i.forEach(m=>c.unobserve(m))}},[u]),h.useEffect(()=>{(d==="/"||d==="")&&(j("home"),u("/",{replace:!0}))},[d,u]),e.jsx(a.Navbar,{color:f?"white":"transparent",className:`transition-all fixed top-0 z-40 px-8 py-2 ${f?"bg-black bg-opacity-90":""}`,fullWidth:!0,blurred:l,children:e.jsxs("div",{className:"flex justify-between gap-6 md:flex-row md:items-center",children:[e.jsx("div",{className:"capitalize",children:e.jsx(a.Typography,{as:"a",href:"#home",variant:"h4",className:"font-['Aquire'] bg-gradient-to-r from-white/40 via-white/60 to-white/80 bg-clip-text",style:{WebkitTextFillColor:"transparent"},children:t})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("ul",{className:"flex items-center gap-4",children:r.map(({name:c,path:i,id:m})=>e.jsx("li",{children:e.jsx(a.Typography,{as:"a",href:i,variant:"h6",className:`py-0.5 px-1 text-inherit transition-colors hover:text-blue-gray-500 font-['Nunito'] font-light ${S===m?"text-blue-gray-500":""}`,children:c})},c))}),e.jsxs(Q,{to:"/auth/login",children:[e.jsxs(a.Button,{variant:"text",color:"blue-gray",className:"hidden items-center gap-1 px-4 xl:flex normal-case font-['Nunito'] font-normal",children:[e.jsx(re,{className:"h-5 w-5 text-blue-gray-500"}),"Log In"]}),e.jsx(a.IconButton,{variant:"text",color:"blue-gray",className:"grid xl:hidden",children:e.jsx(re,{className:"h-5 w-5 text-blue-gray-500"})})]})]})]})})}pe.propTypes={brandName:C.string,brandLink:C.string,routes:C.arrayOf(C.object)};pe.displayName="/src/widgets/layout/welcome-navbar.jsx";function fe({brandName:t="ATS",brandDesc:r="Attendance Tracking System"}){return X(),e.jsxs("section",{className:"relative w-full min-h-screen py-[15rem] bg-cover bg-center bg-no-repeat bg-scroll ",style:{backgroundImage:"url('/img/bg-masthead.jpg')"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-50"}),e.jsx("div",{className:"relative z-10 flex h-full items-center justify-center",id:"home",children:e.jsxs("div",{className:"text-center text-white mt-10",children:[e.jsx("h1",{className:"mx-auto my-0 text-5xl bg-clip-text font-bold font-['Aquire']",style:{backgroundImage:"linear-gradient(to bottom, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 1))",WebkitTextFillColor:"transparent"},children:"ATS"}),e.jsx("h2",{className:"mt-4 text-xl opacity-75 mb-5 font-['Nunito']",children:"Attendance Tracking System"}),e.jsx("a",{href:"#about",className:"font-['Varela_Round'] mt-6 inline-block py-2 px-6 text-white bg-blue-gray-800 rounded-md hover:bg-opacity-70 transition duration-300",children:"Get Started"})]})})]})}fe.propTypes={brandName:C.string,brandDesc:C.string};fe.displayName="/src/widgets/layout/masthead.jsx";const ee={chart:{toolbar:{show:!1}},title:{show:""},dataLabels:{enabled:!1},xaxis:{axisTicks:{show:!1},axisBorder:{show:!1},labels:{style:{colors:"#37474f",fontSize:"13px",fontFamily:"inherit",fontWeight:300}}},yaxis:{labels:{style:{colors:"#37474f",fontSize:"13px",fontFamily:"inherit",fontWeight:300}}},grid:{show:!0,borderColor:"#dddddd",strokeDashArray:5,xaxis:{lines:{show:!0}},padding:{top:5,right:20}},fill:{opacity:.8},tooltip:{theme:"dark"}};function Ga({n:t}){const{number:r}=ra({from:{number:0},number:t,delay:200,config:{mass:1,tension:30,friction:10}});return e.jsx(na.div,{children:r.to(n=>n.toFixed(0))})}function z({color:t="blue",icon:r,title:n,value:o,footer:l=null}){return e.jsxs(a.Card,{className:"border border-blue-gray-100 shadow-sm",children:[e.jsx(a.CardHeader,{variant:"gradient",color:t,floated:!1,shadow:!1,className:"absolute grid h-12 w-12 place-items-center",children:r}),e.jsxs(a.CardBody,{className:"p-4 text-right",children:[e.jsx(a.Typography,{variant:"small",className:"font-normal text-blue-gray-600",children:n}),e.jsx(a.Typography,{variant:"h4",color:"blue-gray",children:e.jsx(Ga,{n:o})})]}),l&&e.jsx(a.CardFooter,{className:"border-t border-blue-gray-50 p-4",children:l})]})}z.propTypes={color:C.oneOf(["white","blue-gray","gray","brown","deep-orange","orange","amber","yellow","lime","light-green","green","teal","cyan","light-blue","blue","indigo","deep-purple","purple","pink","red"]),icon:C.node.isRequired,title:C.node.isRequired,value:C.node.isRequired,footer:C.node};z.displayName="/src/widgets/cards/statistics-card.jsx";function ge({title:t,action:r=null,description:n=null,details:o={}}){return e.jsxs(a.Card,{color:"transparent",shadow:!1,children:[e.jsxs(a.CardHeader,{color:"transparent",shadow:!1,floated:!1,className:"mx-0 mt-0 mb-4 flex items-center justify-between gap-4",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",children:t}),r]}),e.jsxs(a.CardBody,{className:"p-0",children:[n&&e.jsx(a.Typography,{variant:"small",className:"font-normal text-blue-gray-500",children:n}),n&&o?e.jsx("hr",{className:"my-8 border-blue-gray-50"}):null,o&&e.jsx("ul",{className:"flex flex-col gap-4 p-0",children:Object.keys(o).map((l,s)=>e.jsxs("li",{className:"flex items-center gap-4",children:[e.jsxs(a.Typography,{variant:"small",color:"blue-gray",className:"font-semibold capitalize",children:[l,":"]}),typeof o[l]=="string"?e.jsx(a.Typography,{variant:"small",className:"font-normal text-blue-gray-500",children:o[l]}):o[l]]},s))})]})]})}ge.propTypes={title:C.string.isRequired,description:C.node,details:C.object};ge.displayName="/src/widgets/cards/profile-info-card.jsx";C.string.isRequired,C.string.isRequired,C.node.isRequired,C.node;function ae({color:t="blue",chart:r,title:n,description:o,footer:l=null}){return e.jsxs(a.Card,{className:"border border-blue-gray-100 shadow-sm",children:[e.jsx(a.CardHeader,{variant:"gradient",color:t,floated:!1,shadow:!1,children:e.jsx(la,{...r})}),e.jsxs(a.CardBody,{className:"px-6 pt-0",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",children:n}),e.jsx(a.Typography,{variant:"small",className:"font-normal text-blue-gray-600",children:o})]}),l&&e.jsx(a.CardFooter,{className:"border-t border-blue-gray-50 px-6 py-5",children:l})]})}ae.propTypes={color:C.oneOf(["white","blue-gray","gray","brown","deep-orange","orange","amber","yellow","lime","light-green","green","teal","cyan","light-blue","blue","indigo","deep-purple","purple","pink","red"]),chart:C.object.isRequired,title:C.node.isRequired,description:C.node.isRequired,footer:C.node};ae.displayName="/src/widgets/charts/statistics-chart.jsx";const Ja="https://pkgkheswpxfyewfzanxr.supabase.co",Qa="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBrZ2toZXN3cHhmeWV3ZnphbnhyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE1NzQxMDUsImV4cCI6MjA0NzE1MDEwNX0.4h-seHg8yUDTrRw_HGwQBw3vPDdy_eQR4f6xKcuIX5A",O=oa(Ja,Qa,{persistSession:!0,localStorage:sessionStorage});function ye({brandName:t="ATS"}){return e.jsxs(_.div,{className:"flex flex-col items-center justify-center min-h-screen bg-blue-gray-50/50 gap-y-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx(a.Typography,{variant:"h1",className:"font-['Aquire'] bg-gradient-to-r from-black/40 via-black/60 to-black/80 bg-clip-text",style:{WebkitTextFillColor:"transparent"},children:t}),e.jsx(a.Spinner,{color:"gray",className:"h-12 w-12 mb-4"})]})}const qe=B.createContext();function F(){return h.useContext(qe)}function Za({children:t}){const[r,n]=h.useState(null),[o,l]=h.useState(!0),s=K();h.useEffect(()=>{(async()=>{try{const{data:{user:g},error:c}=await O.auth.getUser();if(g){n(g);const i=localStorage.getItem("lastVisitedRoute");s(i||"/dashboard/home")}else n(null);c&&n(null)}catch(g){console.error("Error checking session:",g),n(null)}finally{l(!1)}})();const{data:v}=O.auth.onAuthStateChange((g,c)=>{if(g==="SIGNED_IN"){n(c.user);const i=localStorage.getItem("lastVisitedRoute");s(i||"/dashboard/home"),l(!1)}else g==="SIGNED_OUT"&&(n(null),s("/auth/login"))});return()=>{v&&v.subscription.unsubscribe()}},[s]);async function d(j,v,g,c){try{l(!0);const{data:i,error:m}=await O.auth.signUp({email:v,password:c,options:{data:{displayName:j,phone:g}}});if(m)throw b(m.message,{type:"error"}),m;if(!i)throw new Error("User sign-up failed. No user data returned.");try{const N=await L.post("https://ats-kkcp.onrender.com/api/v1/client/create",{},{headers:{"x-tenant-id":i.user.id}});console.log("Client created successfully:",N.data)}catch(N){console.error("Failed to create client:",N),b("Failed to create client. Please try again later.",{type:"error"})}b("Account created successfully! Please check your email for verification.",{type:"success"}),s("/auth/verify-email")}catch(i){console.log("Error during signup:",i)}finally{l(!1)}}async function u(j,v){try{l(!0);const{data:g,error:c}=await O.auth.signInWithPassword({email:j,password:v});if(c)throw b("Login failed: "+c.message,{type:"error"}),c;const{data:i,error:m}=await O.auth.getUser();if(i)n(i),s("/dashboard/home");else throw console.error("No session after login"),new Error("No user session found.");if(m)throw console.error("Error getting session:",m),m}catch(g){console.log("Error during login:",g)}finally{l(!1)}}async function f(j,v,g){try{let c=r.user_metadata.profile;if(g){const N=g.name.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_.-]/g,""),p=`user-${Date.now()}-${N}`;try{const{data:y,error:w}=await O.storage.from("profile_images").upload(p,g,{cacheControl:"3600",upsert:!1});if(w)throw console.error("Error uploading profile image:",w.message),new Error("Failed to upload profile image.");const{data:$}=O.storage.from("profile_images").getPublicUrl(p);c=$.publicUrl}catch(y){throw console.error("Error uploading profile image:",y),new Error("Failed to upload profile image.")}}const{data:i,error:m}=await O.auth.updateUser({email:v,data:{displayName:j,profile:c}});if(m)throw console.error("Error updating user information:",m),b(m.message,{type:"error"}),m;b("Account updated successfully!",{type:"success"}),s("/dashboard/home")}catch(c){console.error("Error during update:",c),b("Failed to update account. Please try again.",{type:"error"})}}async function x(){try{await O.auth.signOut(),n(null),s("/auth/login")}catch{b("Error during logout",{type:"error"})}}const S={currentUser:r,loading:o,signup:d,logIn:u,logOut:x,updateInfo:f};return e.jsx(qe.Provider,{value:S,children:o?e.jsx(ye,{}):t})}const te="https://ats-kkcp.onrender.com/api/v1",D=async(t,r)=>{try{const n=await L.get(`${te}/${t}`,{headers:{"x-tenant-id":r}});return t.includes("list")||t==="/attendance/class-details"?n.data.data:n.data}catch(n){throw n}},ze=async(t,r,n)=>{if(n){const o=new FormData;o.append("csv",n);try{const l=await L.post(`${te}/${t}`,o,{headers:{"Content-Type":"multipart/form-data","x-tenant-id":r}});return b("File Uploaded",{type:"success"}),l.data}catch(l){b(l.response.data.error,{type:"error"})}}else console.error("No file uploaded")},Be=async t=>{try{const r=await L.post(`${te}/rfid/assign`,{},{headers:{"x-tenant-id":t}});r.status===201?b(r.data.msg,{type:"success"}):r.status===202?b(r.data.msg,{type:"info"}):b(r.data.msg,{type:"warning"})}catch(r){b(r.response.data.message,{type:"error"})}},et=async(t,r)=>{var n,o;try{const l=await L.post(`${te}/attendance/manual`,{data:t},{headers:{"x-tenant-id":r},validateStatus:s=>s>=200&&s<500});l.status===201?b(l.data.msg,{type:"success"}):l.status===400?b(l.data.msg,{type:"warning"}):b(l.data.msg,{type:"info"})}catch(l){b(((o=(n=l.response)==null?void 0:n.data)==null?void 0:o.message)||"An error occurred",{type:"error"})}},Ye=()=>{const{currentUser:t,loading:r}=F(),n=t==null?void 0:t.id,{data:o,error:l}=I({queryKey:["rfidCards"],queryFn:()=>D("rfid/list",n),staleTime:3e4,enabled:!!n}),{data:s,error:d}=I({queryKey:["activeCards"],queryFn:()=>D("rfid/count-active",n),staleTime:3e4,enabled:!!n}),{data:u,error:f}=I({queryKey:["unassignedCards"],queryFn:()=>D("rfid/count-inactive",n),staleTime:3e4,enabled:!!n});return{rfidCards:o,activeCards:(s==null?void 0:s.data)||0,unassignedCards:(u==null?void 0:u.data)||0,loading:r}},Ue=t=>{const{currentUser:r}=F();if(!(r!=null&&r.id))throw new Error("User ID is missing from the authentication context.");const n=r.id,{data:o,error:l}=I({queryKey:["students",t],queryFn:()=>D("student/list",n),staleTime:3e4,enabled:!!n}),{data:s,error:d}=I({queryKey:["student"],queryFn:()=>D(`student/search/${t}`,n),enabled:!!n&&!!t,staleTime:5e3}),{data:u,error:f}=I({queryKey:["activeStudents"],queryFn:()=>D("student/active-students",n),staleTime:3e4,enabled:!!n}),{data:x,error:S}=I({queryKey:["unassignedStudents"],queryFn:()=>D("student/unassigned-students",n),staleTime:3e4,enabled:!!n});return{students:o,student:s?s.data:null,activeStudents:(u==null?void 0:u.activeStudents.length)||0,unassignedStudents:(x==null?void 0:x.unassignedStudents.length)||0}},_e=t=>{const{currentUser:r,loading:n}=F(),o=P(t).format("YYYY-MM-DD"),l=r==null?void 0:r.id,{data:s,error:d}=I({queryKey:["classAttendance",o],queryFn:()=>D(`attendance/class-details?date=${o}`,l),staleTime:3e4}),{data:u,error:f}=I({queryKey:["presence"],queryFn:()=>D("attendance/count-present",l),staleTime:5e3}),{data:x,error:S}=I({queryKey:["late"],queryFn:()=>D("attendance/count-late",l),staleTime:5e3}),{data:j,error:v}=I({queryKey:["absent"],queryFn:()=>D("attendance/count-absent",l),staleTime:5e3});return{classAttendance:s?s.data:[],presence:u?u.data:0,late:x?x.data:0,absent:j?j.data:0,loading:n}},We=()=>{const{currentUser:t,loading:r}=F(),n=t==null?void 0:t.id,{data:o,error:l}=I({queryKey:["classes"],queryFn:()=>D("student/list-classes",n),staleTime:5e3}),{data:s,error:d}=I({queryKey:["attendanceLog"],queryFn:()=>D("attendance/class-present",n),staleTime:5e3});return{classes:o||[],attendanceLog:s?s==null?void 0:s.presence:null,loading:r}},at=()=>{const{currentUser:t}=F(),r=t==null?void 0:t.id;r||console.warn("Waiting for User ID");const{data:n,error:o,isLoading:l}=I({queryKey:["nextLog",r],queryFn:()=>D("cron-schedule",r),staleTime:5e3});return{nextLog:h.useMemo(()=>!(n!=null&&n.initializeAttendance)||!(n!=null&&n.setAbsent)?null:n,[n]),isLoading:l,isError:!!o}},tt=(t,r)=>{const{currentUser:n,loading:o}=F(),l=n==null?void 0:n.id,{data:s,error:d,isLoading:u}=I({queryKey:["report",t,r,l],queryFn:()=>l?D(`attendance/report?month=${t}&year=${r}`,l):Promise.reject("Tenant ID is required"),staleTime:5e3,enabled:!!l&&!!r&&!!t});return d&&console.error("Error fetching report",d),{report:s?s.data:null,isLoading:o||u,error:d}},st=t=>{var j,v,g,c;const{currentUser:r,loading:n}=F(),o=r==null?void 0:r.id,l=P(new Date).year(),{data:s,error:d}=I({queryKey:["report"],queryFn:()=>D(`attendance/report?month=${t}&year=${l}`,o),staleTime:3e4,enabled:!!o&&!!t}),{data:u,error:f}=I({queryKey:["week"],queryFn:()=>D("attendance/weekly-summary",o),staleTime:3e4,enabled:!!o}),x=Array.isArray((j=s==null?void 0:s.data)==null?void 0:j.metadata)&&((v=s==null?void 0:s.data)==null?void 0:v.metadata.slice().sort((i,m)=>i.class<m.class?-1:i.class>m.class?1:0).map(i=>i.class))||[],S=Array.isArray((g=s==null?void 0:s.data)==null?void 0:g.metadata)&&((c=s==null?void 0:s.data)==null?void 0:c.metadata.slice().sort((i,m)=>i.class<m.class?-1:i.class>m.class?1:0).map(i=>i.attendances))||[];return{classNames:x,attendances:S,week:u?u.weeklyAttendance:{},loading:n}},rt=(t,r)=>{try{const n=t==null?void 0:t.replace(" ","T"),o=r==null?void 0:r.replace(" ","T"),l=new Date(n),s=new Date(o);if(isNaN(l.getTime())||isNaN(s.getTime()))return"Invalid date range";const d=l.toLocaleDateString("en-US",{month:"short",day:"2-digit"}),u=l.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),f=s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1});return`${d} ${u}-${f}`}catch(n){return console.error("Error formatting date range:",n),"Invalid date range"}},nt=()=>{const{nextLog:t}=at(),[r,n]=h.useState([]);return h.useEffect(()=>{if(!t||typeof t!="object"){n([]);return}const o=[{icon:Ee,color:"text-red-500",title:"Unauthorized RFID Card Detected",description:"22 DEC 7:20 AM",isActive:!1},{icon:ia,color:"text-green-500",title:"RFID Cards assigned to students",description:"21 DEC 11 PM",isActive:!1},{icon:ca,color:"text-blue-gray-300",title:"Students Logging Schedule",description:t.initializeAttendance&&t.setAbsent?rt(t.initializeAttendance,t.setAbsent):"N/A",isActive:!!t.initializeAttendance&&!!t.setAbsent},{icon:Ie,color:"text-blue-500",title:"New card added for student with ID STD-409",description:"20 DEC 2:20 AM",isActive:!1},{icon:da,color:"text-orange-300",title:"System Maintenance",description:"17 DEC",isActive:!1}];n(o)},[t]),e.jsx(a.CardBody,{className:"pt-0 max-h-96 overflow-y-scroll",children:r.filter(o=>o.isActive).map(({icon:o,color:l,title:s,description:d},u)=>e.jsxs("div",{className:"flex items-start gap-4 py-3",children:[e.jsx("div",{className:`relative p-1 after:absolute after:-bottom-6 after:left-2/4 after:w-0.5 after:-translate-x-2/4 after:bg-blue-gray-50 after:content-[''] ${u===r.length-1?"after:h-0":"after:h-4/6"}`,children:B.createElement(o,{className:`!w-5 !h-5 ${l}`})}),e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"small",className:`block font-medium ${l}`,children:s}),e.jsx(a.Typography,{as:"span",variant:"small",className:"text-xs font-medium text-blue-gray-500",children:d})]})]},d))})};function lt(){const{presence:t,late:r,absent:n}=_e(),{activeCards:o}=Ye(),{classes:l,attendanceLog:s}=We(),d=new Date;d.getMonth();const u=d.toLocaleString("en-US",{month:"long"}),{classNames:f,attendances:x,week:S}=st(u),j=["Monday","Tuesday","Wednesday","Thursday","Friday"],v=j.map(y=>{var w;return((w=S[y])==null?void 0:w.present)||0}),g=j.map(y=>{var w;return((w=S[y])==null?void 0:w.late)||0}),c=j.map(y=>{var w;return((w=S[y])==null?void 0:w.absent)||0}),m={color:"white",title:"Attendance Trends",description:"Last Week Performance",footer:"just updated",chart:{type:"bar",height:220,series:[{name:"Present",data:v},{name:"Late",data:g},{name:"Absent",data:c}],options:{...ee,colors:["#689f38","#f9a825","#d84315"],plotOptions:{bar:{columnWidth:"20%",borderRadius:5}},xaxis:{...ee.xaxis,categories:["Mon","Tue","Wed","Thu","Fri"]}}}},p={color:"white",title:"Attendance By Grade",description:"Overall Monthly Perfomance",footer:"just updated",chart:{type:"bar",height:220,series:[{name:"Logs",data:x}],options:{...ee,colors:["#0288d1","#558b2f","#009688","#283593","#fbc02d","#ef6c00"],plotOptions:{bar:{columnWidth:"10%",borderRadius:2,distributed:!0}},xaxis:{...ee.xaxis,categories:f}}}};return e.jsxs("div",{className:"mt-12",children:[e.jsxs("div",{className:"mb-12 grid gap-y-10 gap-x-6 md:grid-cols-2 xl:grid-cols-4",children:[e.jsx(z,{color:"green",title:"Present",value:t||0,icon:e.jsx(ma,{className:"w-6 h-6 text-white"}),footer:e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"})},1),e.jsx(z,{color:"red",title:"Absent",value:n||0,icon:e.jsx(Ee,{className:"w-6 h-6 text-white"}),footer:e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"})},2),e.jsx(z,{color:"amber",title:"Late Arrivals",value:r||0,icon:e.jsx(se,{className:"w-6 h-6 text-white"}),footer:e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"})},3),e.jsx(z,{color:"teal",title:"Active Cards",value:o||0,icon:e.jsx(oe,{className:"w-6 h-6 text-white"}),footer:e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"})},4)]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-y-12 gap-x-6 md:grid-cols-1 xl:grid-cols-2",children:[e.jsx(ae,{...m,footer:e.jsxs(a.Typography,{variant:"small",className:"flex items-center font-normal text-blue-gray-600",children:[e.jsx(se,{strokeWidth:2,className:"h-4 w-4 text-blue-gray-400"})," ",m.footer]})},m.title),e.jsx(ae,{...p,footer:e.jsxs(a.Typography,{variant:"small",className:"flex items-center font-normal text-blue-gray-600",children:[e.jsx(se,{strokeWidth:2,className:"h-4 w-4 text-blue-gray-400"})," ",p.footer]})},p.title)]}),e.jsxs("div",{className:"mb-4 grid grid-cols-1 gap-6 xl:grid-cols-3",children:[e.jsxs(a.Card,{className:"overflow-hidden xl:col-span-2 border border-blue-gray-100 shadow-sm",children:[e.jsxs(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-1",children:"Classrooms"}),e.jsxs(a.Typography,{variant:"small",className:"flex items-center gap-1 font-normal text-blue-gray-600",children:[e.jsx(ua,{strokeWidth:3,className:"h-4 w-4 text-blue-gray-200"}),e.jsx("strong",{children:l.length})," registered rooms"]})]}),e.jsxs(a.Menu,{placement:"left-start",children:[e.jsx(a.MenuHandler,{children:e.jsx(a.IconButton,{size:"sm",variant:"text",color:"blue-gray",children:e.jsx(ie,{strokeWidth:3,fill:"currentColor",className:"h-5 w-5"})})}),e.jsx(a.MenuList,{children:e.jsx(a.MenuItem,{children:e.jsx(Q,{to:"/dashboard/attendance/students",children:"View Details"})})})]})]}),e.jsx(a.CardBody,{className:"overflow-x-scroll px-0 pt-0 pb-2 max-h-96",children:e.jsxs("table",{className:"w-full min-w-[640px] table-auto",children:[e.jsx("thead",{children:e.jsx("tr",{children:["Class Name","Total Students","Attendance"].map(y=>e.jsx("th",{className:"border-b border-blue-gray-50 py-3 px-6 text-left stiky",children:e.jsx(a.Typography,{variant:"small",className:"text-[11px] font-medium uppercase text-blue-gray-400",children:y})},y))})}),e.jsx("tbody",{children:s&&Array.isArray(l)&&l.map(({grade:y,studentsCount:w,completion:$},M)=>{const R=`py-3 px-5 ${M===l.length-1?"":"border-b border-blue-gray-50"}`;return e.jsxs("tr",{children:[e.jsx("td",{className:R,children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-bold",children:y})})}),e.jsx("td",{className:R,children:e.jsx(a.Typography,{variant:"small",className:"text-xs font-medium text-blue-gray-600",children:w})}),e.jsx("td",{className:R,children:e.jsxs("div",{className:"w-10/12",children:[e.jsxs(a.Typography,{variant:"small",className:"mb-1 block text-xs font-medium text-blue-gray-600",children:[(s[y]/w*100).toFixed(),"%"]}),e.jsx(a.Progress,{value:s[y]&&w?Math.round(s[y]/w*100):0,variant:"gradient",color:s[y]&&w?Math.round(s[y]/w*100)===100?"green":Math.round(s[y]/w*100)<=100&&Math.round(s[y]/w*100)>=50?"blue":"red":"blue",className:"h-1"})]})})]},y)})})]})})]}),e.jsxs(a.Card,{className:"border border-blue-gray-100 shadow-sm",children:[e.jsxs(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 p-6",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-2",children:"Real-Time Logs"}),e.jsxs(a.Typography,{variant:"small",className:"flex items-center gap-1 font-normal text-blue-gray-600",children:[e.jsx(ha,{strokeWidth:3,className:"h-3.5 w-3.5 text-green-500"}),"current updates"]})]}),e.jsx(nt,{})]})]})]})}function ot({isOpen:t,onClose:r}){const{currentUser:n,updateInfo:o}=F(),[l,s]=h.useState(n.user_metadata.displayName),[d,u]=h.useState(n.email),[f,x]=h.useState(""),[S,j]=h.useState(!1),[v,g]=h.useState(null),[c,i]=h.useState(""),m=y=>{const w=y.target.files[0];w&&(g(w),i(URL.createObjectURL(w)))},N=()=>{document.getElementById("profile-image-input").click()};async function p(y){y.preventDefault();try{await o(l,d,v||null),x(null)}catch(w){x(w.message)}}return h.useEffect(()=>(t?(document.body.style.overflow="hidden",f!==""&&b(f,{type:"error"})):document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t,f]),t?e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm"}),e.jsxs(V.div,{className:"relative z-10 bg-white rounded-lg shadow-lg p-8 w-full lg:w-2/5 mx-2 flex items-center flex-col justify-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:[e.jsx(a.Typography,{variant:"h1",className:"font-['Aquire'] bg-gradient-to-r from-black/40 via-black/60 to-black/80 bg-clip-text",style:{WebkitTextFillColor:"transparent"},children:"ATS"}),e.jsx(a.Typography,{variant:"h6",color:"gray",className:"mb-1 font-normal font-['Nunito']",children:"Edit profile info"}),e.jsxs("form",{className:"mt-8 mb-2 mx-auto w-80 max-w-screen-lg lg:w-1/2",children:[e.jsxs("div",{className:"flex flex-col gap-2 m-auto",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Edit Profile"}),e.jsx("div",{className:"flex items-center justify-center",onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),children:e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx(a.Avatar,{src:c||n&&n.user_metadata.profile||"/img/no-profile.jpg",alt:l||n.email,size:"xl",variant:"rounded",className:"rounded-md shadow-lg shadow-blue-gray-500/40 bg-fixed bg-cover bg-no-repeat"}),S&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(a.Tooltip,{content:"Upload Image",children:e.jsx(a.IconButton,{onClick:N,className:"bg-white shadow-lg shadow-blue-gray-500/40 z-50",children:e.jsx(xa,{className:"h-5 w-5 text-blue-gray-500"})})})}),e.jsx("input",{type:"file",id:"profile-image-input",accept:"image/*",className:"hidden w-0 h-0 absolute",onChange:m})]})})]}),e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Organization Name"}),e.jsx(a.Input,{size:"lg",placeholder:"Name",value:l,onChange:y=>s(y.currentTarget.value),className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}})]}),e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Your email"}),e.jsx(a.Input,{size:"lg",placeholder:"name@mail.com",type:"email",value:d,onChange:y=>u(y.currentTarget.value),className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}})]}),e.jsxs("div",{className:"flex gap-4 mt-6 items-center",children:[e.jsx(a.Button,{color:"blue-gray",onClick:r,variant:"outlined",children:"Cancel"}),e.jsx(a.Button,{color:"blue",onClick:y=>p(y),variant:"outlined",children:"Save"})]})]})]})]}):null}function it(){const{currentUser:t}=F(),r=t==null?void 0:t.user_metadata,[n,o]=h.useState("info"),[l,s]=h.useState(!1),[d,u]=h.useState(""),[f,x]=h.useState(""),S=async()=>{if(!d||!f){b.error("Start Time and End Time are required!");return}try{(await L.post("/api/v1/initialize-cron",{startTime:d,endTime:f},{headers:{"x-tenant-id":t==null?void 0:t.id}})).status===200?b.success("Schedule initialized successfully!"):b.error("Failed to initialize schedule")}catch(v){console.error("Error initializing schedule:",v),b.error("An error occurred. Please try again.")}},j=()=>s(!l);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"relative mt-8 h-72 w-full overflow-hidden rounded-xl bg-[url('/img/bg-signup.jpg')] bg-cover	bg-center",children:e.jsx("div",{className:"absolute inset-0 h-full w-full bg-gray-900/75"})}),e.jsx(a.Card,{className:"mx-3 -mt-16 mb-6 lg:mx-4 border border-blue-gray-100",children:e.jsxs(a.CardBody,{className:"p-4",children:[e.jsxs("div",{className:"mb-10 flex items-center justify-between flex-wrap gap-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(a.Avatar,{src:r&&r.profile||"/img/no-profile.jpg",alt:(r==null?void 0:r.displayName)||t.email,size:"xl",variant:"rounded",className:"rounded-lg shadow-lg shadow-blue-gray-500/40"}),e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h5",color:"blue-gray",className:"mb-1",children:(r==null?void 0:r.displayName)||t.email}),e.jsx(a.Typography,{variant:"small",className:"font-normal text-blue-gray-600",children:"Owner"})]})]}),e.jsx("div",{className:"w-96 items-center",children:e.jsx(a.Tabs,{value:n,children:e.jsxs(a.TabsHeader,{children:[e.jsxs(a.Tab,{value:"info",onClick:()=>o("info"),children:[e.jsx(pa,{className:"-mt-1 mr-2 inline-block h-5 w-5"}),"Info"]}),e.jsxs(a.Tab,{value:"metrics",onClick:()=>o("metrics"),children:[e.jsx(fa,{className:"-mt-1 mr-2 inline-block h-5 w-5"}),"Metrics"]})]})})})]}),e.jsx("div",{className:"relative h-64 overflow-hidden max-w-sm",children:e.jsxs(V.div,{className:"flex max-w-sm h-full gap-4",initial:{x:n==="info"?"0%":"-100%",opacity:0},animate:{x:n==="info"?"0%":"-100%",opacity:1},transition:{duration:.5},children:[e.jsx(V.div,{className:"w-full flex-shrink-0",children:e.jsx(ge,{title:"Profile Information",details:{"School mobile":`+${r.phone}`,"School email":`${t.email}`},action:e.jsx(a.Tooltip,{content:"Edit Profile",children:e.jsx(ga,{className:"h-4 w-4 cursor-pointer text-blue-gray-500",onClick:j})})})}),e.jsxs(V.div,{className:"w-full flex-shrink-0",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-4",children:"Metrics"}),e.jsxs("div",{className:"flex flex-col gap-4 w-5/6 md:w-3/4",children:[e.jsx(a.Input,{type:"time",label:"Start Time",value:d,onChange:v=>u(v.target.value),placeholder:"08:00 AM"}),e.jsx(a.Input,{type:"time",label:"End Time",value:f,onChange:v=>x(v.target.value),placeholder:"04:00 PM"}),e.jsx(a.Button,{color:"light-blue",onClick:S,className:"self-start",children:"Initialize"})]})]})]})})]})}),l&&e.jsx(ot,{onClose:()=>s(!1),isOpen:l})]})}function be(){return e.jsxs(_.div,{className:"flex flex-col items-center justify-center min-h-screen bg-transparent gap-y-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx(a.Typography,{variant:"h4",className:"font-['Nunito'] text-black font-normal",children:"Processing"}),e.jsx(a.Spinner,{color:"gray",className:"h-12 w-12 mb-4"})]})}function ct(){var Ne,ve;const{currentUser:t}=F(),{classes:r}=We(),[n,o]=h.useState(""),[l,s]=h.useState(P().toDate()),{classAttendance:d}=_e(l),u=h.useRef(),[f,x]=h.useState(null),[S,j]=h.useState(!1),[v,g]=h.useState({}),[c,i]=h.useState(new Set),[m,N]=h.useState([]),[p,y]=h.useState(!1),w=r.filter(T=>T.grade===n)[0]||null,$=h.useMemo(()=>d,[d]);ya.HIGH,ba.LARGE;const M=(w==null?void 0:w.studentsCount)||0;h.useEffect(()=>{const T=($==null?void 0:$.filter(A=>A.className===n))||[];N(A=>A.length===T.length&&A.every((q,Y)=>q===T[Y])?A:T)},[$,n]);const R=(T,A)=>{g(k=>({...k,[T]:{...k[T],status:A}})),i(k=>new Set(k).add(T))},E=h.useRef({}),Ke=(T,A)=>{g(k=>{var Y;return(((Y=k[T])==null?void 0:Y.notes)||E.current[T]||"")===A?k:(E.current[T]=A,{...k,[T]:{...k[T],notes:A}})}),i(k=>new Set(k).add(T))},Xe=(T,A,k)=>{var G;const q=(f==null?void 0:f.studentID)===A&&(f==null?void 0:f.statusType)===k,Y=((G=v[A])==null?void 0:G.status)||T;return e.jsx(ce,{className:`h-5 w-5 ${Y===k?k==="present"?"text-green-500":k==="absent"?"text-red-500":"text-amber-500":q?"text-gray-400":"hidden"}`,"aria-hidden":"true"})},Ge=async()=>{const T=m.map(k=>({...k,students:k.students.map(q=>v[q.studentID]?{...q,...v[q.studentID]}:q)}));N(T),g({}),i(new Set),j(!1);const A={...T,date:P(l).format("YYYY-MM-DD")};try{y(!0),await et(A,t==null?void 0:t.id),y(!1)}catch(k){throw k}},Je=()=>{g({}),i(new Set),j(!1)},Qe=T=>{const A=P(T.target.value).toDate();A<=P().toDate()&&s(A)},Ze=()=>{const T=P(),A=P(l);return A.isSame(T,"day")?`Today ${A.format("MMM D, YYYY")}`:A.isSame(T.subtract(1,"day"),"day")?`Yesterday ${A.format("MMM D, YYYY")}`:A.format("MMM D, YYYY")};return p?e.jsx(be,{}):e.jsxs("div",{className:"mt-12 mb-8 flex flex-col gap-12",children:[e.jsxs("div",{className:"w-full flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx(a.Typography,{variant:"h5",className:"font-bold font-['Nunito']",children:"Class Attendance"}),e.jsxs("div",{className:"flex items-center gap-4 justify-end",children:[e.jsx(a.Typography,{variant:"small",className:"font-semibold font-['Nunito']",children:Ze()}),e.jsx("div",{className:"w-72",children:e.jsx(a.Input,{type:"date",onChange:Qe,value:P(l).format("YYYY-MM-DD"),max:P().format("YYYY-MM-DD"),className:"border rounded px-2 py-1 text-sm font-['Nunito']"})})]})]}),e.jsx("div",{className:"w-72",children:e.jsx(a.Select,{label:"Select Classroom",value:n,onChange:T=>o(T),children:Array.isArray(r)&&r.map(T=>e.jsx(a.Option,{value:T.grade,children:T.grade},T.grade))},n)}),n&&e.jsxs(e.Fragment,{children:[e.jsxs(a.Card,{ref:u,children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-1 mx-5 my-5",children:e.jsx(a.Typography,{variant:"h5",color:"blue-gray",className:"mb-1 font-['Nunito'] font-bold",children:t.user_metadata.displayName})}),e.jsxs(a.Typography,{variant:"small",className:"flex items-center gap-1 font-normal text-blue-gray-600 font-['Nunito'] mx-5",children:["Class Attendance on ",P(l).format("YYYY-MM-DD")]})]}),e.jsxs(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 flex p-6 flex-col w-full",children:[e.jsxs("div",{className:"w-full items-center justify-between flex",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-1",children:n}),e.jsxs(a.Menu,{placement:"left-start",children:[e.jsx(a.MenuHandler,{children:e.jsx(a.IconButton,{size:"sm",variant:"text",color:"blue-gray",children:e.jsx(ie,{strokeWidth:3,fill:"currentColor",className:"h-5 w-5"})})}),e.jsxs(a.MenuList,{children:[e.jsx(a.MenuItem,{onClick:()=>j(T=>!T),children:S?"Cancel":"Edit"}),S&&e.jsx(a.MenuItem,{onClick:Ge,children:"Save All Changes"}),S&&e.jsx(a.MenuItem,{onClick:Je,children:"Leave Edit Mode"})]})]})]}),e.jsx("div",{children:e.jsxs(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal font-['Nunito']",children:["Total Students: ",M]})})]}),e.jsx(a.CardBody,{className:"overflow-x-scroll",children:e.jsxs("table",{className:"w-full table-auto border",children:[e.jsx("thead",{children:e.jsx("tr",{children:["Student ID","Name","Present","Absent","Late","Arrival Time","Remarks"].map((T,A)=>e.jsx("th",{className:"border-b border-blue-gray-50 py-3 px-1 text-left",children:e.jsx(a.Typography,{variant:"small",className:"text-[11px] font-bold uppercase text-blue-gray-400",children:T})},`${T}-${A}`))})}),e.jsx("tbody",{children:(ve=(Ne=m[0])==null?void 0:Ne.students)==null?void 0:ve.map((T,A)=>{var we,Te,Se;const{studentID:k,studentName:q,status:Y,arrivalTime:G,notes:Z}=T,J=`py-2 px-2 ${A===((Te=(we=m[0])==null?void 0:we.students)==null?void 0:Te.length)-1?"":"border-b border-blue-gray-50"}`;return e.jsxs("tr",{children:[e.jsx("td",{className:`${J} w-32`,children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-bold font-['Nunito']",children:k})}),e.jsx("td",{className:`${J}`,children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-['Nunito']",children:q})}),["present","absent","late"].map(W=>e.jsx("td",{className:`${J} cursor-pointer`,onMouseEnter:()=>S&&x({studentID:k,statusType:W}),onMouseLeave:()=>S&&x(null),onClick:()=>S&&R(k,W),children:Xe(Y,k,W)},W)),e.jsx("td",{className:`${J} font-light font-['Nunito'] text-sm`,children:G&&P(G).format("HH:mm")}),e.jsx("td",{className:`${J}`,children:S?e.jsx(a.Input,{placeholder:"Add notes",value:((Se=v[k])==null?void 0:Se.notes)??E.current[k]??Z??"",onChange:W=>Ke(k,W.target.value),className:"resize-none border border-gray-300 rounded px-2 py-2 text-sm"}):e.jsx(a.Typography,{variant:"small",className:"font-['Nunito']",children:Z&&Z==="N/A"?"":Z||"N/A"})})]},k)})})]})}),e.jsx("div",{className:"watermark text-center mt-8",children:e.jsx("p",{style:{opacity:.1,fontSize:"24px"},className:"font-['Aquire']",children:"ATS"})})]}),e.jsx("div",{className:"hidden gap-4 mt-4 lg:flex",children:e.jsxs(a.Button,{variant:"filled",color:"blue",className:"flex items-center gap-2",onClick:()=>De(u,{filename:`${n}_Attendance_${P(l).format("YYYY-MM-DD")}.pdf`}),children:[e.jsx(ja,{className:"w-5 h-5"}),"Download PDF"]})})]})]})}function je({brandName:t="ATS"}){return e.jsxs(_.div,{className:"flex flex-col items-center justify-center mt-40 bg-transparent",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx(a.Typography,{variant:"h1",className:"font-['Aquire'] bg-gradient-to-r from-black/40 via-black/60 to-black/80 bg-clip-text",style:{WebkitTextFillColor:"transparent"},children:t}),e.jsx("p",{className:'font-normal font-["Nunito"]',children:"This feature is still in development"})]})}function dt(){return e.jsx(je,{})}function mt(){return e.jsx(je,{})}function ut(){const{rfidCards:t,activeCards:r,unassignedCards:n}=Ye(),{currentUser:o}=F();h.useState("");const[l,s]=h.useState(""),[d,u]=h.useState(!1),[f,x]=h.useState(null),S=c=>{c.preventDefault(),x(c.target.files[0])};function j(){fetch("https://ats-kkcp.onrender.com/api/v1/card/download-template").then(c=>{if(!c.ok)throw new Error("Failed to download template");return c.blob()}).then(c=>{const i=window.URL.createObjectURL(c),m=document.createElement("a");m.style.display="none",m.href=i,m.download="Card_Template.csv",document.body.appendChild(m),m.click(),window.URL.revokeObjectURL(i)}).catch(c=>{console.error("Error downloading the template:",c)})}const v=async()=>{if(l!=="")try{const c=await L.post("/api/v1/rfid/set",{rfid_ID:l},{headers:{"x-tenant-id":`${o.id}`}});s(""),b(c.data.msg,{type:"success"})}catch(c){b(c.response.data.error,{type:"error"})}},g=async(c,i,m)=>{var N,p,y,w,$,M;if(c&&i)try{(await L.post(`/api/v1/rfid/deactivate/${c}`,{},{headers:{"x-tenant-id":`${o.id}`}})).status===201?b("Card deactivated successfully",{type:"success"}):b("Failed to deactivate card",{type:"warning"})}catch(R){b(((p=(N=R.response)==null?void 0:N.data)==null?void 0:p.message)||"Error occurred while deactivating card",{type:"error"})}else if(!i&&m)try{(await L.post(`/api/v1/rfid/activate/${c}`,{},{headers:{"x-tenant-id":`${o.id}`}})).status===201?b("Card activated successfully",{type:"success"}):b("Failed to activate card",{type:"warning"})}catch(R){b(((w=(y=R.response)==null?void 0:y.data)==null?void 0:w.message)||"Error occurred while activating card",{type:"error"})}else if(!m)try{(await L.delete(`/api/v1/rfid/delete/${c}`,{headers:{"x-tenant-id":`${o.id}`}})).status===201?b("Card deleted successfully",{type:"success"}):b("Failed to delete card",{type:"warning"})}catch(R){b(((M=($=R.response)==null?void 0:$.data)==null?void 0:M.message)||"Error occurred while deleting card",{type:"error"})}};return d?e.jsx(be,{}):e.jsxs("div",{className:"mt-12",children:[e.jsxs("div",{className:"mb-5 grid gap-y-10 gap-x-6 md:grid-cols-2 xl:grid-cols-4",children:[e.jsx(z,{color:"teal",title:"Active Cards",value:r,icon:e.jsx(oe,{className:"w-6 h-6 text-white"}),footer:e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"})},1),e.jsx(z,{color:"blue-gray",title:"Unassigned Cards",value:n,icon:e.jsx(Ie,{className:"w-6 h-6 text-white"}),footer:e.jsxs("div",{className:"w-full flex justify-between items-center",children:[e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"}),e.jsxs(a.Menu,{placement:"left-start",children:[e.jsx(a.MenuHandler,{children:e.jsx(a.IconButton,{size:"sm",variant:"text",color:"blue-gray",children:e.jsx(Na,{strokeWidth:3,fill:"currenColor",className:"h-6 w-6"})})}),e.jsx(a.MenuList,{children:e.jsx(a.MenuItem,{onClick:async()=>{try{u(!0),await Be(o.id),u(!1)}catch(c){throw c}},children:"Assign All"})})]})]})},2)]}),e.jsx("div",{className:"mb-6 grid grid-cols-1 gap-y-12 gap-x-6 md:grid-cols-1 xl:grid-cols-2",children:e.jsxs(a.Card,{children:[e.jsx(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 flex items-center justify-between p-6",children:e.jsx("div",{children:e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-1",children:"Card Management"})})}),e.jsx(a.CardBody,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx(a.Typography,{variant:"h6",className:"mb-4 font-semibold font-['Nunito']",children:"Register New Card"}),e.jsx(a.Input,{label:"Card ID",value:l,onChange:c=>s(c.target.value),placeholder:"Enter Card ID"}),e.jsx(a.Button,{color:"light-blue",onClick:v,children:"Register Card"})]}),e.jsxs("div",{className:"w-full max-w-sm flex flex-col items-start gap-4",children:[e.jsx(a.Typography,{variant:"h6",className:"text-sm font-semibold font-['Nunito']",children:"Import cards (CSV Format)"}),e.jsxs("label",{className:"w-full",children:[e.jsx("input",{type:"file",onChange:S,className:"hidden",id:"file-input"}),e.jsx(a.Input,{label:"Select File",variant:"outlined",placeholder:"example.csv",value:f?f.name:"",readOnly:!0,onClick:()=>document.getElementById("file-input").click()})]}),e.jsxs("div",{className:"w-full flex items-center gap-2",children:[e.jsx(a.Button,{color:"light-blue",onClick:()=>ze("rfid/upload",o.id,f),disabled:!f,children:"Upload"}),e.jsx(a.Button,{color:"blue-gray",onClick:()=>j(),variant:"outlined",children:"Download Template"})]})]})]})})]})}),e.jsxs(a.Card,{className:"overflow-hidden xl:col-span-2 border border-blue-gray-100 shadow-sm",children:[e.jsx(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 flex items-center justify-between p-6",children:e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-1",children:"Cards Overview"}),e.jsxs(a.Typography,{variant:"small",className:"flex items-center gap-1 font-normal text-blue-gray-600",children:[e.jsx("strong",{children:t==null?void 0:t.length})," registered cards"]})]})}),e.jsx(a.CardBody,{className:"overflow-x-scroll px-0 pt-0 pb-2 max-h-96",children:e.jsxs("table",{className:"w-full min-w-[640px] table-auto",children:[e.jsx("thead",{children:e.jsx("tr",{children:["Card ID","Assigned To","Class","Status","Actions"].map(c=>e.jsx("th",{className:"border-b border-blue-gray-50 py-3 px-5 text-left",children:e.jsx(a.Typography,{variant:"small",className:"text-[11px] font-bold uppercase text-blue-gray-400",children:c})},c))})}),e.jsx("tbody",{children:Array.isArray(t)&&t.map((c,i)=>{const m=`py-3 px-5 ${i===t.length-1?"":"border-b border-blue-gray-50"}`;return e.jsxs("tr",{children:[e.jsx("td",{className:m,children:e.jsx(a.Typography,{variant:"small",children:c.rfid_ID})}),e.jsx("td",{className:m,children:e.jsx(a.Typography,{variant:"small",children:c.assignedTo!==null?c.assignedTo:"N/A"})}),e.jsx("td",{className:m,children:e.jsx(a.Typography,{variant:"small",children:c.student?c.student.grade:"N/A"})}),e.jsx("td",{className:m,children:c.activated?e.jsx(ce,{className:"h-5 w-5 text-green-500"}):e.jsx($e,{className:"h-5 w-5 text-red-500"})}),e.jsx("td",{className:`${m} `,children:e.jsx(a.Button,{size:"sm",variant:"outlined",color:c.activated?"amber":c.student?"green":"red",onClick:()=>g(c.rfid_ID,c.activated,c.student),children:c.activated?"Deactivate":c.student?"Activate":"Remove"})})]},c.rfid_ID)})})]})})]})]})}function ht(){const{students:t,activeStudents:r,unassignedStudents:n}=Ue(),{currentUser:o}=F(),[l,s]=h.useState(!1),[d,u]=h.useState({studentID:"STD-",studentName:"",gender:"",grade:"",contact:""}),[f,x]=h.useState(null),S=i=>{i.preventDefault(),x(i.target.files[0])},j=i=>{const{name:m,value:N}=i.target;u(p=>({...p,[m]:N}))},v=async i=>{if(i.preventDefault(),d.gender)try{s(!0);const m=await L.post("/api/v1/student/create",d,{headers:{"x-tenant-id":`${o.id}`}});s(!1),b(m.data.msg,{type:"success"})}catch(m){b(m.response.data.error,{type:"error"})}else b("Fill out all required fields",{type:"error"})};function g(){fetch("https://ats-kkcp.onrender.com/api/v1/student/download-template").then(i=>{if(!i.ok)throw new Error("Failed to download template");return i.blob()}).then(i=>{const m=window.URL.createObjectURL(i),N=document.createElement("a");N.style.display="none",N.href=m,N.download="Student_Template.csv",document.body.appendChild(N),N.click(),window.URL.revokeObjectURL(m)}).catch(i=>{console.error("Error downloading the template:",i)})}const c=async(i,m,N)=>{var p,y,w,$,M,R;if(m&&i==="active")try{(await L.delete(`/api/v1/student/delete/${N}`,{headers:{"x-tenant-id":`${o.id}`}})).status===201?b("Student terminated successfully",{type:"success"}):b("Failed to terminate student",{type:"warning"})}catch(E){b(((y=(p=E.response)==null?void 0:p.data)==null?void 0:y.message)||"Error occurred while assigning student",{type:"error"})}else if(!m&&i==="active")try{const E=await L.post(`/api/v1/rfid/assign-single/${N}`,{},{headers:{"x-tenant-id":`${o.id}`}});E.status===201?b("Student assigned successfully",{type:"success"}):b(E.data.msg,{type:"warning"})}catch(E){b((($=(w=E.response)==null?void 0:w.data)==null?void 0:$.message)||"Error occurred while assigning student",{type:"error"})}else try{(await L.delete(`/api/v1/student/delete/${N}`,{headers:{"x-tenant-id":`${o.id}`}})).status===201?b("Student terminated successfully",{type:"success"}):b("Failed to terminate student",{type:"warning"})}catch(E){b(((R=(M=E.response)==null?void 0:M.data)==null?void 0:R.message)||"Error occurred while assigning student",{type:"error"})}};return l?e.jsx(be,{}):e.jsxs("div",{className:"mt-12 mb-8 flex flex-col gap-12",children:[e.jsxs("div",{className:"mb-5 grid gap-y-10 gap-x-6 md:grid-cols-2 xl:grid-cols-4",children:[e.jsx(z,{color:"teal",title:"Active Students",value:r||0,icon:e.jsx(va,{className:"w-6 h-6 text-white"}),footer:e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"})},1),e.jsx(z,{color:"blue-gray",title:"Unassigned Students",value:n||0,icon:e.jsx(wa,{className:"w-6 h-6 text-white"}),footer:e.jsxs("div",{className:"w-full flex justify-between items-center",children:[e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"}),e.jsxs(a.Menu,{placement:"left-start",children:[e.jsx(a.MenuHandler,{children:e.jsx(a.IconButton,{size:"sm",variant:"text",color:"blue-gray",children:e.jsx(ie,{strokeWidth:3,fill:"currenColor",className:"h-6 w-6"})})}),e.jsx(a.MenuList,{children:e.jsx(a.MenuItem,{onClick:async()=>{try{s(!0),await Be(o.id),s(!1)}catch(i){throw i}},children:"Assign All"})})]})]})},2),e.jsx(z,{color:"deep-orange",title:"Ineligible Students",value:t?t.length-r:0,icon:e.jsx(Ta,{className:"w-6 h-6 text-white"}),footer:e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"})},3)]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-y-12 gap-x-6 md:grid-cols-1 xl:grid-cols-2",children:[e.jsxs(a.Card,{className:"w-full max-w-3xl mx-auto",children:[e.jsx(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 flex items-center justify-between p-6",children:e.jsx("div",{children:e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-1",children:"Student Registration"})})}),e.jsx(a.CardBody,{children:e.jsxs("form",{onSubmit:v,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(a.Input,{label:"Student ID",name:"studentID",value:d.studentID,onChange:j,required:!0}),e.jsx(a.Input,{label:"Student Name",name:"studentName",value:d.studentName,onChange:j,required:!0}),e.jsxs(a.Select,{label:"Gender",name:"gender",value:d.gender,onChange:i=>u({...d,gender:i}),children:[e.jsx(a.Option,{value:"Male",children:"Male"}),e.jsx(a.Option,{value:"Female",children:"Female"})]}),e.jsx(a.Input,{label:"Grade",name:"grade",value:d.grade,onChange:j,required:!0}),e.jsx(a.Input,{label:"Contact",name:"contact",value:d.contact,onChange:j,required:!0}),e.jsx("div",{className:"w-full flex items-center justify-center",children:e.jsx(a.Button,{type:"submit",color:"light-blue",className:"max-w-sm",children:"Register Student"})})]})})]}),e.jsxs("div",{className:"w-full max-w-sm mx-auto flex flex-col items-start gap-4",children:[e.jsx(a.Typography,{variant:"h6",className:"text-sm font-semibold font-['Nunito']",children:"Import students (CSV Format)"}),e.jsxs("label",{className:"w-full",children:[e.jsx("input",{type:"file",onChange:S,className:"hidden",id:"file-input"}),e.jsx(a.Input,{label:"Select File",variant:"outlined",placeholder:"example.csv",value:f?f.name:"",readOnly:!0,onClick:()=>document.getElementById("file-input").click()})]}),e.jsxs("div",{className:"w-full flex items-center gap-2",children:[e.jsx(a.Button,{color:"light-blue",onClick:()=>ze("student/upload",o.id,f),disabled:!f,children:"Upload"}),e.jsx(a.Button,{color:"blue-gray",onClick:()=>g(),variant:"outlined",children:"Download Template"})]})]})]}),e.jsxs(a.Card,{className:"overflow-hidden xl:col-span-2 border border-blue-gray-100 shadow-sm",children:[e.jsx(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 flex items-center justify-between p-6",children:e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-1",children:"Students Overview"}),e.jsxs(a.Typography,{variant:"small",className:"flex items-center gap-1 font-normal text-blue-gray-600",children:[e.jsx("strong",{children:t==null?void 0:t.length})," registered students"]})]})}),e.jsx(a.CardBody,{className:"overflow-x-scroll px-0 pt-0 pb-2 max-h-96",children:e.jsxs("table",{className:"w-full min-w-[640px] table-auto",children:[e.jsx("thead",{children:e.jsx("tr",{children:["Student ID","Student Name","Class","Assigned","Actions"].map(i=>e.jsx("th",{className:"border-b border-blue-gray-50 py-3 px-5 text-left",children:e.jsx(a.Typography,{variant:"small",className:"text-[11px] font-bold uppercase text-blue-gray-400",children:i})},i))})}),e.jsx("tbody",{children:Array.isArray(t)&&t.map((i,m)=>{const N=`py-3 px-5 ${m===t.length-1?"":"border-b border-blue-gray-50"}`;return e.jsxs("tr",{children:[e.jsx("td",{className:N,children:e.jsx(a.Typography,{variant:"small",children:i.studentID})}),e.jsx("td",{className:N,children:e.jsx(a.Typography,{variant:"small",children:i.studentName})}),e.jsx("td",{className:N,children:e.jsx(a.Typography,{variant:"small",children:i.grade})}),e.jsx("td",{className:N,children:i.rfidCard?e.jsx(ce,{className:"h-5 w-5 text-green-500"}):i.status==="active"?e.jsx(Sa,{className:"h-5 w-5 text-gray-500"}):e.jsx($e,{className:"h-5 w-5 text-red-500"})}),e.jsx("td",{className:N,children:e.jsx(a.Button,{size:"sm",variant:"outlined",color:i.rfidCard?"blue-gray":i.status==="active"?"green":"red",onClick:()=>c(i.status,i.rfidCard,i.studentID),children:i.rfidCard?"Terminate":i.status==="active"?"assign":"remove"})})]},i.studentID)})})]})})]})]})}function xt(){return e.jsx(je,{})}Ca.register(ka,Aa,Ra);function pt(){const{currentUser:t}=F(),[r,n]=h.useState(""),[o,l]=h.useState(""),{report:s}=tt(r,o),d=h.useRef(),[u]=Fa(),f=u.get("search"),{student:x}=Ue(f),S={labels:["Present","Late","Absent"],datasets:[{data:[parseFloat(x==null?void 0:x.present),parseFloat(x==null?void 0:x.late),parseFloat(x==null?void 0:x.absent)],backgroundColor:["#4CAF50","#FF9800","#F44336"],hoverBackgroundColor:["#45A149","#F4A641","#D9392F"],borderWidth:1}]},j=new Date().getFullYear(),v=new Date().getMonth()+1,g=new Date().toLocaleDateString(),c=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}],i=Array.from({length:j-2020+1},(p,y)=>2020+y),m=p=>o===j&&p>v,N={labels:[`Male - ${((s==null?void 0:s.totalMales)/(s==null?void 0:s.totalStudents)*100).toFixed(1)}%`,`Female - ${((s==null?void 0:s.totalFemales)/(s==null?void 0:s.totalStudents)*100).toFixed(1)}%`],datasets:[{data:[((s==null?void 0:s.totalMales)/(s==null?void 0:s.totalStudents)*100).toFixed(1)||0,((s==null?void 0:s.totalFemales)/(s==null?void 0:s.totalStudents)*100).toFixed(1)||0],backgroundColor:["#92C5F9","#B6A6E9"],hoverBackgroundColor:["#4394E5","#876FD4"]}]};return e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-y-12 gap-x-6",children:[x&&e.jsxs(e.Fragment,{children:[e.jsx(a.Typography,{variant:"h5",className:"font-bold font-['Nunito']",children:"Student Analysis"}),e.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-4 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Ea,{className:"h-10 w-10 text-blue-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 font-['Nunito']",children:x.name}),e.jsx("p",{className:"text-gray-500 font-['Nunito']",children:x.studentID})]})]}),e.jsxs("div",{className:"flex items-center mb-6 justify-between",children:[e.jsxs("span",{className:"text-gray-700 text-sm mt-2 flex flex-col",children:[e.jsx("p",{className:"font-bold font-['Nunito'] text-black",children:"Attendance Breakdown"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("p",{children:[x.present," Present"]}),e.jsxs("p",{children:[x.late," Late"]}),e.jsxs("p",{children:[x.absent," Absent"]})]})]}),e.jsx("div",{className:"w-40 h-40",children:e.jsx(Ia,{data:S})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Grade:"}),e.jsx("p",{children:x.grade})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Gender:"}),e.jsx("p",{children:x.gender})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Contact:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Da,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{children:x.contact})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Card Active:"}),e.jsx("p",{className:x.cardActive?"text-green-600":"text-red-600",children:x.cardActive?"Yes":"No"})]})]})]})]}),e.jsx(a.Typography,{variant:"h5",className:"font-bold font-['Nunito']",children:"Attendance Report"}),e.jsxs("div",{className:"flex gap-4 flex-col lg:flex-row max-w-sm",children:[e.jsx(a.Select,{label:"Select Month",value:r.toString(),onChange:p=>n(p),className:"w-full",children:c.map(({value:p,label:y})=>e.jsx(a.Option,{value:y,disabled:m(p),children:y},p))}),e.jsx(a.Select,{label:"Select Year",value:o.toString(),onChange:p=>l(Number(p)),className:"w-full",children:i.map(p=>e.jsx(a.Option,{value:p.toString(),children:p},p))})]}),s&&r&&o&&e.jsxs(e.Fragment,{children:[e.jsxs(a.Card,{className:"p-4 shadow-lg",ref:d,children:[e.jsx(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 flex items-center justify-between p-5",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(a.Avatar,{src:t&&t.user_metadata.profile||"/img/no-profile.jpg",alt:(t==null?void 0:t.user_metadata.displayName)||t.email,size:"md",variant:"rounded",className:"rounded-lg shadow-blue-gray-500/40"}),e.jsx(a.Typography,{variant:"h5",color:"blue-gray",className:"mb-1 font-['Nunito'] font-bold",children:t.user_metadata.displayName})]}),e.jsx(a.Typography,{variant:"small",className:"flex items-center gap-1 font-normal text-blue-gray-600 font-['Nunito']",children:"Students Attendance Report"})]})}),e.jsxs(a.CardBody,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h6",className:"font-['Nunito'] font-semibold mb-2 text-black",children:"Report Details"}),e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito'] font-normal",children:["Report for ",r," ",o]}),e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito'] font-medium",children:["Generated on: ",g]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(a.Typography,{variant:"h6",className:"font-['Nunito'] font-semibold text-black",children:"Overview"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-4",children:[e.jsx("div",{className:"p-4 rounded-lg shadow-md flex items-center bg-gray-50",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{children:e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito']",children:[e.jsx("strong",{className:"font-medium",children:"Total Students:"})," ",(s==null?void 0:s.totalStudents)||0]})}),e.jsx("div",{children:e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito']",children:[e.jsx("strong",{className:"font-medium",children:"Male:"})," ",(s==null?void 0:s.totalMales)||0]})}),e.jsx("div",{children:e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito']",children:[e.jsx("strong",{className:"font-medium",children:"Female:"})," ",(s==null?void 0:s.totalFemales)||0]})}),e.jsx("div",{children:e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito']",children:[e.jsx("strong",{className:"font-medium",children:"On-Time Arrivals:"})," ",(s==null?void 0:s.attendances)||0]})}),e.jsx("div",{children:e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito']",children:[e.jsx("strong",{className:"font-medium",children:"Late Arrivals:"})," ",(s==null?void 0:s.lateArrivals)||0]})}),e.jsx("div",{children:e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito']",children:[e.jsx("strong",{className:"font-medium",children:"Absences:"})," ",(s==null?void 0:s.absences)||0]})})]})}),e.jsx("div",{className:"p-4 rounded-lg h-80 flex items-center justify-center",children:e.jsx($a,{data:N})})]})]}),e.jsxs("div",{className:"mt-6 overflow-x-auto",children:[e.jsx(a.Typography,{variant:"h6",className:"mb-2 font-['Nunito'] font-semibold",children:"Detailed Report"}),e.jsxs("table",{className:"w-full min-w-[640px] table-auto border",children:[e.jsx("thead",{children:e.jsx("tr",{children:["Class","Total Students","Male","Female","Presence","Late","Absence"].map(p=>e.jsx("th",{className:"border-b border-blue-gray-50 py-3 px-5 text-left",children:e.jsx(a.Typography,{variant:"small",className:"text-[11px] font-bold uppercase text-blue-gray-400",children:p})},p))})}),e.jsx("tbody",{children:Array.isArray(s==null?void 0:s.metadata)&&s.metadata.slice().sort((p,y)=>p.class<y.class?-1:p.class>y.class?1:0).map((p,y)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-2 border-b border-gray-200",children:p.class}),e.jsx("td",{className:"px-6 py-2 border-b border-gray-200",children:p.totalStudents}),e.jsx("td",{className:"px-6 py-2 border-b border-gray-200",children:p.male}),e.jsx("td",{className:"px-6 py-2 border-b border-gray-200",children:p.female}),e.jsx("td",{className:"px-6 py-2 border-b border-gray-200",children:p.attendances}),e.jsx("td",{className:"px-6 py-2 border-b border-gray-200",children:p.late}),e.jsx("td",{className:"px-6 py-2 border-b border-gray-200",children:p.absences})]},y))})]})]})]}),e.jsx(a.CardFooter,{className:"border-t border-gray-200 mt-4 bottom-0",children:e.jsx(a.Typography,{variant:"small",color:"gray",children:"This report is generated for institutional use only and provides an accurate summary of students attendance."})}),e.jsx("div",{className:"watermark text-center mt-8",children:e.jsx("p",{style:{opacity:.1,fontSize:"24px"},className:"font-['Aquire']",children:"ATS"})})]}),e.jsx("div",{className:"hidden gap-4 mt-4 lg:flex",children:e.jsxs(a.Button,{variant:"filled",color:"blue",className:"flex items-center gap-2",onClick:()=>De(d,{filename:`ATS_Monthly_Report_${s==null?void 0:s.month}_${o}.pdf`}),children:[e.jsx(Ma,{className:"w-5 h-5"}),"Download PDF"]})})]})]})}function ft(){const t=h.useRef(),r=h.useRef(),{logIn:n}=F(),[o,l]=h.useState(""),[s,d]=h.useState(!1);async function u(f){f.preventDefault();try{l(""),d(!0),await n(t.current.value,r.current.value)}catch{l("Failed to sign in")}d(!1)}return e.jsx(e.Fragment,{children:e.jsx(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("section",{className:"m-8 flex gap-4",children:[e.jsxs("div",{className:"w-full lg:w-3/5 mt-24",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(a.Typography,{variant:"h2",className:"font-bold mb-4",children:"Log In"}),e.jsx(a.Typography,{variant:"paragraph",color:"blue-gray",className:"text-lg font-normal",children:"Enter your email and password to Sign In."})]}),e.jsxs("form",{className:"mt-8 mb-2 mx-auto w-80 max-w-screen-lg lg:w-1/2",onSubmit:u,children:[e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Your email"}),e.jsx(a.Input,{size:"lg",placeholder:"name@mail.com",inputRef:t,className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}}),e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Password"}),e.jsx(a.Input,{type:"password",size:"lg",inputRef:r,placeholder:"********",className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}})]}),e.jsx(a.Button,{className:"mt-6",fullWidth:!0,disabled:s,onClick:async f=>{await u(f)},children:"Log In"}),e.jsx("div",{className:"flex items-center justify-between gap-2 mt-6",children:e.jsx(a.Typography,{variant:"small",className:"font-medium text-gray-900",children:e.jsx("a",{href:"#",children:"Forgot Password"})})}),e.jsx("div",{className:"space-y-4 mt-8"}),e.jsxs(a.Typography,{variant:"paragraph",className:"text-center text-blue-gray-500 font-medium mt-4",children:["Not registered?",e.jsx(Q,{to:"/auth/sign-up",className:"text-gray-900 ml-1",children:"Create account"})]})]})]}),e.jsx("div",{className:"w-2/5 h-full hidden lg:block",children:e.jsx("img",{src:"/img/pattern.png",className:"h-full w-full object-cover rounded-3xl"})})]})})})}function gt(){const t=h.useRef(null),r=h.useRef(null),[n,o]=h.useState(null),l=h.useRef(null),s=h.useRef(null),{signup:d,currentUser:u}=F(),[f,x]=h.useState(""),[S,j]=h.useState(!1);K();async function v(c){if(c.preventDefault(),l.current.value!==s.current.value)return x("Passwords do not match");if(t.current.value===null)return x("Provide your organization name");if(n===null)return x("Provide your phone number");try{x(""),j(!0),await d(t.current.value,r.current.value,n,l.current.value)}catch{x("Failed to create an account")}j(!1)}const g=(c,i,m)=>{o(c)};return h.useEffect(()=>{f!==""&&b(f,{type:"error"})},[f]),e.jsx(e.Fragment,{children:e.jsx(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("section",{className:"m-8 flex",children:[e.jsx("div",{className:"w-2/5 h-full hidden lg:block",children:e.jsx("img",{src:"/img/pattern.png",className:"h-full w-full object-cover rounded-3xl"})}),e.jsxs("div",{className:"w-full lg:w-3/5 flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(a.Typography,{variant:"h2",className:"font-bold mb-4",children:"Join Us Today"}),e.jsx(a.Typography,{variant:"paragraph",color:"blue-gray",className:"text-lg font-normal",children:"Enter your email and password to register."})]}),e.jsxs("form",{className:"mt-8 mb-2 mx-auto w-80 max-w-screen-lg lg:w-1/2",children:[e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Organization Name"}),e.jsx(a.Input,{size:"lg",placeholder:"Name",inputRef:t,className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}})]}),e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Your email"}),e.jsx(a.Input,{size:"lg",placeholder:"name@mail.com",type:"email",inputRef:r,className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}})]}),e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Phone Number"}),e.jsx(La,{country:"rw",masks:{rw:"... ... ..."},onlyCountries:["rw"],inputClass:"bg-transparent border-none focus:ring-2 focus:ring-gray-900 duration-200",containerClass:"rounded-md",buttonClass:"bg-transparent border-none",inputStyle:{width:"100%",height:"45px"},placeholder:"XXXX-XXX-XXX",onChange:g})]}),e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Your password"}),e.jsx(a.Input,{size:"lg",type:"password",inputRef:l,placeholder:"********",className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}})]}),e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Confirm Password"}),e.jsx(a.Input,{size:"lg",placeholder:"********",inputRef:s,type:"password",className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}})]}),e.jsx(a.Button,{className:"mt-6",fullWidth:!0,onClick:async c=>{await v(c)},disabled:S,children:S?"Loading":"Register Now"}),e.jsx("div",{className:"space-y-4 mt-8"}),e.jsxs(a.Typography,{variant:"paragraph",className:"text-center text-blue-gray-500 font-medium mt-4",children:["Already have an account?",e.jsx(Q,{to:"/auth/login",className:"text-gray-900 ml-1",children:"Log In"})]})]})]})]})})})}function yt(){const[t,r]=h.useState(""),n=l=>{const[s,d]=l.split("@");return`${s.slice(0,3)+"*****"}@${d}`};h.useEffect(()=>{(async()=>{const{data:s}=await O.auth.getUser();s&&s.email&&r(s.email)})()},[]);const o=async()=>{try{const{user:l,error:s}=await O.auth.getUser();if(l){const{error:d}=await O.auth.api.resendConfirmationEmail(l.email);d?b.error(d.message):b.success("Verification email resent! Please check your inbox.")}}catch{b.error("Error while resending email.")}};return e.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-100",children:e.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white shadow-xl rounded-lg",children:[e.jsx(a.Typography,{variant:"h5",color:"blue-gray",className:"text-center mb-6",children:"Verify Your Email"}),t&&e.jsxs(a.Typography,{color:"gray",className:"text-center mb-4",children:["Thank you for signing up! We have sent a verification email to"," ",e.jsx("strong",{children:n(t)}),". Please check your email (and the spam folder) to verify your account."]}),e.jsx("div",{className:"text-center",children:e.jsx(a.Button,{color:"blue",onClick:o,className:"w-full",children:"Resend Verification Email"})}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs(a.Typography,{color:"gray",className:"text-sm",children:["If you've already verified your email, you can go back to the ",e.jsx("a",{href:"/auth/login",className:"text-blue-500 hover:text-blue-700",children:"Login"})," page."]})})]})})}const H={className:"w-5 h-5 text-inherit"},Re=[{title:"Overview",layout:"dashboard",pages:[{icon:e.jsx(Pa,{...H}),name:"dashboard",path:"/home",element:e.jsx(lt,{})},{icon:e.jsx(re,{...H}),name:"profile",path:"/profile",element:e.jsx(it,{})}]},{title:"Attendance",layout:"dashboard",pages:[{icon:e.jsx(Oa,{...H}),name:"Records",menu:!0,menuList:[{name:"Students Log",path:"/attendance/students",element:e.jsx(ct,{})},{name:"Staff Log",path:"/attendance/staff",element:e.jsx(dt,{})}]}]},{title:"Tools",layout:"dashboard",pages:[{icon:e.jsx(oe,{...H}),name:"Setup",path:"/card",element:e.jsx(ut,{})},{icon:e.jsx(qa,{...H}),name:"Register",menu:!0,menuList:[{name:"Students",path:"/register/students",element:e.jsx(ht,{})},{name:"Staff",path:"/register/staff",element:e.jsx(xt,{})}]}]},{title:"Reports & Analytics",layout:"dashboard",pages:[{icon:e.jsx(za,{...H}),name:"Insights",path:"/reports",menu:!0,menuList:[{name:"Students Report",path:"/reports/students",element:e.jsx(pt,{})},{name:"Staff Report",path:"/reports/staff",element:e.jsx(mt,{})}]}]}],bt=[{title:"Authentication",layout:"auth",pages:[{name:"sign up",path:"/sign-up",element:e.jsx(gt,{})},{name:"log in",path:"/login",element:e.jsx(ft,{})},{name:"verify email",path:"/verify-email",element:e.jsx(yt,{})}]}];function jt({isOpen:t,onClose:r}){const{logOut:n}=F(),o=K();async function l(){try{await n(),o("/",{replace:!0})}catch(s){console.log(s)}}return h.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),t?e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm"}),e.jsxs(V.div,{className:"relative z-10 bg-white rounded-lg shadow-lg p-8 w-80 text-center gap-2",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:[e.jsx(a.Typography,{variant:"h1",className:"font-['Aquire'] bg-gradient-to-r from-black/40 via-black/60 to-black/80 bg-clip-text",style:{WebkitTextFillColor:"transparent"},children:"ATS"}),e.jsx(a.Typography,{variant:"h6",color:"gray",className:"mb-4 font-normal font-['Nunito']",children:"Are you sure you want to log out?"}),e.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[e.jsx(a.Button,{color:"red",onClick:l,variant:"outlined",children:"Log Out"}),e.jsx(a.Button,{color:"blue-gray",onClick:r,variant:"outlined",children:"Cancel"})]})]})]}):null}function He(){const[t,r]=X(),{sidenavType:n}=t,{currentUser:o,loading:l}=F(),[s,d]=h.useState(null),[u,f]=h.useState(!1);if(h.useEffect(()=>{d(o?o.user_metadata:null)},[o]),l||!s)return e.jsx(ye,{});const x=()=>f(!u);return e.jsxs(V.div,{className:"min-h-screen flex flex-col bg-blue-gray-50/50",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx(he,{routes:Re,brandImg:n==="dark"?"/img/ATS.png":"/img/ATS_dark.png",onLogOutClick:x}),e.jsxs("div",{className:"flex-1 xl:ml-80 flex flex-col",children:[e.jsx(Pe,{user:s}),e.jsx(Oe,{}),e.jsx(a.IconButton,{size:"lg",color:"white",className:"fixed bottom-8 right-8 z-40 rounded-full shadow-blue-gray-900/10",ripple:!1,onClick:()=>Le(r,!0),children:e.jsx(Ba,{className:"h-5 w-5"})}),e.jsx("div",{className:"flex-grow p-4",children:e.jsx(de,{children:Re.map(({layout:S,pages:j},v)=>S==="dashboard"&&j.map(({path:g,element:c,menu:i,menuList:m},N)=>e.jsxs(B.Fragment,{children:[e.jsx(U,{exact:!0,path:g,element:c}),i&&m&&m.map((p,y)=>e.jsx(U,{exact:!0,path:p.path,element:p.element},`${N}-${y}`))]},N)))})}),e.jsx("div",{className:"mt-auto flex justify-center items-center",children:e.jsx("div",{className:"w-full max-w-screen-xl p-2",children:e.jsx(xe,{})})})]}),u&&e.jsx(jt,{onClose:()=>f(!1),isOpen:u})]})}He.displayName="/src/layout/dashboard.jsx";function ne(){return e.jsx(_.div,{className:"relative min-h-screen w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(de,{children:bt.map(({layout:t,pages:r})=>t==="auth"&&r.map(({path:n,element:o})=>e.jsx(U,{exact:!0,path:n,element:o})))})})}ne.displayName="/src/layout/Auth.jsx";function Ve(){const t=new Date().getFullYear(),r=h.useRef(),[n,o]=h.useState(null);h.useState(null);const l=d=>{d.preventDefault(),o(r.current.value)},s=async d=>{if(d.preventDefault(),!n){window.alert("Please enter a valid email address.");return}try{const u=await fetch("http://localhost:3000/api/v1/client/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n})});if(console.log(u),u.ok){window.alert("Subscription sent successfully!"),o("");return}else window.alert("Failed to send subscription request. Please try again.")}catch(u){console.error("Error:",u),window.alert("An error occured. Please try again.")}};return e.jsxs(_.div,{className:"min-h-screen bg-transparent",id:"home",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx(pe,{brandName:"ATS"}),e.jsx(fe,{}),e.jsx("section",{className:" flex items-center justify-center text-center pt-40 bg-gradient-to-b from-black via-black/90 to-black/80",id:"about",children:e.jsx("div",{className:"container px-4 sm:px-6 lg:px-8 xl:px-10",children:e.jsx("div",{className:"flex justify-center gap-x-4 lg:gap-x-5",children:e.jsxs("div",{className:"w-full lg:w-2/3 items-center justify-center",children:[e.jsx("h2",{className:"text-white mb-4 font-['Nunito'] text-3xl",children:"ATS - Attendance Tracking System"}),e.jsx("p",{className:"text-white/70 mb-20 font-['Nunito'] font-light",children:"ATS (Attendance Tracking System) is an innovative solution for efficient attendance management in schools and organizations. Designed for quick and accurate check-ins, ATS enables real-time data collection and enhances accountability. Streamline your attendance process and create a more productive environment with this advanced system."})]})})})}),e.jsxs("section",{id:"contact",children:[e.jsx("div",{className:"py-20 text-white text-center bg-cover bg-center bg-no-repeat bg-fixed",style:{backgroundImage:"url('/img/bg-signup.jpg')"},children:e.jsxs("div",{className:"container mx-auto px-4 lg:px-8",children:[e.jsx("i",{className:"far fa-paper-plane fa-2x mb-4"}),e.jsx("h2",{className:"text-3xl font-semibold mb-6 font-['Nunito']",children:"Subscribe to get registered!"}),e.jsx("form",{className:"w-full max-w-lg mx-auto",id:"contactForm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-center font-['Nunito']",children:[e.jsx("input",{className:"px-4 py-2 rounded-lg border border-gray-700 bg-gray-800 text-white w-full sm:w-2/3 font-thin focus:outline-none focus:ring-1 focus:ring-blue-gray-200 transition duration-300",id:"emailAddress",type:"email",placeholder:"Enter email address...","aria-label":"Enter email address...",ref:r,onChange:d=>l(d)}),e.jsx("button",{className:"mt-4 sm:mt-0 sm:ml-4 px-6 py-2 rounded-lg bg-blue-gray-800 text-white hover:bg-opacity-70 transition duration-300",id:"submitButton",type:"submit",onClick:d=>s(d),children:"Notify Me!"})]})})]})}),e.jsx("div",{className:"py-20 bg-black text-white font-['Nunito']",children:e.jsxs("div",{className:"container mx-auto px-4 lg:px-8",children:[e.jsxs("div",{className:"flex flex-wrap justify-center gap-6",children:[e.jsx("div",{className:"w-full sm:w-1/3 lg:w-1/4",children:e.jsxs("div",{className:"bg-gradient-to-b from-blue-gray-900 via-blue-gray-900/75 to-blue-gray-900/40 p-6 rounded-lg text-center",children:[e.jsx("i",{className:"fas fa-map-marked-alt text-primary mb-4"}),e.jsx("h4",{className:"text-xl font-light",children:"Address"}),e.jsx("hr",{className:"my-4 mx-auto w-16 border-t border-blue-500"}),e.jsx("p",{className:"text-sm font-thin",children:"Kigali, Rwanda"})]})}),e.jsx("div",{className:"w-full sm:w-1/3 lg:w-1/4",children:e.jsxs("div",{className:"bg-gradient-to-b from-blue-gray-900 via-blue-gray-900/75 to-blue-gray-900/40 p-6 rounded-lg text-center",children:[e.jsx("i",{className:"fas fa-envelope text-primary mb-4"}),e.jsx("h4",{className:"text-xl font-light",children:"Email"}),e.jsx("hr",{className:"my-4 mx-auto w-16 border-t border-blue-500"}),e.jsx("p",{className:"text-sm font-thin",children:e.jsx("a",{href:"mailto:limitify.ai@gmail.com",children:"limitify.ai@gmail.com"})})]})}),e.jsx("div",{className:"w-full sm:w-1/3 lg:w-1/4",children:e.jsxs("div",{className:"bg-gradient-to-b from-blue-gray-900 via-blue-gray-900/75 to-blue-gray-900/40 p-6 rounded-lg text-center",children:[e.jsx("i",{className:"fas fa-mobile-alt text-primary mb-4"}),e.jsx("h4",{className:"text-xl font-light",children:"Phone"}),e.jsx("hr",{className:"my-4 mx-auto w-16 border-t border-blue-500"}),e.jsx("p",{className:"text-sm font-thin",children:"+250 0793 109 171"})]})})]}),e.jsxs("div",{className:"flex justify-center mt-8",children:[e.jsx("a",{className:"text-white mx-3",href:"https://x.com/k4ldrick",children:e.jsx("i",{className:"fab fa-x-twitter"})}),e.jsx("a",{className:"text-white mx-3",href:"https://www.instagram.com/limitify/",children:e.jsx("i",{className:"fab fa-instagram"})})]})]})})]}),e.jsx("footer",{className:"bg-black py-4 text-center text-gray-50 font-['Nunito']",children:e.jsx("div",{className:"container mx-auto px-4 lg:px-5 font-normal",children:e.jsxs("p",{children:["ATS © ",t," Powered by Limitify"]})})})]})}Ve.displayName="/src/layout/Welcome.jsx";function Nt({element:t}){const{currentUser:r,isloading:n}=F(),o=le(),l=K();return h.useEffect(()=>{if(localStorage.setItem("lastVisitedRoute",o.pathname),n)return e.jsx(ye,{brandName:"ATS"});r||l("/auth/login")},[r,l,o]),t}const vt=new Ya;function wt(){const{currentUser:t}=F();return e.jsxs("div",{children:[e.jsx(Ua,{client:vt,children:e.jsxs(de,{children:[e.jsx(U,{path:"/",element:t&&t.session?e.jsx(ke,{to:"/dashboard/home"}):e.jsx(Ve,{})}),e.jsx(U,{exact:!0,path:"/dashboard/*",element:e.jsx(Nt,{element:e.jsx(He,{})})}),e.jsx(U,{path:"/auth/*",element:e.jsx(ne,{})}),e.jsx(U,{path:"*",element:t&&t.session?e.jsx(ke,{to:"/dashboard/home"}):e.jsx(ne,{})})]})}),e.jsx(_a,{position:"bottom-right",autoClose:"3000",theme:"colored",transition:Wa,pauseOnHover:!0})]})}Ha.createRoot(document.getElementById("root")).render(e.jsx(B.StrictMode,{children:e.jsx(Va,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(Za,{children:e.jsx(a.ThemeProvider,{children:e.jsx(ue,{children:e.jsx(wt,{})})})})})}));
