import{R as B,P as C,j as e,r as a,F as Fe,a as Ze,N as Se,b as Je,u as ie,c as h,d as U,e as Qe,f as ea,L as J,g as ne,h as aa,i as ta,C as sa,k as ra,m as V,B as y,l as I,n as $,o as M,p as Ee,q as na,s as la,t as $e,v as ia,w as oa,x as re,y as oe,z as ca,A as ce,D as da,E as H,G as ma,H as ua,I as ha,J as xa,$ as pa,K as ga,M as De,O as fa,Q as de,S as ya,T as Ie,U as ba,V as ja,W as Na,X as va,Y as wa,Z as Ta,_ as Ca,a0 as Sa,a1 as Aa,a2 as ka,a3 as Ra,a4 as Fa,a5 as Ea,a6 as $a,a7 as Da,a8 as Ia,a9 as Ma,aa as La,ab as Pa,ac as qa,ad as me,ae as Y,af as Ba,ag as Oa,ah as Ae,ai as za,aj as Ya,ak as _a,al as Wa}from"./vendor-CvURDcCG.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function l(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=l(n);fetch(n.href,s)}})();const ue=B.createContext(null);ue.displayName="MaterialTailwindContext";function Ha(t,r){switch(r.type){case"OPEN_SIDENAV":return{...t,openSidenav:r.value};case"SIDENAV_TYPE":return{...t,sidenavType:r.value};case"SIDENAV_COLOR":return{...t,sidenavColor:r.value};case"TRANSPARENT_NAVBAR":return{...t,transparentNavbar:r.value};case"FIXED_NAVBAR":return{...t,fixedNavbar:r.value};case"OPEN_CONFIGURATOR":return{...t,openConfigurator:r.value};default:throw new Error(`Unhandled action type: ${r.type}`)}}function he({children:t}){const r={openSidenav:!1,sidenavColor:"black",sidenavType:"white",transparentNavbar:!0,fixedNavbar:!1,openConfigurator:!1},[l,i]=B.useReducer(Ha,r),n=B.useMemo(()=>[l,i],[l,i]);return e.jsx(ue.Provider,{value:n,children:t})}function K(){const t=B.useContext(ue);if(!t)throw new Error("useMaterialTailwindController should be used inside the MaterialTailwindControllerProvider.");return t}he.displayName="/src/context/index.jsx";he.propTypes={children:C.node.isRequired};const Me=(t,r)=>t({type:"OPEN_SIDENAV",value:r}),ke=(t,r)=>t({type:"SIDENAV_TYPE",value:r}),Ua=(t,r)=>t({type:"SIDENAV_COLOR",value:r}),Le=(t,r)=>t({type:"OPEN_CONFIGURATOR",value:r});function xe({brandImg:t="/img/ATS.png",brandName:r="ATS",routes:l,onLogOutClick:i}){const[n,s]=K(),{sidenavColor:o,sidenavType:u,openSidenav:j}=n,[x,w]=B.useState({}),d=m=>{w(p=>({...p,[m]:!p[m]}))},c={dark:"bg-gradient-to-br from-gray-800 to-gray-900",white:"bg-white shadow-sm",transparent:"bg-transparent"};return e.jsxs("aside",{className:`${c[u]} ${j?"translate-x-0":"-translate-x-80"} fixed inset-0 z-50 my-4 ml-4 h-[calc(100vh-32px)] w-72 rounded-xl transition-transform duration-300 xl:translate-x-0 border border-blue-gray-100 
    sm:w-56 md:w-64 xl:w-72`,children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"py-6 px-8 text-center flex gap-3 cursor-default",children:[e.jsx("img",{src:t,alt:"Logo",width:"25px",height:"15px",className:"object-contain"}),e.jsx(a.Typography,{variant:"h4",color:u==="dark"?"white":"blue-gray",className:"font-['Aquire'] font-bold",children:r})]}),e.jsx(a.IconButton,{variant:"text",color:"white",size:"sm",ripple:!1,className:"absolute right-0 top-0 grid rounded-br-none rounded-tl-none xl:hidden",onClick:()=>Me(s,!1),children:e.jsx(Fe,{strokeWidth:2.5,className:u==="dark"?"h-5 w-5 text-white":"h-5 w-5 text-black"})})]}),e.jsxs("div",{className:"m-4",children:[l.map(({layout:m,title:p,pages:f},b)=>e.jsxs("ul",{className:"mb-4 flex flex-col gap-1",children:[p&&e.jsx("li",{className:"mx-3.5 mt-4 mb-2",children:e.jsx(a.Typography,{variant:"small",color:u==="dark"?"white":"blue-gray",className:"font-black uppercase opacity-75",children:p})}),f.map(({icon:A,name:g,path:v,menu:k,menuList:T})=>k?e.jsxs(a.Menu,{placement:"right-start",open:x[g]||!1,handler:()=>d(g),offset:15,children:[e.jsx(a.MenuHandler,{className:`flex items-center justify-between p-3 ${u==="dark"?"hover:bg-opacity-20":""} `,children:e.jsxs(a.MenuItem,{children:[e.jsxs("li",{className:`flex gap-4 ${u==="dark"?"text-white":"text-blue-gray-500"} font-normal font-['Nunito'] items-center`,children:[A,e.jsx(a.Typography,{color:"inherit",className:"font-normal font-['Nunito'] capitalize",children:g})]}),e.jsx(Ze,{strokeWidth:2.5,className:`h-3.5 w-3.5 transition-transform ${x[g]?"rotate-90":""} ${u==="dark"?"text-white":"text-blue-gray-500"}`})]})}),e.jsx(a.MenuList,{children:T.map(({name:F,path:Q})=>e.jsx(Se,{to:`/${m}${Q}`,className:"border-none",children:({isActive:z})=>e.jsx(a.Button,{variant:z?"gradient":"text",color:z?o:u==="dark"?"blue-gray":"white",className:`flex items-center gap-4 px-4 capitalize ${z?o:"text-blue-gray-500"}`,fullWidth:!0,children:e.jsx(a.Typography,{color:"inherit",className:"font-normal capitalize font-['Nunito']",children:F})})},F))})]},g):e.jsx("li",{children:e.jsx(Se,{to:`/${m}${v}`,children:({isActive:F})=>e.jsxs(a.Button,{variant:F?"gradient":"text",color:F?o:u==="dark"?"white":"blue-gray",className:"flex items-center gap-4 px-4 capitalize",fullWidth:!0,children:[A,e.jsx(a.Typography,{color:"inherit",className:"font-normal font-['Nunito'] capitalize",children:g})]})})},g))]},b)),e.jsxs(a.Button,{variant:"text",color:"red",onClick:i,className:"flex items-center gap-4 px-4 capitalize",fullWidth:!0,children:[e.jsx(Je,{className:"w-5 h-5 text-inherit"}),e.jsx(a.Typography,{color:"inherit",className:"font-normal capitalize font-['Nunito']",children:"Log Out"})]})]})]})}xe.propTypes={brandImg:C.string,brandName:C.string,routes:C.arrayOf(C.object).isRequired};xe.displayName="/src/widgets/layout/sidnave.jsx";function Pe({user:t}){const[r,l]=K(),{openSidenav:i}=r,{pathname:n}=ie(),[s,o]=n.split("/").filter(m=>m!==""),[u,j]=h.useState(null),x=h.useRef(),w=U(),d=m=>{m.preventDefault(),j(x.current.value)},c=()=>{w(`/dashboard/reports/students?search=${u}`)};return e.jsx(a.Navbar,{color:"transparent",className:"rounded-xl transition-all px-0 py-1",fullWidth:!0,children:e.jsxs("div",{className:"flex flex-col-reverse justify-between gap-6 md:flex-row md:items-center p-4",children:[e.jsxs("div",{className:"capitalize",children:[e.jsxs(a.Breadcrumbs,{className:"bg-transparent p-0 transition-all",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal opacity-50",children:s}),e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:o})]}),e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"uppercase",children:o})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"mr-auto md:mr-4 md:w-56 flex items-center border justify-between px-2 rounded-md border-blue-gray-100",children:[e.jsx("input",{id:"search",placeholder:"Search",name:"search",ref:x,onChange:m=>d(m),className:"p-1 bg-transparent outline-none text-blue-gray-800 font-['Roboto'] font-thin text-sm flex-1"}),e.jsx(Qe,{className:"w-4 h-4 text-blue-gray-200 cursor-pointer",strokeWidth:1,onClick:()=>c()})]}),e.jsx(a.IconButton,{variant:"text",color:"blue-gray",className:"grid xl:hidden",onClick:()=>Me(l,!i),children:e.jsx(ea,{strokeWidth:2,className:"h-6 w-6 text-blue-gray-500"})}),e.jsxs(J,{to:"/dashboard/profile",children:[e.jsxs(a.Button,{variant:"text",color:"blue-gray",className:"hidden items-center gap-1 px-4 xl:flex normal-case font-['Nunito'] font-normal",children:[e.jsx(a.Avatar,{src:t&&t.profile||"/img/no-profile.jpg",alt:"item-1",size:"xs",variant:"circular"}),t==null?void 0:t.displayName]}),e.jsx(a.IconButton,{variant:"text",color:"blue-gray",className:"grid xl:hidden",children:e.jsx(a.Avatar,{src:t&&t.profile||"/img/no-profile.jpg",alt:"item-1",size:"xs",variant:"circular",className:"w-5 h-5"})})]})]})]})})}Pe.displayName="/src/widgets/layout/dashboard-navbar.jsx";function qe(){const[t,r]=K(),{openConfigurator:l,sidenavColor:i,sidenavType:n}=t,s={black:"from-black to-black border-gray-200",teal:"from-teal-400 to-teal-600",blue:"from-blue-400 to-blue-600",orange:"from-orange-400 to-orange-600"};return e.jsxs("aside",{className:`fixed top-0 right-0 z-50 h-screen w-96 bg-white px-2.5 pb-2 shadow-lg transition-transform duration-300 ${l?"translate-x-0":"translate-x-96"}`,children:[e.jsxs("div",{className:"flex items-start justify-between px-6 pt-8 pb-6",children:[e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h5",color:"blue-gray",children:"Appearance"}),e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"See our dashboard options."})]}),e.jsx(a.IconButton,{variant:"text",color:"blue-gray",onClick:()=>Le(r,!1),children:e.jsx(Fe,{strokeWidth:2.5,className:"h-5 w-5"})})]}),e.jsxs("div",{className:"py-4 px-6",children:[e.jsxs("div",{className:"mb-12",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",children:"Sidenav Colors"}),e.jsx("div",{className:"mt-3 flex items-center gap-2",children:Object.keys(s).map(o=>e.jsx("span",{className:`h-6 w-6 cursor-pointer rounded-full border bg-gradient-to-br transition-transform hover:scale-105 ${s[o]} ${i===o?"border-black":"border-transparent"}`,onClick:()=>Ua(r,o)},o))})]}),e.jsxs("div",{className:"mb-12",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",children:"Sidenav Types"}),e.jsx(a.Typography,{variant:"small",color:"gray",children:"Choose between 2 different sidenav types."}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx(a.Button,{variant:n==="dark"?"gradient":"outlined",onClick:()=>ke(r,"dark"),children:"Dark"}),e.jsx(a.Button,{variant:n==="white"?"gradient":"outlined",onClick:()=>ke(r,"white"),children:"White"})]})]})]})]})}qe.displayName="/src/widgets/layout/configurator.jsx";function pe({brandName:t="Limitify"}){const r=new Date().getFullYear();return e.jsx("footer",{className:"py-2 bottom-0",children:e.jsx("div",{className:"flex w-full items-center justify-center px-2 font-['Nunito']",children:e.jsxs(a.Typography,{variant:"small",className:"font-normal text-inherit",children:["ATS © ",r," Powered by Limitify"]})})})}pe.propTypes={brandName:C.string,routes:C.arrayOf(C.object)};pe.displayName="/src/widgets/layout/footer.jsx";C.string,C.arrayOf(C.object).isRequired,C.node;function ge({brandName:t="ATS",routes:r=[{name:"About",path:"#about",id:"about"},{name:"Contact",path:"#contact",id:"contact"}]}){var m;const[l,i]=K(),{fixedNavbar:n,openSidenav:s}=l,{pathname:o}=ie(),u=U(),[j,x]=h.useState(!1),[w,d]=h.useState(""),c=((m=document.querySelector("nav"))==null?void 0:m.offsetHeight)||0;return h.useEffect(()=>{const p=()=>{window.scrollY-c>50?x(!0):x(!1)};return window.addEventListener("scroll",p),()=>window.removeEventListener("scroll",p)},[c]),h.useEffect(()=>{const p=new IntersectionObserver(b=>{b.forEach(A=>{A.isIntersecting&&A.target.id!=="home"&&(d(A.target.id),u(`#${A.target.id}`,{replace:!0}))})},{threshold:1}),f=document.querySelectorAll("section");return f.forEach(b=>p.observe(b)),()=>{f.forEach(b=>p.unobserve(b))}},[u]),h.useEffect(()=>{(o==="/"||o==="")&&(d("home"),u("/",{replace:!0}))},[o,u]),e.jsx(a.Navbar,{color:j?"white":"transparent",className:`transition-all fixed top-0 z-40 px-8 py-2 ${j?"bg-black bg-opacity-90":""}`,fullWidth:!0,blurred:n,children:e.jsxs("div",{className:"flex justify-between gap-6 md:flex-row md:items-center",children:[e.jsx("div",{className:"capitalize",children:e.jsx(a.Typography,{as:"a",href:"#home",variant:"h4",className:"font-['Aquire'] bg-gradient-to-r from-white/40 via-white/60 to-white/80 bg-clip-text",style:{WebkitTextFillColor:"transparent"},children:t})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("ul",{className:"flex items-center gap-4",children:r.map(({name:p,path:f,id:b})=>e.jsx("li",{children:e.jsx(a.Typography,{as:"a",href:f,variant:"h6",className:`py-0.5 px-1 text-inherit transition-colors hover:text-blue-gray-500 font-['Nunito'] font-light ${w===b?"text-blue-gray-500":""}`,children:p})},p))}),e.jsxs(J,{to:"/auth/login",children:[e.jsxs(a.Button,{variant:"text",color:"blue-gray",className:"hidden items-center gap-1 px-4 xl:flex normal-case font-['Nunito'] font-normal",children:[e.jsx(ne,{className:"h-5 w-5 text-blue-gray-500"}),"Log In"]}),e.jsx(a.IconButton,{variant:"text",color:"blue-gray",className:"grid xl:hidden",children:e.jsx(ne,{className:"h-5 w-5 text-blue-gray-500"})})]})]})]})})}ge.propTypes={brandName:C.string,brandLink:C.string,routes:C.arrayOf(C.object)};ge.displayName="/src/widgets/layout/welcome-navbar.jsx";function fe({brandName:t="ATS",brandDesc:r="Attendance Tracking System"}){return K(),e.jsxs("section",{className:"relative w-full min-h-screen py-[15rem] bg-cover bg-center bg-no-repeat bg-scroll ",style:{backgroundImage:"url('/img/bg-masthead.jpg')"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-50"}),e.jsx("div",{className:"relative z-10 flex h-full items-center justify-center",id:"home",children:e.jsxs("div",{className:"text-center text-white mt-10",children:[e.jsx("h1",{className:"mx-auto my-0 text-5xl bg-clip-text font-bold font-['Aquire']",style:{backgroundImage:"linear-gradient(to bottom, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 1))",WebkitTextFillColor:"transparent"},children:"ATS"}),e.jsx("h2",{className:"mt-4 text-xl opacity-75 mb-5 font-['Nunito']",children:"Attendance Tracking System"}),e.jsx("a",{href:"#about",className:"font-['Varela_Round'] mt-6 inline-block py-2 px-6 text-white bg-blue-gray-800 rounded-md hover:bg-opacity-70 transition duration-300",children:"Get Started"})]})})]})}fe.propTypes={brandName:C.string,brandDesc:C.string};fe.displayName="/src/widgets/layout/masthead.jsx";const ae={chart:{toolbar:{show:!1}},title:{show:""},dataLabels:{enabled:!1},xaxis:{axisTicks:{show:!1},axisBorder:{show:!1},labels:{style:{colors:"#37474f",fontSize:"13px",fontFamily:"inherit",fontWeight:300}}},yaxis:{labels:{style:{colors:"#37474f",fontSize:"13px",fontFamily:"inherit",fontWeight:300}}},grid:{show:!0,borderColor:"#dddddd",strokeDashArray:5,xaxis:{lines:{show:!0}},padding:{top:5,right:20}},fill:{opacity:.8},tooltip:{theme:"dark"}};function Va({n:t}){const{number:r}=aa({from:{number:0},number:t,delay:200,config:{mass:1,tension:30,friction:10}});return e.jsx(ta.div,{children:r.to(l=>l.toFixed(0))})}function q({color:t="blue",icon:r,title:l,value:i,footer:n=null}){return e.jsxs(a.Card,{className:"border border-blue-gray-100 shadow-sm",children:[e.jsx(a.CardHeader,{variant:"gradient",color:t,floated:!1,shadow:!1,className:"absolute grid h-12 w-12 place-items-center",children:r}),e.jsxs(a.CardBody,{className:"p-4 text-right",children:[e.jsx(a.Typography,{variant:"small",className:"font-normal text-blue-gray-600",children:l}),e.jsx(a.Typography,{variant:"h4",color:"blue-gray",children:e.jsx(Va,{n:i})})]}),n&&e.jsx(a.CardFooter,{className:"border-t border-blue-gray-50 p-4",children:n})]})}q.propTypes={color:C.oneOf(["white","blue-gray","gray","brown","deep-orange","orange","amber","yellow","lime","light-green","green","teal","cyan","light-blue","blue","indigo","deep-purple","purple","pink","red"]),icon:C.node.isRequired,title:C.node.isRequired,value:C.node.isRequired,footer:C.node};q.displayName="/src/widgets/cards/statistics-card.jsx";function ye({title:t,action:r=null,description:l=null,details:i={}}){return e.jsxs(a.Card,{color:"transparent",shadow:!1,children:[e.jsxs(a.CardHeader,{color:"transparent",shadow:!1,floated:!1,className:"mx-0 mt-0 mb-4 flex items-center justify-between gap-4",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",children:t}),r]}),e.jsxs(a.CardBody,{className:"p-0",children:[l&&e.jsx(a.Typography,{variant:"small",className:"font-normal text-blue-gray-500",children:l}),l&&i?e.jsx("hr",{className:"my-8 border-blue-gray-50"}):null,i&&e.jsx("ul",{className:"flex flex-col gap-4 p-0",children:Object.keys(i).map((n,s)=>e.jsxs("li",{className:"flex items-center gap-4",children:[e.jsxs(a.Typography,{variant:"small",color:"blue-gray",className:"font-semibold capitalize",children:[n,":"]}),typeof i[n]=="string"?e.jsx(a.Typography,{variant:"small",className:"font-normal text-blue-gray-500",children:i[n]}):i[n]]},s))})]})]})}ye.propTypes={title:C.string.isRequired,description:C.node,details:C.object};ye.displayName="/src/widgets/cards/profile-info-card.jsx";C.string.isRequired,C.string.isRequired,C.node.isRequired,C.node;function te({color:t="blue",chart:r,title:l,description:i,footer:n=null}){return e.jsxs(a.Card,{className:"border border-blue-gray-100 shadow-sm",children:[e.jsx(a.CardHeader,{variant:"gradient",color:t,floated:!1,shadow:!1,children:e.jsx(sa,{...r})}),e.jsxs(a.CardBody,{className:"px-6 pt-0",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",children:l}),e.jsx(a.Typography,{variant:"small",className:"font-normal text-blue-gray-600",children:i})]}),n&&e.jsx(a.CardFooter,{className:"border-t border-blue-gray-50 px-6 py-5",children:n})]})}te.propTypes={color:C.oneOf(["white","blue-gray","gray","brown","deep-orange","orange","amber","yellow","lime","light-green","green","teal","cyan","light-blue","blue","indigo","deep-purple","purple","pink","red"]),chart:C.object.isRequired,title:C.node.isRequired,description:C.node.isRequired,footer:C.node};te.displayName="/src/widgets/charts/statistics-chart.jsx";const Ka=void 0,Ga=void 0,L=ra(Ka,Ga,{persistSession:!0,localStorage:sessionStorage});function be({brandName:t="ATS"}){return e.jsxs(V.div,{className:"flex flex-col items-center justify-center min-h-screen bg-blue-gray-50/50 gap-y-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx(a.Typography,{variant:"h1",className:"font-['Aquire'] bg-gradient-to-r from-black/40 via-black/60 to-black/80 bg-clip-text",style:{WebkitTextFillColor:"transparent"},children:t}),e.jsx(a.Spinner,{color:"gray",className:"h-12 w-12 mb-4"})]})}const Be=B.createContext();function E(){return h.useContext(Be)}function Xa({children:t}){const[r,l]=h.useState(null),[i,n]=h.useState(!0),s=U();h.useEffect(()=>{(async()=>{try{const{data:{user:m},error:p}=await L.auth.getUser();if(m){l(m);const f=localStorage.getItem("lastVisitedRoute");s(f||"/dashboard/home")}else l(null);p&&l(null)}catch(m){console.error("Error checking session:",m),l(null)}finally{n(!1)}})();const{data:c}=L.auth.onAuthStateChange((m,p)=>{if(m==="SIGNED_IN"){l(p.user);const f=localStorage.getItem("lastVisitedRoute");s(f||"/dashboard/home"),n(!1)}else m==="SIGNED_OUT"&&(l(null),s("/auth/login"))});return()=>{c&&c.subscription.unsubscribe()}},[s]);async function o(d,c,m,p){try{n(!0);const{data:f,error:b}=await L.auth.signUp({email:c,password:p,options:{data:{displayName:d,phone:m}}});if(b)throw y(b.message,{type:"error"}),b;if(!f)throw new Error("User sign-up failed. No user data returned.");try{const A=await I.post("http://localhost:3000/api/v1/client/create",{},{headers:{"x-tenant-id":f.user.id}});console.log("Client created successfully:",A.data)}catch(A){console.error("Failed to create client:",A),y("Failed to create client. Please try again later.",{type:"error"})}y("Account created successfully! Please check your email for verification.",{type:"success"}),s("/auth/verify-email")}catch(f){console.log("Error during signup:",f)}finally{n(!1)}}async function u(d,c){try{n(!0);const{data:m,error:p}=await L.auth.signInWithPassword({email:d,password:c});if(p)throw y("Login failed: "+p.message,{type:"error"}),p;const{data:f,error:b}=await L.auth.getUser();if(f)l(f),s("/dashboard/home");else throw console.error("No session after login"),new Error("No user session found.");if(b)throw console.error("Error getting session:",b),b}catch(m){console.log("Error during login:",m)}finally{n(!1)}}async function j(d,c,m){try{let p=null;if(m){const A=m.name.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_.-]/g,""),g=`user-${Date.now()}-${A}`;try{const{data:v,error:k}=await L.storage.from("profile_images").upload(g,m,{cacheControl:"3600",upsert:!1});if(k)throw console.error("Error uploading profile image:",k.message),new Error("Failed to upload profile image.");const{data:T}=L.storage.from("profile_images").getPublicUrl(g);p=T.publicUrl}catch(v){throw console.error("Error uploading profile image:",v),new Error("Failed to upload profile image.")}}const{data:f,error:b}=await L.auth.updateUser({email:c,data:{displayName:d,profile:p||null}});if(b)throw console.error("Error updating user information:",b),y(b.message,{type:"error"}),b;y("Account updated successfully!",{type:"success"}),s("/dashboard/home")}catch(p){console.error("Error during update:",p),y("Failed to update account. Please try again.",{type:"error"})}}async function x(){try{await L.auth.signOut(),l(null),s("/auth/login")}catch{y("Error during logout",{type:"error"})}}const w={currentUser:r,loading:i,signup:o,logIn:u,logOut:x,updateInfo:j};return e.jsx(Be.Provider,{value:w,children:i?e.jsx(be,{}):t})}const se="https://ats-phyn.onrender.com/api/v1",D=async(t,r)=>{try{const l=await I.get(`${se}/${t}`,{headers:{"x-tenant-id":r}});return t.includes("list")||t==="/attendance/class-details"?l.data.data:l.data}catch(l){throw l}},Oe=async(t,r,l)=>{if(l){const i=new FormData;i.append("csv",l);try{const n=await I.post(`${se}/${t}`,i,{headers:{"Content-Type":"multipart/form-data","x-tenant-id":r}});return y("File Uploaded",{type:"success"}),n.data}catch(n){y(n.response.data.error,{type:"error"})}}else console.error("No file uploaded")},ze=async t=>{try{const r=await I.post(`${se}/rfid/assign`,{},{headers:{"x-tenant-id":t}});r.status===201?y(r.data.msg,{type:"success"}):r.status===202?y(r.data.msg,{type:"info"}):y(r.data.msg,{type:"warning"})}catch(r){y(r.response.data.message,{type:"error"})}},Za=async(t,r)=>{var l,i;try{const n=await I.post(`${se}/attendance/manual`,{data:t},{headers:{"x-tenant-id":r},validateStatus:s=>s>=200&&s<500});n.status===201?y(n.data.msg,{type:"success"}):n.status===400?y(n.data.msg,{type:"warning"}):y(n.data.msg,{type:"info"})}catch(n){y(((i=(l=n.response)==null?void 0:l.data)==null?void 0:i.message)||"An error occurred",{type:"error"})}},Ye=()=>{const{currentUser:t,loading:r}=E(),l=t==null?void 0:t.id,{data:i,error:n}=$({queryKey:["rfidCards"],queryFn:()=>D("rfid/list",l),staleTime:3e4,enabled:!!l}),{data:s,error:o}=$({queryKey:["activeCards"],queryFn:()=>D("rfid/count-active",l),staleTime:3e4,enabled:!!l}),{data:u,error:j}=$({queryKey:["unassignedCards"],queryFn:()=>D("rfid/count-inactive",l),staleTime:3e4,enabled:!!l});return{rfidCards:i,activeCards:(s==null?void 0:s.data)||0,unassignedCards:(u==null?void 0:u.data)||0,loading:r}},_e=t=>{const{currentUser:r}=E();if(!(r!=null&&r.id))throw new Error("User ID is missing from the authentication context.");const l=r.id,{data:i,error:n}=$({queryKey:["students",t],queryFn:()=>D("student/list",l),staleTime:3e4,enabled:!!l}),{data:s,error:o}=$({queryKey:["student"],queryFn:()=>D(`student/search/${t}`,l),enabled:!!l&&!!t,staleTime:5e3}),{data:u,error:j}=$({queryKey:["activeStudents"],queryFn:()=>D("student/active-students",l),staleTime:3e4,enabled:!!l}),{data:x,error:w}=$({queryKey:["unassignedStudents"],queryFn:()=>D("student/unassigned-students",l),staleTime:3e4,enabled:!!l});return{students:i,student:s?s.data:null,activeStudents:(u==null?void 0:u.activeStudents.length)||0,unassignedStudents:(x==null?void 0:x.unassignedStudents.length)||0}},We=t=>{const{currentUser:r,loading:l}=E(),i=M(t).format("YYYY-MM-DD"),n=r==null?void 0:r.id,{data:s,error:o}=$({queryKey:["classAttendance",i],queryFn:()=>D(`attendance/class-details?date=${i}`,n),staleTime:3e4}),{data:u,error:j}=$({queryKey:["presence"],queryFn:()=>D("attendance/count-present",n),staleTime:3e4}),{data:x,error:w}=$({queryKey:["late"],queryFn:()=>D("attendance/count-late",n),staleTime:3e4}),{data:d,error:c}=$({queryKey:["absent"],queryFn:()=>D("attendance/count-absent",n),staleTime:3e4});return{classAttendance:s?s.data:[],presence:u?u.data:0,late:x?x.data:0,absent:d?d.data:0,loading:l}},He=()=>{const{currentUser:t,loading:r}=E(),l=t==null?void 0:t.id,{data:i,error:n}=$({queryKey:["classes"],queryFn:()=>D("student/list-classes",l),staleTime:3e4}),{data:s,error:o}=$({queryKey:["attendanceLog"],queryFn:()=>D("attendance/class-present",l),staleTime:3e4});return{classes:i||[],attendanceLog:s?s==null?void 0:s.presence:null,loading:r}},Ja=()=>{const{currentUser:t}=E(),r=t==null?void 0:t.id;r||console.warn("Waiting for User ID");const{data:l,error:i,isLoading:n}=$({queryKey:["nextLog",r],queryFn:()=>D("cron-schedule",r),staleTime:5e3});return{nextLog:h.useMemo(()=>!(l!=null&&l.initializeAttendance)||!(l!=null&&l.setAbsent)?null:l,[l]),isLoading:n,isError:!!i}},Qa=(t,r)=>{const{currentUser:l,loading:i}=E(),n=l==null?void 0:l.id,{data:s,error:o,isLoading:u}=$({queryKey:["report",t,r,n],queryFn:()=>n?D(`attendance/report?month=${t}&year=${r}`,n):Promise.reject("Tenant ID is required"),staleTime:5e3,enabled:!!n&&!!r&&!!t});return o&&console.error("Error fetching report",o),{report:s?s.data:null,isLoading:i||u,error:o}},et=t=>{var d,c,m,p;const{currentUser:r,loading:l}=E(),i=r==null?void 0:r.id,n=M(new Date).year(),{data:s,error:o}=$({queryKey:["report"],queryFn:()=>D(`attendance/report?month=${t}&year=${n}`,i),staleTime:3e4,enabled:!!i&&!!t}),{data:u,error:j}=$({queryKey:["week"],queryFn:()=>D("attendance/weekly-summary",i),staleTime:3e4,enabled:!!i}),x=Array.isArray((d=s==null?void 0:s.data)==null?void 0:d.metadata)&&((c=s==null?void 0:s.data)==null?void 0:c.metadata.slice().sort((f,b)=>f.class<b.class?-1:f.class>b.class?1:0).map(f=>f.class))||[],w=Array.isArray((m=s==null?void 0:s.data)==null?void 0:m.metadata)&&((p=s==null?void 0:s.data)==null?void 0:p.metadata.slice().sort((f,b)=>f.class<b.class?-1:f.class>b.class?1:0).map(f=>f.attendances))||[];return{classNames:x,attendances:w,week:u?u.weeklyAttendance:{},loading:l}},at=(t,r)=>{try{const l=t==null?void 0:t.replace(" ","T"),i=r==null?void 0:r.replace(" ","T"),n=new Date(l),s=new Date(i);if(isNaN(n.getTime())||isNaN(s.getTime()))return"Invalid date range";const o=n.toLocaleDateString("en-US",{month:"short",day:"2-digit"}),u=n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),j=s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1});return`${o} ${u}-${j}`}catch(l){return console.error("Error formatting date range:",l),"Invalid date range"}},tt=()=>{const{nextLog:t}=Ja(),[r,l]=h.useState([]);return h.useEffect(()=>{if(!t||typeof t!="object"){l([]);return}const i=[{icon:Ee,color:"text-red-500",title:"Unauthorized RFID Card Detected",description:"22 DEC 7:20 AM",isActive:!1},{icon:na,color:"text-green-500",title:"RFID Cards assigned to students",description:"21 DEC 11 PM",isActive:!1},{icon:la,color:"text-blue-gray-300",title:"Students Logging Schedule",description:t.initializeAttendance&&t.setAbsent?at(t.initializeAttendance,t.setAbsent):"N/A",isActive:!!t.initializeAttendance&&!!t.setAbsent},{icon:$e,color:"text-blue-500",title:"New card added for student with ID STD-409",description:"20 DEC 2:20 AM",isActive:!1},{icon:ia,color:"text-orange-300",title:"System Maintenance",description:"17 DEC",isActive:!1}];l(i)},[t]),e.jsx(a.CardBody,{className:"pt-0 max-h-96 overflow-y-scroll",children:r.filter(i=>i.isActive).map(({icon:i,color:n,title:s,description:o},u)=>e.jsxs("div",{className:"flex items-start gap-4 py-3",children:[e.jsx("div",{className:`relative p-1 after:absolute after:-bottom-6 after:left-2/4 after:w-0.5 after:-translate-x-2/4 after:bg-blue-gray-50 after:content-[''] ${u===r.length-1?"after:h-0":"after:h-4/6"}`,children:B.createElement(i,{className:`!w-5 !h-5 ${n}`})}),e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"small",className:`block font-medium ${n}`,children:s}),e.jsx(a.Typography,{as:"span",variant:"small",className:"text-xs font-medium text-blue-gray-500",children:o})]})]},o))})};function st(){const{presence:t,late:r,absent:l}=We(),{activeCards:i}=Ye(),{classes:n,attendanceLog:s}=He(),o=new Date,u=o.getMonth(),x=new Date(o.setMonth(u-1)).toLocaleString("en-US",{month:"long"}),{classNames:w,attendances:d,week:c}=et(x),m=["Monday","Tuesday","Wednesday","Thursday","Friday"],p=m.map(T=>{var F;return((F=c[T])==null?void 0:F.present)||0}),f=m.map(T=>{var F;return((F=c[T])==null?void 0:F.late)||0}),b=m.map(T=>{var F;return((F=c[T])==null?void 0:F.absent)||0}),g={color:"white",title:"Attendance Trends",description:"Last Week Performance",footer:"just updated",chart:{type:"bar",height:220,series:[{name:"Present",data:p},{name:"Late",data:f},{name:"Absent",data:b}],options:{...ae,colors:["#689f38","#f9a825","#d84315"],plotOptions:{bar:{columnWidth:"20%",borderRadius:5}},xaxis:{...ae.xaxis,categories:["Mon","Tue","Wed","Thu","Fri"]}}}},k={color:"white",title:"Attendance By Grade",description:"Last Month Perfomance",footer:"just updated",chart:{type:"bar",height:220,series:[{name:"Logs",data:d}],options:{...ae,colors:["#0288d1","#558b2f","#009688","#283593","#fbc02d","#ef6c00"],plotOptions:{bar:{columnWidth:"10%",borderRadius:2,distributed:!0}},xaxis:{...ae.xaxis,categories:w}}}};return e.jsxs("div",{className:"mt-12",children:[e.jsxs("div",{className:"mb-12 grid gap-y-10 gap-x-6 md:grid-cols-2 xl:grid-cols-4",children:[e.jsx(q,{color:"green",title:"Present Students",value:t||0,icon:e.jsx(oa,{className:"w-6 h-6 text-white"}),footer:e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"})},1),e.jsx(q,{color:"red",title:"Absent Students",value:l||0,icon:e.jsx(Ee,{className:"w-6 h-6 text-white"}),footer:e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"})},2),e.jsx(q,{color:"amber",title:"Late Arrivals",value:r||0,icon:e.jsx(re,{className:"w-6 h-6 text-white"}),footer:e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"})},3),e.jsx(q,{color:"teal",title:"Active Cards",value:i||0,icon:e.jsx(oe,{className:"w-6 h-6 text-white"}),footer:e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"})},4)]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-y-12 gap-x-6 md:grid-cols-1 xl:grid-cols-2",children:[e.jsx(te,{...g,footer:e.jsxs(a.Typography,{variant:"small",className:"flex items-center font-normal text-blue-gray-600",children:[e.jsx(re,{strokeWidth:2,className:"h-4 w-4 text-blue-gray-400"})," ",g.footer]})},g.title),e.jsx(te,{...k,footer:e.jsxs(a.Typography,{variant:"small",className:"flex items-center font-normal text-blue-gray-600",children:[e.jsx(re,{strokeWidth:2,className:"h-4 w-4 text-blue-gray-400"})," ",k.footer]})},k.title)]}),e.jsxs("div",{className:"mb-4 grid grid-cols-1 gap-6 xl:grid-cols-3",children:[e.jsxs(a.Card,{className:"overflow-hidden xl:col-span-2 border border-blue-gray-100 shadow-sm",children:[e.jsxs(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-1",children:"Classrooms"}),e.jsxs(a.Typography,{variant:"small",className:"flex items-center gap-1 font-normal text-blue-gray-600",children:[e.jsx(ca,{strokeWidth:3,className:"h-4 w-4 text-blue-gray-200"}),e.jsx("strong",{children:n.length})," registered rooms"]})]}),e.jsxs(a.Menu,{placement:"left-start",children:[e.jsx(a.MenuHandler,{children:e.jsx(a.IconButton,{size:"sm",variant:"text",color:"blue-gray",children:e.jsx(ce,{strokeWidth:3,fill:"currentColor",className:"h-5 w-5"})})}),e.jsx(a.MenuList,{children:e.jsx(a.MenuItem,{children:e.jsx(J,{to:"/dashboard/attendance/students",children:"View Details"})})})]})]}),e.jsx(a.CardBody,{className:"overflow-x-scroll px-0 pt-0 pb-2 max-h-96",children:e.jsxs("table",{className:"w-full min-w-[640px] table-auto",children:[e.jsx("thead",{children:e.jsx("tr",{children:["Class Name","Total Students","Attendance"].map(T=>e.jsx("th",{className:"border-b border-blue-gray-50 py-3 px-6 text-left stiky",children:e.jsx(a.Typography,{variant:"small",className:"text-[11px] font-medium uppercase text-blue-gray-400",children:T})},T))})}),e.jsx("tbody",{children:s&&Array.isArray(n)&&n.map(({grade:T,studentsCount:F,completion:Q},z)=>{const G=`py-3 px-5 ${z===n.length-1?"":"border-b border-blue-gray-50"}`;return e.jsxs("tr",{children:[e.jsx("td",{className:G,children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-bold",children:T})})}),e.jsx("td",{className:G,children:e.jsx(a.Typography,{variant:"small",className:"text-xs font-medium text-blue-gray-600",children:F})}),e.jsx("td",{className:G,children:e.jsxs("div",{className:"w-10/12",children:[e.jsxs(a.Typography,{variant:"small",className:"mb-1 block text-xs font-medium text-blue-gray-600",children:[(s[T]/F*100).toFixed(),"%"]}),e.jsx(a.Progress,{value:s[T]&&F?Math.round(s[T]/F*100):0,variant:"gradient",color:s[T]&&F?Math.round(s[T]/F*100)===100?"green":Math.round(s[T]/F*100)<=100&&Math.round(s[T]/F*100)>=50?"blue":"red":"blue",className:"h-1"})]})})]},T)})})]})})]}),e.jsxs(a.Card,{className:"border border-blue-gray-100 shadow-sm",children:[e.jsxs(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 p-6",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-2",children:"Real-Time Logs"}),e.jsxs(a.Typography,{variant:"small",className:"flex items-center gap-1 font-normal text-blue-gray-600",children:[e.jsx(da,{strokeWidth:3,className:"h-3.5 w-3.5 text-green-500"}),"current updates"]})]}),e.jsx(tt,{})]})]})]})}function rt({isOpen:t,onClose:r}){const{currentUser:l,updateInfo:i}=E(),[n,s]=h.useState(l.user_metadata.displayName),[o,u]=h.useState(l.email),[j,x]=h.useState(""),[w,d]=h.useState(!1),[c,m]=h.useState(null),[p,f]=h.useState(""),b=v=>{const k=v.target.files[0];k&&(m(k),f(URL.createObjectURL(k)))},A=()=>{document.getElementById("profile-image-input").click()};async function g(v){v.preventDefault();try{await i(n,o,c||null),x(null)}catch(k){x(k.message)}}return h.useEffect(()=>(t?(document.body.style.overflow="hidden",j!==""&&y(j,{type:"error"})):document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t,j]),t?e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm"}),e.jsxs(H.div,{className:"relative z-10 bg-white rounded-lg shadow-lg p-8 w-full lg:w-2/5 mx-2 flex items-center flex-col justify-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:[e.jsx(a.Typography,{variant:"h1",className:"font-['Aquire'] bg-gradient-to-r from-black/40 via-black/60 to-black/80 bg-clip-text",style:{WebkitTextFillColor:"transparent"},children:"ATS"}),e.jsx(a.Typography,{variant:"h6",color:"gray",className:"mb-1 font-normal font-['Nunito']",children:"Edit profile info"}),e.jsxs("form",{className:"mt-8 mb-2 mx-auto w-80 max-w-screen-lg lg:w-1/2",children:[e.jsxs("div",{className:"flex flex-col gap-2 m-auto",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Edit Profile"}),e.jsx("div",{className:"flex items-center justify-center",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx(a.Avatar,{src:p||l&&l.user_metadata.profile||"/img/no-profile.jpg",alt:n||l.email,size:"xl",variant:"rounded",className:"rounded-md shadow-lg shadow-blue-gray-500/40 bg-fixed bg-cover bg-no-repeat"}),w&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(a.Tooltip,{content:"Upload Image",children:e.jsx(a.IconButton,{onClick:A,className:"bg-white shadow-lg shadow-blue-gray-500/40 z-50",children:e.jsx(ma,{className:"h-5 w-5 text-blue-gray-500"})})})}),e.jsx("input",{type:"file",id:"profile-image-input",accept:"image/*",className:"hidden w-0 h-0 absolute",onChange:b})]})})]}),e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Organization Name"}),e.jsx(a.Input,{size:"lg",placeholder:"Name",value:n,onChange:v=>s(v.currentTarget.value),className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}})]}),e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Your email"}),e.jsx(a.Input,{size:"lg",placeholder:"name@mail.com",type:"email",value:o,onChange:v=>u(v.currentTarget.value),className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}})]}),e.jsxs("div",{className:"flex gap-4 mt-6 items-center",children:[e.jsx(a.Button,{color:"blue-gray",onClick:r,variant:"outlined",children:"Cancel"}),e.jsx(a.Button,{color:"blue",onClick:v=>g(v),variant:"outlined",children:"Save"})]})]})]})]}):null}function nt(){const{currentUser:t}=E(),r=t==null?void 0:t.user_metadata,[l,i]=h.useState("info"),[n,s]=h.useState(!1),[o,u]=h.useState(""),[j,x]=h.useState(""),w=async()=>{if(!o||!j){y.error("Start Time and End Time are required!");return}try{(await I.post("/api/v1/initialize-cron",{startTime:o,endTime:j},{headers:{"x-tenant-id":t==null?void 0:t.id}})).status===200?y.success("Schedule initialized successfully!"):y.error("Failed to initialize schedule")}catch(c){console.error("Error initializing schedule:",c),y.error("An error occurred. Please try again.")}},d=()=>s(!n);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"relative mt-8 h-72 w-full overflow-hidden rounded-xl bg-[url('/img/bg-signup.jpg')] bg-cover	bg-center",children:e.jsx("div",{className:"absolute inset-0 h-full w-full bg-gray-900/75"})}),e.jsx(a.Card,{className:"mx-3 -mt-16 mb-6 lg:mx-4 border border-blue-gray-100",children:e.jsxs(a.CardBody,{className:"p-4",children:[e.jsxs("div",{className:"mb-10 flex items-center justify-between flex-wrap gap-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(a.Avatar,{src:r&&r.profile||"/img/no-profile.jpg",alt:(r==null?void 0:r.displayName)||t.email,size:"xl",variant:"rounded",className:"rounded-lg shadow-lg shadow-blue-gray-500/40"}),e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h5",color:"blue-gray",className:"mb-1",children:(r==null?void 0:r.displayName)||t.email}),e.jsx(a.Typography,{variant:"small",className:"font-normal text-blue-gray-600",children:"Owner"})]})]}),e.jsx("div",{className:"w-96 items-center",children:e.jsx(a.Tabs,{value:l,children:e.jsxs(a.TabsHeader,{children:[e.jsxs(a.Tab,{value:"info",onClick:()=>i("info"),children:[e.jsx(ua,{className:"-mt-1 mr-2 inline-block h-5 w-5"}),"Info"]}),e.jsxs(a.Tab,{value:"metrics",onClick:()=>i("metrics"),children:[e.jsx(ha,{className:"-mt-1 mr-2 inline-block h-5 w-5"}),"Metrics"]})]})})})]}),e.jsx("div",{className:"relative h-64 overflow-hidden max-w-sm",children:e.jsxs(H.div,{className:"flex max-w-sm h-full gap-4",initial:{x:l==="info"?"0%":"-100%",opacity:0},animate:{x:l==="info"?"0%":"-100%",opacity:1},transition:{duration:.5},children:[e.jsx(H.div,{className:"w-full flex-shrink-0",children:e.jsx(ye,{title:"Profile Information",description:"School based in Kigali, Rwanda",details:{"School mobile":`+${r.phone}`,"School email":`${t.email}`},action:e.jsx(a.Tooltip,{content:"Edit Profile",children:e.jsx(xa,{className:"h-4 w-4 cursor-pointer text-blue-gray-500",onClick:d})})})}),e.jsxs(H.div,{className:"w-full flex-shrink-0",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-4",children:"Metrics"}),e.jsxs("div",{className:"flex flex-col gap-4 w-5/6 md:w-3/4",children:[e.jsx(a.Input,{type:"time",label:"Start Time",value:o,onChange:c=>u(c.target.value),placeholder:"08:00 AM"}),e.jsx(a.Input,{type:"time",label:"End Time",value:j,onChange:c=>x(c.target.value),placeholder:"04:00 PM"}),e.jsx(a.Button,{color:"light-blue",onClick:w,className:"self-start",children:"Initialize"})]})]})]})})]})}),n&&e.jsx(rt,{onClose:()=>s(!1),isOpen:n})]})}function lt(){var Ne,ve;const{currentUser:t}=E(),{classes:r}=He(),[l,i]=h.useState(""),[n,s]=h.useState(M().toDate()),{classAttendance:o}=We(n),u=h.useRef(),[j,x]=h.useState(null),[w,d]=h.useState(!1),[c,m]=h.useState({}),[p,f]=h.useState(new Set),[b,A]=h.useState([]),g=r.filter(N=>N.grade===l)[0]||null,v=h.useMemo(()=>o,[o]);pa.HIGH,ga.LARGE;const k=(g==null?void 0:g.studentsCount)||0;h.useEffect(()=>{const N=(v==null?void 0:v.filter(R=>R.className===l))||[];A(R=>R.length===N.length&&R.every((P,O)=>P===N[O])?R:N)},[v,l]);const T=(N,R)=>{m(S=>({...S,[N]:{...S[N],status:R}})),f(S=>new Set(S).add(N))},F=h.useRef({}),Q=(N,R)=>{m(S=>{var O;return(((O=S[N])==null?void 0:O.notes)||F.current[N]||"")===R?S:(F.current[N]=R,{...S,[N]:{...S[N],notes:R}})}),f(S=>new Set(S).add(N))},z=(N,R,S)=>{var X;const P=(j==null?void 0:j.studentID)===R&&(j==null?void 0:j.statusType)===S,O=((X=c[R])==null?void 0:X.status)||N;return e.jsx(de,{className:`h-5 w-5 ${O===S?S==="present"?"text-green-500":S==="absent"?"text-red-500":"text-amber-500":P?"text-gray-400":"hidden"}`,"aria-hidden":"true"})},G=async()=>{const N=b.map(S=>({...S,students:S.students.map(P=>c[P.studentID]?{...P,...c[P.studentID]}:P)}));A(N),m({}),f(new Set),d(!1);const R={...N,date:M(n).format("YYYY-MM-DD")};try{await Za(R,t==null?void 0:t.id)}catch(S){throw S}},Ke=()=>{m({}),f(new Set),d(!1)},Ge=N=>{const R=M(N.target.value).toDate();R<=M().toDate()&&s(R)},Xe=()=>{const N=M(),R=M(n);return R.isSame(N,"day")?`Today ${R.format("MMM D, YYYY")}`:R.isSame(N.subtract(1,"day"),"day")?`Yesterday ${R.format("MMM D, YYYY")}`:R.format("MMM D, YYYY")};return e.jsxs("div",{className:"mt-12 mb-8 flex flex-col gap-12",children:[e.jsxs("div",{className:"w-full flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx(a.Typography,{variant:"h5",className:"font-bold font-['Nunito']",children:"Class Attendance"}),e.jsxs("div",{className:"flex items-center gap-4 justify-end",children:[e.jsx(a.Typography,{variant:"small",className:"font-semibold font-['Nunito']",children:Xe()}),e.jsx("div",{className:"w-72",children:e.jsx(a.Input,{type:"date",onChange:Ge,value:M(n).format("YYYY-MM-DD"),max:M().format("YYYY-MM-DD"),className:"border rounded px-2 py-1 text-sm font-['Nunito']"})})]})]}),e.jsx("div",{className:"w-72",children:e.jsx(a.Select,{label:"Select Classroom",value:l,onChange:N=>i(N),children:Array.isArray(r)&&r.map(N=>e.jsx(a.Option,{value:N.grade,children:N.grade},N.grade))},l)}),l&&e.jsxs(e.Fragment,{children:[e.jsxs(a.Card,{ref:u,children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-1 mx-5 my-5",children:e.jsx(a.Typography,{variant:"h5",color:"blue-gray",className:"mb-1 font-['Nunito'] font-bold",children:t.user_metadata.displayName})}),e.jsxs(a.Typography,{variant:"small",className:"flex items-center gap-1 font-normal text-blue-gray-600 font-['Nunito'] mx-5",children:["Class Attendance on ",M(n).format("YYYY-MM-DD")]})]}),e.jsxs(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 flex p-6 flex-col w-full",children:[e.jsxs("div",{className:"w-full items-center justify-between flex",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-1",children:l}),e.jsxs(a.Menu,{placement:"left-start",children:[e.jsx(a.MenuHandler,{children:e.jsx(a.IconButton,{size:"sm",variant:"text",color:"blue-gray",children:e.jsx(ce,{strokeWidth:3,fill:"currentColor",className:"h-5 w-5"})})}),e.jsxs(a.MenuList,{children:[e.jsx(a.MenuItem,{onClick:()=>d(N=>!N),children:w?"Cancel":"Edit"}),w&&e.jsx(a.MenuItem,{onClick:G,children:"Save All Changes"}),w&&e.jsx(a.MenuItem,{onClick:Ke,children:"Leave Edit Mode"})]})]})]}),e.jsx("div",{children:e.jsxs(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal font-['Nunito']",children:["Total Students: ",k]})})]}),e.jsx(a.CardBody,{className:"overflow-x-scroll",children:e.jsxs("table",{className:"w-full table-auto border",children:[e.jsx("thead",{children:e.jsx("tr",{children:["Student ID","Name","Present","Absent","Late","Arrival Time","Remarks"].map((N,R)=>e.jsx("th",{className:"border-b border-blue-gray-50 py-3 px-1 text-left",children:e.jsx(a.Typography,{variant:"small",className:"text-[11px] font-bold uppercase text-blue-gray-400",children:N})},`${N}-${R}`))})}),e.jsx("tbody",{children:(ve=(Ne=b[0])==null?void 0:Ne.students)==null?void 0:ve.map((N,R)=>{var we,Te,Ce;const{studentID:S,studentName:P,status:O,arrivalTime:X,notes:ee}=N,Z=`py-2 px-2 ${R===((Te=(we=b[0])==null?void 0:we.students)==null?void 0:Te.length)-1?"":"border-b border-blue-gray-50"}`;return e.jsxs("tr",{children:[e.jsx("td",{className:`${Z} w-32`,children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-bold font-['Nunito']",children:S})}),e.jsx("td",{className:`${Z}`,children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-['Nunito']",children:P})}),["present","absent","late"].map(_=>e.jsx("td",{className:`${Z} cursor-pointer`,onMouseEnter:()=>w&&x({studentID:S,statusType:_}),onMouseLeave:()=>w&&x(null),onClick:()=>w&&T(S,_),children:z(O,S,_)},_)),e.jsx("td",{className:`${Z} font-light font-['Nunito'] text-sm`,children:X&&M(X).format("HH:mm")}),e.jsx("td",{className:`${Z}`,children:w?e.jsx(a.Input,{placeholder:"Add notes",value:((Ce=c[S])==null?void 0:Ce.notes)??F.current[S]??ee??"",onChange:_=>Q(S,_.target.value),className:"resize-none border border-gray-300 rounded px-2 py-2 text-sm"}):e.jsx(a.Typography,{variant:"small",className:"font-['Nunito']",children:ee&&ee==="N/A"?"":ee||"N/A"})})]},S)})})]})}),e.jsx("div",{className:"watermark text-center mt-8",children:e.jsx("p",{style:{opacity:.1,fontSize:"24px"},className:"font-['Aquire']",children:"ATS"})})]}),e.jsx("div",{className:"hidden gap-4 mt-4 lg:flex",children:e.jsxs(a.Button,{variant:"filled",color:"blue",className:"flex items-center gap-2",onClick:()=>De(u,{filename:`${l}_Attendance_${M(n).format("YYYY-MM-DD")}.pdf`}),children:[e.jsx(fa,{className:"w-5 h-5"}),"Download PDF"]})})]})]})}function je({brandName:t="ATS"}){return e.jsxs(V.div,{className:"flex flex-col items-center justify-center mt-40 bg-transparent",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx(a.Typography,{variant:"h1",className:"font-['Aquire'] bg-gradient-to-r from-black/40 via-black/60 to-black/80 bg-clip-text",style:{WebkitTextFillColor:"transparent"},children:t}),e.jsx("p",{className:'font-normal font-["Nunito"]',children:"This feature is still in development"})]})}function it(){return e.jsx(je,{})}function ot(){return e.jsx(je,{})}function ct(){const{rfidCards:t,activeCards:r,unassignedCards:l}=Ye(),{currentUser:i}=E();h.useState("");const[n,s]=h.useState(""),[o,u]=h.useState(null),j=d=>{d.preventDefault(),u(d.target.files[0])},x=async()=>{if(n!=="")try{const d=await I.post("/api/v1/rfid/set",{rfid_ID:n},{headers:{"x-tenant-id":`${i.id}`}});s(""),y(d.data.msg,{type:"success"})}catch(d){y(d.response.data.error,{type:"error"})}},w=async(d,c,m)=>{var p,f,b,A,g,v;if(d&&c)try{(await I.post(`/api/v1/rfid/deactivate/${d}`,{},{headers:{"x-tenant-id":`${i.id}`}})).status===201?y("Card deactivated successfully",{type:"success"}):y("Failed to deactivate card",{type:"warning"})}catch(k){y(((f=(p=k.response)==null?void 0:p.data)==null?void 0:f.message)||"Error occurred while deactivating card",{type:"error"})}else if(!c&&m)try{(await I.post(`/api/v1/rfid/activate/${d}`,{},{headers:{"x-tenant-id":`${i.id}`}})).status===201?y("Card activated successfully",{type:"success"}):y("Failed to activate card",{type:"warning"})}catch(k){y(((A=(b=k.response)==null?void 0:b.data)==null?void 0:A.message)||"Error occurred while activating card",{type:"error"})}else if(!m)try{(await I.delete(`/api/v1/rfid/delete/${d}`,{headers:{"x-tenant-id":`${i.id}`}})).status===201?y("Card deleted successfully",{type:"success"}):y("Failed to delete card",{type:"warning"})}catch(k){y(((v=(g=k.response)==null?void 0:g.data)==null?void 0:v.message)||"Error occurred while deleting card",{type:"error"})}};return e.jsxs("div",{className:"mt-12",children:[e.jsxs("div",{className:"mb-5 grid gap-y-10 gap-x-6 md:grid-cols-2 xl:grid-cols-4",children:[e.jsx(q,{color:"teal",title:"Active Cards",value:r,icon:e.jsx(oe,{className:"w-6 h-6 text-white"}),footer:e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"})},1),e.jsx(q,{color:"blue-gray",title:"Unassigned Cards",value:l,icon:e.jsx($e,{className:"w-6 h-6 text-white"}),footer:e.jsxs("div",{className:"w-full flex justify-between items-center",children:[e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"}),e.jsxs(a.Menu,{placement:"left-start",children:[e.jsx(a.MenuHandler,{children:e.jsx(a.IconButton,{size:"sm",variant:"text",color:"blue-gray",children:e.jsx(ya,{strokeWidth:3,fill:"currenColor",className:"h-6 w-6"})})}),e.jsx(a.MenuList,{children:e.jsx(a.MenuItem,{onClick:()=>ze(i.id),children:"Assign All"})})]})]})},2)]}),e.jsx("div",{className:"mb-6 grid grid-cols-1 gap-y-12 gap-x-6 md:grid-cols-1 xl:grid-cols-2",children:e.jsxs(a.Card,{children:[e.jsx(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 flex items-center justify-between p-6",children:e.jsx("div",{children:e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-1",children:"Card Management"})})}),e.jsx(a.CardBody,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx(a.Typography,{variant:"h6",className:"mb-4 font-semibold font-['Nunito']",children:"Register New Card"}),e.jsx(a.Input,{label:"Card ID",value:n,onChange:d=>s(d.target.value),placeholder:"Enter Card ID"}),e.jsx(a.Button,{color:"light-blue",onClick:x,children:"Register Card"})]}),e.jsxs("div",{className:"w-full max-w-sm flex flex-col items-start gap-4",children:[e.jsx(a.Typography,{variant:"h6",className:"text-sm font-semibold font-['Nunito']",children:"Import cards (CSV Format)"}),e.jsxs("label",{className:"w-full",children:[e.jsx("input",{type:"file",onChange:j,className:"hidden",id:"file-input"}),e.jsx(a.Input,{label:"Select File",variant:"outlined",placeholder:"example.csv",value:o?o.name:"",readOnly:!0,onClick:()=>document.getElementById("file-input").click()})]}),e.jsxs("div",{className:"w-full flex items-center gap-2",children:[e.jsx(a.Button,{color:"light-blue",onClick:()=>Oe("rfid/upload",i.id,o),disabled:!o,children:"Upload"}),e.jsx(a.Button,{color:"blue-gray",onClick:()=>{console.log("Template")},variant:"outlined",children:"Download Template"})]})]})]})})]})}),e.jsxs(a.Card,{className:"overflow-hidden xl:col-span-2 border border-blue-gray-100 shadow-sm",children:[e.jsx(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 flex items-center justify-between p-6",children:e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-1",children:"Cards Overview"}),e.jsxs(a.Typography,{variant:"small",className:"flex items-center gap-1 font-normal text-blue-gray-600",children:[e.jsx("strong",{children:t==null?void 0:t.length})," registered cards"]})]})}),e.jsx(a.CardBody,{className:"overflow-x-scroll px-0 pt-0 pb-2 max-h-96",children:e.jsxs("table",{className:"w-full min-w-[640px] table-auto",children:[e.jsx("thead",{children:e.jsx("tr",{children:["RFID ID","Assigned To","Class","Status","Actions"].map(d=>e.jsx("th",{className:"border-b border-blue-gray-50 py-3 px-5 text-left",children:e.jsx(a.Typography,{variant:"small",className:"text-[11px] font-bold uppercase text-blue-gray-400",children:d})},d))})}),e.jsx("tbody",{children:Array.isArray(t)&&t.map((d,c)=>{const m=`py-3 px-5 ${c===t.length-1?"":"border-b border-blue-gray-50"}`;return e.jsxs("tr",{children:[e.jsx("td",{className:m,children:e.jsx(a.Typography,{variant:"small",children:d.rfid_ID})}),e.jsx("td",{className:m,children:e.jsx(a.Typography,{variant:"small",children:d.assignedTo!==null?d.assignedTo:"N/A"})}),e.jsx("td",{className:m,children:e.jsx(a.Typography,{variant:"small",children:d.student?d.student.grade:"N/A"})}),e.jsx("td",{className:m,children:d.activated?e.jsx(de,{className:"h-5 w-5 text-green-500"}):e.jsx(Ie,{className:"h-5 w-5 text-red-500"})}),e.jsx("td",{className:`${m} `,children:e.jsx(a.Button,{size:"sm",variant:"outlined",color:d.activated?"amber":d.student?"green":"red",onClick:()=>w(d.rfid_ID,d.activated,d.student),children:d.activated?"Deactivate":d.student?"Activate":"Remove"})})]},d.rfid_ID)})})]})})]})]})}function dt(){const{students:t,activeStudents:r,unassignedStudents:l}=_e(),{currentUser:i}=E(),[n,s]=h.useState({studentID:"STD-",studentName:"",gender:"",grade:"",contact:""}),[o,u]=h.useState(null),j=c=>{c.preventDefault(),u(c.target.files[0])},x=c=>{const{name:m,value:p}=c.target;s(f=>({...f,[m]:p}))},w=async c=>{if(c.preventDefault(),n.gender)try{const m=await I.post("/api/v1/student/create",n,{headers:{"x-tenant-id":`${i.id}`}});y(m.data.msg,{type:"success"})}catch(m){y(m.response.data.error,{type:"error"})}else y("Fill out all required fields",{type:"error"})},d=async(c,m,p)=>{var f,b,A,g,v,k;if(m&&c==="active")try{(await I.delete(`/api/v1/student/delete/${p}`,{headers:{"x-tenant-id":`${i.id}`}})).status===201?y("Student terminated successfully",{type:"success"}):y("Failed to terminate student",{type:"warning"})}catch(T){y(((b=(f=T.response)==null?void 0:f.data)==null?void 0:b.message)||"Error occurred while assigning student",{type:"error"})}else if(!m&&c==="active")try{const T=await I.post(`/api/v1/rfid/assign-single/${p}`,{},{headers:{"x-tenant-id":`${i.id}`}});T.status===201?y("Student assigned successfully",{type:"success"}):y(T.data.msg,{type:"warning"})}catch(T){y(((g=(A=T.response)==null?void 0:A.data)==null?void 0:g.message)||"Error occurred while assigning student",{type:"error"})}else try{(await I.delete(`/api/v1/student/delete/${p}`,{headers:{"x-tenant-id":`${i.id}`}})).status===201?y("Student terminated successfully",{type:"success"}):y("Failed to terminate student",{type:"warning"})}catch(T){y(((k=(v=T.response)==null?void 0:v.data)==null?void 0:k.message)||"Error occurred while assigning student",{type:"error"})}};return e.jsxs("div",{className:"mt-12 mb-8 flex flex-col gap-12",children:[e.jsxs("div",{className:"mb-5 grid gap-y-10 gap-x-6 md:grid-cols-2 xl:grid-cols-4",children:[e.jsx(q,{color:"teal",title:"Active Students",value:r||0,icon:e.jsx(ba,{className:"w-6 h-6 text-white"}),footer:e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"})},1),e.jsx(q,{color:"blue-gray",title:"Unassigned Students",value:l||0,icon:e.jsx(ja,{className:"w-6 h-6 text-white"}),footer:e.jsxs("div",{className:"w-full flex justify-between items-center",children:[e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"updated 2hrs ago"}),e.jsxs(a.Menu,{placement:"left-start",children:[e.jsx(a.MenuHandler,{children:e.jsx(a.IconButton,{size:"sm",variant:"text",color:"blue-gray",children:e.jsx(ce,{strokeWidth:3,fill:"currenColor",className:"h-6 w-6"})})}),e.jsx(a.MenuList,{children:e.jsx(a.MenuItem,{onClick:()=>ze(i.id),children:"Assign All"})})]})]})},2),e.jsx(q,{color:"deep-orange",title:"Ineligible Students",value:t?t.length-r:0,icon:e.jsx(Na,{className:"w-6 h-6 text-white"}),footer:e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"})},3)]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-y-12 gap-x-6 md:grid-cols-1 xl:grid-cols-2",children:[e.jsxs(a.Card,{className:"w-full max-w-3xl mx-auto",children:[e.jsx(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 flex items-center justify-between p-6",children:e.jsx("div",{children:e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-1",children:"Student Registration"})})}),e.jsx(a.CardBody,{children:e.jsxs("form",{onSubmit:w,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(a.Input,{label:"Student ID",name:"studentID",value:n.studentID,onChange:x,required:!0}),e.jsx(a.Input,{label:"Student Name",name:"studentName",value:n.studentName,onChange:x,required:!0}),e.jsxs(a.Select,{label:"Gender",name:"gender",value:n.gender,onChange:c=>s({...n,gender:c}),children:[e.jsx(a.Option,{value:"Male",children:"Male"}),e.jsx(a.Option,{value:"Female",children:"Female"})]}),e.jsx(a.Input,{label:"Grade",name:"grade",value:n.grade,onChange:x,required:!0}),e.jsx(a.Input,{label:"Contact",name:"contact",value:n.contact,onChange:x,required:!0}),e.jsx("div",{className:"w-full flex items-center justify-center",children:e.jsx(a.Button,{type:"submit",color:"light-blue",className:"max-w-sm",children:"Register Student"})})]})})]}),e.jsxs("div",{className:"w-full max-w-sm mx-auto flex flex-col items-start gap-4",children:[e.jsx(a.Typography,{variant:"h6",className:"text-sm font-semibold font-['Nunito']",children:"Import students (CSV Format)"}),e.jsxs("label",{className:"w-full",children:[e.jsx("input",{type:"file",onChange:j,className:"hidden",id:"file-input"}),e.jsx(a.Input,{label:"Select File",variant:"outlined",placeholder:"example.csv",value:o?o.name:"",readOnly:!0,onClick:()=>document.getElementById("file-input").click()})]}),e.jsxs("div",{className:"w-full flex items-center gap-2",children:[e.jsx(a.Button,{color:"light-blue",onClick:()=>Oe("student/upload",i.id,o),disabled:!o,children:"Upload"}),e.jsx(a.Button,{color:"blue-gray",onClick:()=>{console.log("Template")},variant:"outlined",children:"Download Template"})]})]})]}),e.jsxs(a.Card,{className:"overflow-hidden xl:col-span-2 border border-blue-gray-100 shadow-sm",children:[e.jsx(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 flex items-center justify-between p-6",children:e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-1",children:"Students Overview"}),e.jsxs(a.Typography,{variant:"small",className:"flex items-center gap-1 font-normal text-blue-gray-600",children:[e.jsx("strong",{children:t==null?void 0:t.length})," registered students"]})]})}),e.jsx(a.CardBody,{className:"overflow-x-scroll px-0 pt-0 pb-2 max-h-96",children:e.jsxs("table",{className:"w-full min-w-[640px] table-auto",children:[e.jsx("thead",{children:e.jsx("tr",{children:["Student ID","Student Name","Class","Assigned","Actions"].map(c=>e.jsx("th",{className:"border-b border-blue-gray-50 py-3 px-5 text-left",children:e.jsx(a.Typography,{variant:"small",className:"text-[11px] font-bold uppercase text-blue-gray-400",children:c})},c))})}),e.jsx("tbody",{children:Array.isArray(t)&&t.map((c,m)=>{const p=`py-3 px-5 ${m===t.length-1?"":"border-b border-blue-gray-50"}`;return e.jsxs("tr",{children:[e.jsx("td",{className:p,children:e.jsx(a.Typography,{variant:"small",children:c.studentID})}),e.jsx("td",{className:p,children:e.jsx(a.Typography,{variant:"small",children:c.studentName})}),e.jsx("td",{className:p,children:e.jsx(a.Typography,{variant:"small",children:c.grade})}),e.jsx("td",{className:p,children:c.rfidCard?e.jsx(de,{className:"h-5 w-5 text-green-500"}):c.status==="active"?e.jsx(va,{className:"h-5 w-5 text-gray-500"}):e.jsx(Ie,{className:"h-5 w-5 text-red-500"})}),e.jsx("td",{className:p,children:e.jsx(a.Button,{size:"sm",variant:"outlined",color:c.rfidCard?"blue-gray":c.status==="active"?"green":"red",onClick:()=>d(c.status,c.rfidCard,c.studentID),children:c.rfidCard?"Terminate":c.status==="active"?"assign":"remove"})})]},c.studentID)})})]})})]})]})}function mt(){return e.jsx(je,{})}wa.register(Ta,Ca,Sa);function ut(){const{currentUser:t}=E(),[r,l]=h.useState(""),[i,n]=h.useState(""),{report:s}=Qa(r,i),o=h.useRef(),[u]=Aa(),j=u.get("search"),{student:x}=_e(j),w={labels:["Present","Late","Absent"],datasets:[{data:[parseFloat(x==null?void 0:x.present),parseFloat(x==null?void 0:x.late),parseFloat(x==null?void 0:x.absent)],backgroundColor:["#4CAF50","#FF9800","#F44336"],hoverBackgroundColor:["#45A149","#F4A641","#D9392F"],borderWidth:1}]},d=new Date().getFullYear(),c=new Date().getMonth()+1,m=new Date().toLocaleDateString(),p=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}],f=Array.from({length:d-2020+1},(g,v)=>2020+v),b=g=>i===d&&g>c,A={labels:[`Male - ${((s==null?void 0:s.totalMales)/(s==null?void 0:s.totalStudents)*100).toFixed(1)}%`,`Female - ${((s==null?void 0:s.totalFemales)/(s==null?void 0:s.totalStudents)*100).toFixed(1)}%`],datasets:[{data:[((s==null?void 0:s.totalMales)/(s==null?void 0:s.totalStudents)*100).toFixed(1)||0,((s==null?void 0:s.totalFemales)/(s==null?void 0:s.totalStudents)*100).toFixed(1)||0],backgroundColor:["#92C5F9","#B6A6E9"],hoverBackgroundColor:["#4394E5","#876FD4"]}]};return e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-y-12 gap-x-6",children:[x&&e.jsxs(e.Fragment,{children:[e.jsx(a.Typography,{variant:"h5",className:"font-bold font-['Nunito']",children:"Student Analysis"}),e.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-4 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(ka,{className:"h-10 w-10 text-blue-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 font-['Nunito']",children:x.name}),e.jsx("p",{className:"text-gray-500 font-['Nunito']",children:x.studentID})]})]}),e.jsxs("div",{className:"flex items-center mb-6 justify-between",children:[e.jsxs("span",{className:"text-gray-700 text-sm mt-2 flex flex-col",children:[e.jsx("p",{className:"font-bold font-['Nunito'] text-black",children:"Attendance Breakdown"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("p",{children:[x.present," Present"]}),e.jsxs("p",{children:[x.late," Late"]}),e.jsxs("p",{children:[x.absent," Absent"]})]})]}),e.jsx("div",{className:"w-40 h-40",children:e.jsx(Ra,{data:w})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Grade:"}),e.jsx("p",{children:x.grade})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Gender:"}),e.jsx("p",{children:x.gender})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Contact:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fa,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{children:x.contact})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Card Active:"}),e.jsx("p",{className:x.cardActive?"text-green-600":"text-red-600",children:x.cardActive?"Yes":"No"})]})]})]})]}),e.jsx(a.Typography,{variant:"h5",className:"font-bold font-['Nunito']",children:"Attendance Report"}),e.jsxs("div",{className:"flex gap-4 flex-col lg:flex-row max-w-sm",children:[e.jsx(a.Select,{label:"Select Month",value:r.toString(),onChange:g=>l(g),className:"w-full",children:p.map(({value:g,label:v})=>e.jsx(a.Option,{value:v,disabled:b(g),children:v},g))}),e.jsx(a.Select,{label:"Select Year",value:i.toString(),onChange:g=>n(Number(g)),className:"w-full",children:f.map(g=>e.jsx(a.Option,{value:g.toString(),children:g},g))})]}),s&&r&&i&&e.jsxs(e.Fragment,{children:[e.jsxs(a.Card,{className:"p-4 shadow-lg",ref:o,children:[e.jsx(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 flex items-center justify-between p-5",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(a.Avatar,{src:t&&t.user_metadata.profile||"/img/no-profile.jpg",alt:(t==null?void 0:t.user_metadata.displayName)||t.email,size:"md",variant:"rounded",className:"rounded-lg shadow-blue-gray-500/40"}),e.jsx(a.Typography,{variant:"h5",color:"blue-gray",className:"mb-1 font-['Nunito'] font-bold",children:t.user_metadata.displayName})]}),e.jsx(a.Typography,{variant:"small",className:"flex items-center gap-1 font-normal text-blue-gray-600 font-['Nunito']",children:"Students Attendance Report"})]})}),e.jsxs(a.CardBody,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h6",className:"font-['Nunito'] font-semibold mb-2 text-black",children:"Report Details"}),e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito'] font-normal",children:["Report for ",r," ",i]}),e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito'] font-medium",children:["Generated on: ",m]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(a.Typography,{variant:"h6",className:"font-['Nunito'] font-semibold text-black",children:"Overview"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-4",children:[e.jsx("div",{className:"p-4 rounded-lg shadow-md flex items-center bg-gray-50",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{children:e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito']",children:[e.jsx("strong",{className:"font-medium",children:"Total Students:"})," ",(s==null?void 0:s.totalStudents)||0]})}),e.jsx("div",{children:e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito']",children:[e.jsx("strong",{className:"font-medium",children:"Male:"})," ",(s==null?void 0:s.totalMales)||0]})}),e.jsx("div",{children:e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito']",children:[e.jsx("strong",{className:"font-medium",children:"Female:"})," ",(s==null?void 0:s.totalFemales)||0]})}),e.jsx("div",{children:e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito']",children:[e.jsx("strong",{className:"font-medium",children:"On-Time Arrivals:"})," ",(s==null?void 0:s.attendances)||0]})}),e.jsx("div",{children:e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito']",children:[e.jsx("strong",{className:"font-medium",children:"Late Arrivals:"})," ",(s==null?void 0:s.lateArrivals)||0]})}),e.jsx("div",{children:e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito']",children:[e.jsx("strong",{className:"font-medium",children:"Absences:"})," ",(s==null?void 0:s.absences)||0]})})]})}),e.jsx("div",{className:"p-4 rounded-lg h-80 flex items-center justify-center",children:e.jsx(Ea,{data:A})})]})]}),e.jsxs("div",{className:"mt-6 overflow-x-auto",children:[e.jsx(a.Typography,{variant:"h6",className:"mb-2 font-['Nunito'] font-semibold",children:"Detailed Report"}),e.jsxs("table",{className:"w-full min-w-[640px] table-auto border",children:[e.jsx("thead",{children:e.jsx("tr",{children:["Class","Total Students","Male","Female","Presence","Late","Absence"].map(g=>e.jsx("th",{className:"border-b border-blue-gray-50 py-3 px-5 text-left",children:e.jsx(a.Typography,{variant:"small",className:"text-[11px] font-bold uppercase text-blue-gray-400",children:g})},g))})}),e.jsx("tbody",{children:Array.isArray(s==null?void 0:s.metadata)&&s.metadata.slice().sort((g,v)=>g.class<v.class?-1:g.class>v.class?1:0).map((g,v)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-2 border-b border-gray-200",children:g.class}),e.jsx("td",{className:"px-6 py-2 border-b border-gray-200",children:g.totalStudents}),e.jsx("td",{className:"px-6 py-2 border-b border-gray-200",children:g.male}),e.jsx("td",{className:"px-6 py-2 border-b border-gray-200",children:g.female}),e.jsx("td",{className:"px-6 py-2 border-b border-gray-200",children:g.attendances}),e.jsx("td",{className:"px-6 py-2 border-b border-gray-200",children:g.late}),e.jsx("td",{className:"px-6 py-2 border-b border-gray-200",children:g.absences})]},v))})]})]})]}),e.jsx(a.CardFooter,{className:"border-t border-gray-200 mt-4 bottom-0",children:e.jsx(a.Typography,{variant:"small",color:"gray",children:"This report is generated for institutional use only and provides an accurate summary of students attendance."})}),e.jsx("div",{className:"watermark text-center mt-8",children:e.jsx("p",{style:{opacity:.1,fontSize:"24px"},className:"font-['Aquire']",children:"ATS"})})]}),e.jsx("div",{className:"hidden gap-4 mt-4 lg:flex",children:e.jsxs(a.Button,{variant:"filled",color:"blue",className:"flex items-center gap-2",onClick:()=>De(o,{filename:`ATS_Monthly_Report_${s==null?void 0:s.month}_${i}.pdf`}),children:[e.jsx($a,{className:"w-5 h-5"}),"Download PDF"]})})]})]})}function ht(){const t=h.useRef(),r=h.useRef(),{logIn:l}=E(),[i,n]=h.useState(""),[s,o]=h.useState(!1);async function u(j){j.preventDefault();try{n(""),o(!0),await l(t.current.value,r.current.value)}catch{n("Failed to sign in")}o(!1)}return e.jsx(e.Fragment,{children:e.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("section",{className:"m-8 flex gap-4",children:[e.jsxs("div",{className:"w-full lg:w-3/5 mt-24",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(a.Typography,{variant:"h2",className:"font-bold mb-4",children:"Log In"}),e.jsx(a.Typography,{variant:"paragraph",color:"blue-gray",className:"text-lg font-normal",children:"Enter your email and password to Sign In."})]}),e.jsxs("form",{className:"mt-8 mb-2 mx-auto w-80 max-w-screen-lg lg:w-1/2",onSubmit:u,children:[e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Your email"}),e.jsx(a.Input,{size:"lg",placeholder:"name@mail.com",inputRef:t,className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}}),e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Password"}),e.jsx(a.Input,{type:"password",size:"lg",inputRef:r,placeholder:"********",className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}})]}),e.jsx(a.Button,{className:"mt-6",fullWidth:!0,disabled:s,onClick:async j=>{await u(j)},children:"Log In"}),e.jsx("div",{className:"flex items-center justify-between gap-2 mt-6",children:e.jsx(a.Typography,{variant:"small",className:"font-medium text-gray-900",children:e.jsx("a",{href:"#",children:"Forgot Password"})})}),e.jsx("div",{className:"space-y-4 mt-8",children:e.jsxs(a.Button,{size:"lg",color:"white",className:"flex items-center gap-2 justify-center shadow-md",fullWidth:!0,children:[e.jsxs("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("g",{clipPath:"url(#clip0_1156_824)",children:[e.jsx("path",{d:"M16.3442 8.18429C16.3442 7.64047 16.3001 7.09371 16.206 6.55872H8.66016V9.63937H12.9813C12.802 10.6329 12.2258 11.5119 11.3822 12.0704V14.0693H13.9602C15.4741 12.6759 16.3442 10.6182 16.3442 8.18429Z",fill:"#4285F4"}),e.jsx("path",{d:"M8.65974 16.0006C10.8174 16.0006 12.637 15.2922 13.9627 14.0693L11.3847 12.0704C10.6675 12.5584 9.7415 12.8347 8.66268 12.8347C6.5756 12.8347 4.80598 11.4266 4.17104 9.53357H1.51074V11.5942C2.86882 14.2956 5.63494 16.0006 8.65974 16.0006Z",fill:"#34A853"}),e.jsx("path",{d:"M4.16852 9.53356C3.83341 8.53999 3.83341 7.46411 4.16852 6.47054V4.40991H1.51116C0.376489 6.67043 0.376489 9.33367 1.51116 11.5942L4.16852 9.53356Z",fill:"#FBBC04"}),e.jsx("path",{d:"M8.65974 3.16644C9.80029 3.1488 10.9026 3.57798 11.7286 4.36578L14.0127 2.08174C12.5664 0.72367 10.6469 -0.0229773 8.65974 0.000539111C5.63494 0.000539111 2.86882 1.70548 1.51074 4.40987L4.1681 6.4705C4.8001 4.57449 6.57266 3.16644 8.65974 3.16644Z",fill:"#EA4335"})]}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_1156_824",children:e.jsx("rect",{width:"16",height:"16",fill:"white",transform:"translate(0.5)"})})})]}),e.jsx("span",{children:"Sign in With Google"})]})}),e.jsxs(a.Typography,{variant:"paragraph",className:"text-center text-blue-gray-500 font-medium mt-4",children:["Not registered?",e.jsx(J,{to:"/auth/sign-up",className:"text-gray-900 ml-1",children:"Create account"})]})]})]}),e.jsx("div",{className:"w-2/5 h-full hidden lg:block",children:e.jsx("img",{src:"/img/pattern.png",className:"h-full w-full object-cover rounded-3xl"})})]})})})}function xt(){const t=h.useRef(null),r=h.useRef(null),[l,i]=h.useState(null),n=h.useRef(null),s=h.useRef(null),{signup:o,currentUser:u}=E(),[j,x]=h.useState(""),[w,d]=h.useState(!1);U();async function c(p){if(p.preventDefault(),n.current.value!==s.current.value)return x("Passwords do not match");if(t.current.value===null)return x("Provide your organization name");if(l===null)return x("Provide your phone number");try{x(""),d(!0),await o(t.current.value,r.current.value,l,n.current.value)}catch{x("Failed to create an account")}d(!1)}const m=(p,f,b)=>{i(p)};return h.useEffect(()=>{j!==""&&y(j,{type:"error"})},[j]),e.jsx(e.Fragment,{children:e.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("section",{className:"m-8 flex",children:[e.jsx("div",{className:"w-2/5 h-full hidden lg:block",children:e.jsx("img",{src:"/img/pattern.png",className:"h-full w-full object-cover rounded-3xl"})}),e.jsxs("div",{className:"w-full lg:w-3/5 flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(a.Typography,{variant:"h2",className:"font-bold mb-4",children:"Join Us Today"}),e.jsx(a.Typography,{variant:"paragraph",color:"blue-gray",className:"text-lg font-normal",children:"Enter your email and password to register."})]}),e.jsxs("form",{className:"mt-8 mb-2 mx-auto w-80 max-w-screen-lg lg:w-1/2",children:[e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Organization Name"}),e.jsx(a.Input,{size:"lg",placeholder:"Name",inputRef:t,className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}})]}),e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Your email"}),e.jsx(a.Input,{size:"lg",placeholder:"name@mail.com",type:"email",inputRef:r,className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}})]}),e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Phone Number"}),e.jsx(Da,{country:"rw",masks:{rw:"... ... ..."},onlyCountries:["rw"],inputClass:"bg-transparent border-none focus:ring-2 focus:ring-gray-900 duration-200",containerClass:"rounded-md",buttonClass:"bg-transparent border-none",inputStyle:{width:"100%",height:"45px"},placeholder:"XXXX-XXX-XXX",onChange:m})]}),e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Your password"}),e.jsx(a.Input,{size:"lg",type:"password",inputRef:n,placeholder:"********",className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}})]}),e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Confirm Password"}),e.jsx(a.Input,{size:"lg",placeholder:"********",inputRef:s,type:"password",className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}})]}),e.jsx(a.Button,{className:"mt-6",fullWidth:!0,onClick:async p=>{await c(p)},disabled:w,children:w?"Loading":"Register Now"}),e.jsx("div",{className:"space-y-4 mt-8",children:e.jsxs(a.Button,{size:"lg",color:"white",className:"flex items-center gap-2 justify-center shadow-md",fullWidth:!0,children:[e.jsxs("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("g",{clipPath:"url(#clip0_1156_824)",children:[e.jsx("path",{d:"M16.3442 8.18429C16.3442 7.64047 16.3001 7.09371 16.206 6.55872H8.66016V9.63937H12.9813C12.802 10.6329 12.2258 11.5119 11.3822 12.0704V14.0693H13.9602C15.4741 12.6759 16.3442 10.6182 16.3442 8.18429Z",fill:"#4285F4"}),e.jsx("path",{d:"M8.65974 16.0006C10.8174 16.0006 12.637 15.2922 13.9627 14.0693L11.3847 12.0704C10.6675 12.5584 9.7415 12.8347 8.66268 12.8347C6.5756 12.8347 4.80598 11.4266 4.17104 9.53357H1.51074V11.5942C2.86882 14.2956 5.63494 16.0006 8.65974 16.0006Z",fill:"#34A853"}),e.jsx("path",{d:"M4.16852 9.53356C3.83341 8.53999 3.83341 7.46411 4.16852 6.47054V4.40991H1.51116C0.376489 6.67043 0.376489 9.33367 1.51116 11.5942L4.16852 9.53356Z",fill:"#FBBC04"}),e.jsx("path",{d:"M8.65974 3.16644C9.80029 3.1488 10.9026 3.57798 11.7286 4.36578L14.0127 2.08174C12.5664 0.72367 10.6469 -0.0229773 8.65974 0.000539111C5.63494 0.000539111 2.86882 1.70548 1.51074 4.40987L4.1681 6.4705C4.8001 4.57449 6.57266 3.16644 8.65974 3.16644Z",fill:"#EA4335"})]}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_1156_824",children:e.jsx("rect",{width:"16",height:"16",fill:"white",transform:"translate(0.5)"})})})]}),e.jsx("span",{children:"Sign in With Google"})]})}),e.jsxs(a.Typography,{variant:"paragraph",className:"text-center text-blue-gray-500 font-medium mt-4",children:["Already have an account?",e.jsx(J,{to:"/auth/login",className:"text-gray-900 ml-1",children:"Log In"})]})]})]})]})})})}function pt(){const[t,r]=h.useState(""),l=n=>{const[s,o]=n.split("@");return`${s.slice(0,3)+"*****"}@${o}`};h.useEffect(()=>{(async()=>{const{data:s}=await L.auth.getUser();s&&s.email&&r(s.email)})()},[]);const i=async()=>{try{const{user:n,error:s}=await L.auth.getUser();if(n){const{error:o}=await L.auth.api.resendConfirmationEmail(n.email);o?y.error(o.message):y.success("Verification email resent! Please check your inbox.")}}catch{y.error("Error while resending email.")}};return e.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-100",children:e.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white shadow-xl rounded-lg",children:[e.jsx(a.Typography,{variant:"h5",color:"blue-gray",className:"text-center mb-6",children:"Verify Your Email"}),t&&e.jsxs(a.Typography,{color:"gray",className:"text-center mb-4",children:["Thank you for signing up! We have sent a verification email to"," ",e.jsx("strong",{children:l(t)}),". Please check your email (and the spam folder) to verify your account."]}),e.jsx("div",{className:"text-center",children:e.jsx(a.Button,{color:"blue",onClick:i,className:"w-full",children:"Resend Verification Email"})}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs(a.Typography,{color:"gray",className:"text-sm",children:["If you've already verified your email, you can go back to the ",e.jsx("a",{href:"/auth/login",className:"text-blue-500 hover:text-blue-700",children:"Login"})," page."]})})]})})}const W={className:"w-5 h-5 text-inherit"},Re=[{title:"Overview",layout:"dashboard",pages:[{icon:e.jsx(Ia,{...W}),name:"dashboard",path:"/home",element:e.jsx(st,{})},{icon:e.jsx(ne,{...W}),name:"profile",path:"/profile",element:e.jsx(nt,{})}]},{title:"Attendance",layout:"dashboard",pages:[{icon:e.jsx(Ma,{...W}),name:"Records",menu:!0,menuList:[{name:"Students Log",path:"/attendance/students",element:e.jsx(lt,{})},{name:"Staff Log",path:"/attendance/staff",element:e.jsx(it,{})}]}]},{title:"Tools",layout:"dashboard",pages:[{icon:e.jsx(oe,{...W}),name:"Setup",path:"/card",element:e.jsx(ct,{})},{icon:e.jsx(La,{...W}),name:"Register",menu:!0,menuList:[{name:"Students",path:"/register/students",element:e.jsx(dt,{})},{name:"Staff",path:"/register/staff",element:e.jsx(mt,{})}]}]},{title:"Reports & Analytics",layout:"dashboard",pages:[{icon:e.jsx(Pa,{...W}),name:"Insights",path:"/reports",menu:!0,menuList:[{name:"Students Report",path:"/reports/students",element:e.jsx(ut,{})},{name:"Staff Report",path:"/reports/staff",element:e.jsx(ot,{})}]}]}],gt=[{title:"Authentication",layout:"auth",pages:[{name:"sign up",path:"/sign-up",element:e.jsx(xt,{})},{name:"log in",path:"/login",element:e.jsx(ht,{})},{name:"verify email",path:"/verify-email",element:e.jsx(pt,{})}]}];function ft({isOpen:t,onClose:r}){const{logOut:l}=E(),i=U();async function n(){try{await l(),i("/",{replace:!0})}catch(s){console.log(s)}}return h.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),t?e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm"}),e.jsxs(H.div,{className:"relative z-10 bg-white rounded-lg shadow-lg p-8 w-80 text-center gap-2",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:[e.jsx(a.Typography,{variant:"h1",className:"font-['Aquire'] bg-gradient-to-r from-black/40 via-black/60 to-black/80 bg-clip-text",style:{WebkitTextFillColor:"transparent"},children:"ATS"}),e.jsx(a.Typography,{variant:"h6",color:"gray",className:"mb-4 font-normal font-['Nunito']",children:"Are you sure you want to log out?"}),e.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[e.jsx(a.Button,{color:"red",onClick:n,variant:"outlined",children:"Log Out"}),e.jsx(a.Button,{color:"blue-gray",onClick:r,variant:"outlined",children:"Cancel"})]})]})]}):null}function Ue(){const[t,r]=K(),{sidenavType:l}=t,{currentUser:i,loading:n}=E(),[s,o]=h.useState(null),[u,j]=h.useState(!1);if(h.useEffect(()=>{o(i?i.user_metadata:null)},[i]),n||!s)return e.jsx(be,{});const x=()=>j(!u);return e.jsxs(H.div,{className:"min-h-screen flex flex-col bg-blue-gray-50/50",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx(xe,{routes:Re,brandImg:l==="dark"?"/img/ATS.png":"/img/ATS_dark.png",onLogOutClick:x}),e.jsxs("div",{className:"flex-1 xl:ml-80 flex flex-col",children:[e.jsx(Pe,{user:s}),e.jsx(qe,{}),e.jsx(a.IconButton,{size:"lg",color:"white",className:"fixed bottom-8 right-8 z-40 rounded-full shadow-blue-gray-900/10",ripple:!1,onClick:()=>Le(r,!0),children:e.jsx(qa,{className:"h-5 w-5"})}),e.jsx("div",{className:"flex-grow p-4",children:e.jsx(me,{children:Re.map(({layout:w,pages:d},c)=>w==="dashboard"&&d.map(({path:m,element:p,menu:f,menuList:b},A)=>e.jsxs(B.Fragment,{children:[e.jsx(Y,{exact:!0,path:m,element:p}),f&&b&&b.map((g,v)=>e.jsx(Y,{exact:!0,path:g.path,element:g.element},`${A}-${v}`))]},A)))})}),e.jsx("div",{className:"mt-auto flex justify-center items-center",children:e.jsx("div",{className:"w-full max-w-screen-xl p-2",children:e.jsx(pe,{})})})]}),u&&e.jsx(ft,{onClose:()=>j(!1),isOpen:u})]})}Ue.displayName="/src/layout/dashboard.jsx";function le(){return e.jsx(V.div,{className:"relative min-h-screen w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(me,{children:gt.map(({layout:t,pages:r})=>t==="auth"&&r.map(({path:l,element:i})=>e.jsx(Y,{exact:!0,path:l,element:i})))})})}le.displayName="/src/layout/Auth.jsx";function Ve(){const t=new Date().getFullYear(),r=h.useRef(),[l,i]=h.useState(null);h.useState(null);const n=o=>{o.preventDefault(),i(r.current.value)},s=async o=>{if(o.preventDefault(),!l){window.alert("Please enter a valid email address.");return}try{const u=await fetch("http://localhost:3000/api/v1/client/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l})});if(console.log(u),u.ok){window.alert("Subscription sent successfully!"),i("");return}else window.alert("Failed to send subscription request. Please try again.")}catch(u){console.error("Error:",u),window.alert("An error occured. Please try again.")}};return e.jsxs(V.div,{className:"min-h-screen bg-transparent",id:"home",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx(ge,{brandName:"ATS"}),e.jsx(fe,{}),e.jsx("section",{className:" flex items-center justify-center text-center pt-40 bg-gradient-to-b from-black via-black/90 to-black/80",id:"about",children:e.jsx("div",{className:"container px-4 sm:px-6 lg:px-8 xl:px-10",children:e.jsx("div",{className:"flex justify-center gap-x-4 lg:gap-x-5",children:e.jsxs("div",{className:"w-full lg:w-2/3 items-center justify-center",children:[e.jsx("h2",{className:"text-white mb-4 font-['Nunito'] text-3xl",children:"ATS - Attendance Tracking System"}),e.jsx("p",{className:"text-white/70 mb-20 font-['Nunito'] font-light",children:"ATS (Attendance Tracking System) is an innovative solution for efficient attendance management in schools and organizations. Designed for quick and accurate check-ins, ATS enables real-time data collection and enhances accountability. Streamline your attendance process and create a more productive environment with this advanced system."})]})})})}),e.jsxs("section",{id:"contact",children:[e.jsx("div",{className:"py-20 text-white text-center bg-cover bg-center bg-no-repeat bg-fixed",style:{backgroundImage:"url('/img/bg-signup.jpg')"},children:e.jsxs("div",{className:"container mx-auto px-4 lg:px-8",children:[e.jsx("i",{className:"far fa-paper-plane fa-2x mb-4"}),e.jsx("h2",{className:"text-3xl font-semibold mb-6 font-['Nunito']",children:"Subscribe to get registered!"}),e.jsx("form",{className:"w-full max-w-lg mx-auto",id:"contactForm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-center font-['Nunito']",children:[e.jsx("input",{className:"px-4 py-2 rounded-lg border border-gray-700 bg-gray-800 text-white w-full sm:w-2/3 font-thin focus:outline-none focus:ring-1 focus:ring-blue-gray-200 transition duration-300",id:"emailAddress",type:"email",placeholder:"Enter email address...","aria-label":"Enter email address...",ref:r,onChange:o=>n(o)}),e.jsx("button",{className:"mt-4 sm:mt-0 sm:ml-4 px-6 py-2 rounded-lg bg-blue-gray-800 text-white hover:bg-opacity-70 transition duration-300",id:"submitButton",type:"submit",onClick:o=>s(o),children:"Notify Me!"})]})})]})}),e.jsx("div",{className:"py-20 bg-black text-white font-['Nunito']",children:e.jsxs("div",{className:"container mx-auto px-4 lg:px-8",children:[e.jsxs("div",{className:"flex flex-wrap justify-center gap-6",children:[e.jsx("div",{className:"w-full sm:w-1/3 lg:w-1/4",children:e.jsxs("div",{className:"bg-gradient-to-b from-blue-gray-900 via-blue-gray-900/75 to-blue-gray-900/40 p-6 rounded-lg text-center",children:[e.jsx("i",{className:"fas fa-map-marked-alt text-primary mb-4"}),e.jsx("h4",{className:"text-xl font-light",children:"Address"}),e.jsx("hr",{className:"my-4 mx-auto w-16 border-t border-blue-500"}),e.jsx("p",{className:"text-sm font-thin",children:"Kigali, Rwanda"})]})}),e.jsx("div",{className:"w-full sm:w-1/3 lg:w-1/4",children:e.jsxs("div",{className:"bg-gradient-to-b from-blue-gray-900 via-blue-gray-900/75 to-blue-gray-900/40 p-6 rounded-lg text-center",children:[e.jsx("i",{className:"fas fa-envelope text-primary mb-4"}),e.jsx("h4",{className:"text-xl font-light",children:"Email"}),e.jsx("hr",{className:"my-4 mx-auto w-16 border-t border-blue-500"}),e.jsx("p",{className:"text-sm font-thin",children:e.jsx("a",{href:"mailto:limitify.ai@gmail.com",children:"limitify.ai@gmail.com"})})]})}),e.jsx("div",{className:"w-full sm:w-1/3 lg:w-1/4",children:e.jsxs("div",{className:"bg-gradient-to-b from-blue-gray-900 via-blue-gray-900/75 to-blue-gray-900/40 p-6 rounded-lg text-center",children:[e.jsx("i",{className:"fas fa-mobile-alt text-primary mb-4"}),e.jsx("h4",{className:"text-xl font-light",children:"Phone"}),e.jsx("hr",{className:"my-4 mx-auto w-16 border-t border-blue-500"}),e.jsx("p",{className:"text-sm font-thin",children:"+250 0793 109 171"})]})})]}),e.jsxs("div",{className:"flex justify-center mt-8",children:[e.jsx("a",{className:"text-white mx-3",href:"https://x.com/k4ldrick",children:e.jsx("i",{className:"fab fa-x-twitter"})}),e.jsx("a",{className:"text-white mx-3",href:"https://www.instagram.com/limitify/",children:e.jsx("i",{className:"fab fa-instagram"})})]})]})})]}),e.jsx("footer",{className:"bg-black py-4 text-center text-gray-50 font-['Nunito']",children:e.jsx("div",{className:"container mx-auto px-4 lg:px-5 font-normal",children:e.jsxs("p",{children:["ATS © ",t," Powered by Limitify"]})})})]})}Ve.displayName="/src/layout/Welcome.jsx";function yt({element:t}){const{currentUser:r,isloading:l}=E(),i=ie(),n=U();return h.useEffect(()=>{if(localStorage.setItem("lastVisitedRoute",i.pathname),l)return e.jsx(be,{brandName:"ATS"});r||n("/auth/login")},[r,n,i]),t}const bt=new Ba;function jt(){const{currentUser:t}=E();return e.jsxs("div",{children:[e.jsx(Oa,{client:bt,children:e.jsxs(me,{children:[e.jsx(Y,{path:"/",element:t&&t.session?e.jsx(Ae,{to:"/dashboard/home"}):e.jsx(Ve,{})}),e.jsx(Y,{exact:!0,path:"/dashboard/*",element:e.jsx(yt,{element:e.jsx(Ue,{})})}),e.jsx(Y,{path:"/auth/*",element:e.jsx(le,{})}),e.jsx(Y,{path:"*",element:t&&t.session?e.jsx(Ae,{to:"/dashboard/home"}):e.jsx(le,{})})]})}),e.jsx(za,{position:"bottom-right",autoClose:"3000",theme:"colored",transition:Ya,pauseOnHover:!0})]})}_a.createRoot(document.getElementById("root")).render(e.jsx(B.StrictMode,{children:e.jsx(Wa,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(Xa,{children:e.jsx(a.ThemeProvider,{children:e.jsx(he,{children:e.jsx(jt,{})})})})})}));
