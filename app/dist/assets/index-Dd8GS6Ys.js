import{R as O,P as S,j as e,r as a,F as Fe,a as Ze,N as Se,b as Je,u as oe,c as x,d as H,e as Qe,f as ea,L as J,g as ne,h as aa,i as ta,C as sa,k as ra,m as V,B as y,l as $,n as I,o as M,p as Ee,q as na,s as la,t as Ie,v as oa,w as ia,x as re,y as ie,z as ca,A as ce,D as da,E as W,G as ma,H as ua,I as ha,J as xa,$ as pa,K as ga,M as De,O as fa,Q as de,S as ya,T as $e,U as ba,V as ja,W as Na,X as va,Y as wa,Z as Ca,_ as Ta,a0 as Sa,a1 as ka,a2 as Aa,a3 as Ra,a4 as Fa,a5 as Ea,a6 as Ia,a7 as Da,a8 as $a,a9 as Ma,aa as La,ab as Pa,ac as Ba,ad as me,ae as Y,af as Oa,ag as qa,ah as ke,ai as za,aj as Ya,ak as _a,al as Ua}from"./vendor-CvURDcCG.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function l(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=l(n);fetch(n.href,s)}})();const ue=O.createContext(null);ue.displayName="MaterialTailwindContext";function Wa(t,r){switch(r.type){case"OPEN_SIDENAV":return{...t,openSidenav:r.value};case"SIDENAV_TYPE":return{...t,sidenavType:r.value};case"SIDENAV_COLOR":return{...t,sidenavColor:r.value};case"TRANSPARENT_NAVBAR":return{...t,transparentNavbar:r.value};case"FIXED_NAVBAR":return{...t,fixedNavbar:r.value};case"OPEN_CONFIGURATOR":return{...t,openConfigurator:r.value};default:throw new Error(`Unhandled action type: ${r.type}`)}}function he({children:t}){const r={openSidenav:!1,sidenavColor:"black",sidenavType:"white",transparentNavbar:!0,fixedNavbar:!1,openConfigurator:!1},[l,o]=O.useReducer(Wa,r),n=O.useMemo(()=>[l,o],[l,o]);return e.jsx(ue.Provider,{value:n,children:t})}function K(){const t=O.useContext(ue);if(!t)throw new Error("useMaterialTailwindController should be used inside the MaterialTailwindControllerProvider.");return t}he.displayName="/src/context/index.jsx";he.propTypes={children:S.node.isRequired};const Me=(t,r)=>t({type:"OPEN_SIDENAV",value:r}),Ae=(t,r)=>t({type:"SIDENAV_TYPE",value:r}),Ha=(t,r)=>t({type:"SIDENAV_COLOR",value:r}),Le=(t,r)=>t({type:"OPEN_CONFIGURATOR",value:r});function xe({brandImg:t="/img/ATS.png",brandName:r="ATS",routes:l,onLogOutClick:o}){const[n,s]=K(),{sidenavColor:d,sidenavType:h,openSidenav:b}=n,[p,C]=O.useState({}),j=i=>{C(m=>({...m,[i]:!m[i]}))},c={dark:"bg-gradient-to-br from-gray-800 to-gray-900",white:"bg-white shadow-sm",transparent:"bg-transparent"};return e.jsxs("aside",{className:`${c[h]} ${b?"translate-x-0":"-translate-x-80"} fixed inset-0 z-50 my-4 ml-4 h-[calc(100vh-32px)] w-72 rounded-xl transition-transform duration-300 xl:translate-x-0 border border-blue-gray-100 
    sm:w-56 md:w-64 xl:w-72`,children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"py-6 px-8 text-center flex gap-3 cursor-default",children:[e.jsx("img",{src:t,alt:"Logo",width:"25px",height:"15px",className:"object-contain"}),e.jsx(a.Typography,{variant:"h4",color:h==="dark"?"white":"blue-gray",className:"font-['Aquire'] font-bold",children:r})]}),e.jsx(a.IconButton,{variant:"text",color:"white",size:"sm",ripple:!1,className:"absolute right-0 top-0 grid rounded-br-none rounded-tl-none xl:hidden",onClick:()=>Me(s,!1),children:e.jsx(Fe,{strokeWidth:2.5,className:h==="dark"?"h-5 w-5 text-white":"h-5 w-5 text-black"})})]}),e.jsxs("div",{className:"m-4",children:[l.map(({layout:i,title:m,pages:u},f)=>e.jsxs("ul",{className:"mb-4 flex flex-col gap-1",children:[m&&e.jsx("li",{className:"mx-3.5 mt-4 mb-2",children:e.jsx(a.Typography,{variant:"small",color:h==="dark"?"white":"blue-gray",className:"font-black uppercase opacity-75",children:m})}),u.map(({icon:A,name:g,path:v,menu:F,menuList:T})=>F?e.jsxs(a.Menu,{placement:"right-start",open:p[g]||!1,handler:()=>j(g),offset:15,children:[e.jsx(a.MenuHandler,{className:`flex items-center justify-between p-3 ${h==="dark"?"hover:bg-opacity-20":""} `,children:e.jsxs(a.MenuItem,{children:[e.jsxs("li",{className:`flex gap-4 ${h==="dark"?"text-white":"text-blue-gray-500"} font-normal font-['Nunito'] items-center`,children:[A,e.jsx(a.Typography,{color:"inherit",className:"font-normal font-['Nunito'] capitalize",children:g})]}),e.jsx(Ze,{strokeWidth:2.5,className:`h-3.5 w-3.5 transition-transform ${p[g]?"rotate-90":""} ${h==="dark"?"text-white":"text-blue-gray-500"}`})]})}),e.jsx(a.MenuList,{children:T.map(({name:w,path:Q})=>e.jsx(Se,{to:`/${i}${Q}`,className:"border-none",children:({isActive:z})=>e.jsx(a.Button,{variant:z?"gradient":"text",color:z?d:h==="dark"?"blue-gray":"white",className:`flex items-center gap-4 px-4 capitalize ${z?d:"text-blue-gray-500"}`,fullWidth:!0,children:e.jsx(a.Typography,{color:"inherit",className:"font-normal capitalize font-['Nunito']",children:w})})},w))})]},g):e.jsx("li",{children:e.jsx(Se,{to:`/${i}${v}`,children:({isActive:w})=>e.jsxs(a.Button,{variant:w?"gradient":"text",color:w?d:h==="dark"?"white":"blue-gray",className:"flex items-center gap-4 px-4 capitalize",fullWidth:!0,children:[A,e.jsx(a.Typography,{color:"inherit",className:"font-normal font-['Nunito'] capitalize",children:g})]})})},g))]},f)),e.jsxs(a.Button,{variant:"text",color:"red",onClick:o,className:"flex items-center gap-4 px-4 capitalize",fullWidth:!0,children:[e.jsx(Je,{className:"w-5 h-5 text-inherit"}),e.jsx(a.Typography,{color:"inherit",className:"font-normal capitalize font-['Nunito']",children:"Log Out"})]})]})]})}xe.propTypes={brandImg:S.string,brandName:S.string,routes:S.arrayOf(S.object).isRequired};xe.displayName="/src/widgets/layout/sidnave.jsx";function Pe({user:t}){const[r,l]=K(),{openSidenav:o}=r,{pathname:n}=oe(),[s,d]=n.split("/").filter(i=>i!==""),[h,b]=x.useState(null),p=x.useRef(),C=H(),j=i=>{i.preventDefault(),b(p.current.value)},c=()=>{C(`/dashboard/reports/students?search=${h}`)};return e.jsx(a.Navbar,{color:"transparent",className:"rounded-xl transition-all px-0 py-1",fullWidth:!0,children:e.jsxs("div",{className:"flex flex-col-reverse justify-between gap-6 md:flex-row md:items-center p-4",children:[e.jsxs("div",{className:"capitalize",children:[e.jsxs(a.Breadcrumbs,{className:"bg-transparent p-0 transition-all",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal opacity-50",children:s}),e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:d})]}),e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"uppercase",children:d})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"mr-auto md:mr-4 md:w-56 flex items-center border justify-between px-2 rounded-md border-blue-gray-100",children:[e.jsx("input",{id:"search",placeholder:"Search",name:"search",ref:p,onChange:i=>j(i),className:"p-1 bg-transparent outline-none text-blue-gray-800 font-['Roboto'] font-thin text-sm flex-1"}),e.jsx(Qe,{className:"w-4 h-4 text-blue-gray-200 cursor-pointer",strokeWidth:1,onClick:()=>c()})]}),e.jsx(a.IconButton,{variant:"text",color:"blue-gray",className:"grid xl:hidden",onClick:()=>Me(l,!o),children:e.jsx(ea,{strokeWidth:2,className:"h-6 w-6 text-blue-gray-500"})}),e.jsxs(J,{to:"/dashboard/profile",children:[e.jsxs(a.Button,{variant:"text",color:"blue-gray",className:"hidden items-center gap-1 px-4 xl:flex normal-case font-['Nunito'] font-normal",children:[e.jsx(a.Avatar,{src:t&&t.profile||"/img/no-profile.jpg",alt:"item-1",size:"xs",variant:"circular"}),t==null?void 0:t.displayName]}),e.jsx(a.IconButton,{variant:"text",color:"blue-gray",className:"grid xl:hidden",children:e.jsx(a.Avatar,{src:t&&t.profile||"/img/no-profile.jpg",alt:"item-1",size:"xs",variant:"circular",className:"w-5 h-5"})})]})]})]})})}Pe.displayName="/src/widgets/layout/dashboard-navbar.jsx";function Be(){const[t,r]=K(),{openConfigurator:l,sidenavColor:o,sidenavType:n}=t,s={black:"from-black to-black border-gray-200",teal:"from-teal-400 to-teal-600",blue:"from-blue-400 to-blue-600",orange:"from-orange-400 to-orange-600"};return e.jsxs("aside",{className:`fixed top-0 right-0 z-50 h-screen w-96 bg-white px-2.5 pb-2 shadow-lg transition-transform duration-300 ${l?"translate-x-0":"translate-x-96"}`,children:[e.jsxs("div",{className:"flex items-start justify-between px-6 pt-8 pb-6",children:[e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h5",color:"blue-gray",children:"Appearance"}),e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"See our dashboard options."})]}),e.jsx(a.IconButton,{variant:"text",color:"blue-gray",onClick:()=>Le(r,!1),children:e.jsx(Fe,{strokeWidth:2.5,className:"h-5 w-5"})})]}),e.jsxs("div",{className:"py-4 px-6",children:[e.jsxs("div",{className:"mb-12",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",children:"Sidenav Colors"}),e.jsx("div",{className:"mt-3 flex items-center gap-2",children:Object.keys(s).map(d=>e.jsx("span",{className:`h-6 w-6 cursor-pointer rounded-full border bg-gradient-to-br transition-transform hover:scale-105 ${s[d]} ${o===d?"border-black":"border-transparent"}`,onClick:()=>Ha(r,d)},d))})]}),e.jsxs("div",{className:"mb-12",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",children:"Sidenav Types"}),e.jsx(a.Typography,{variant:"small",color:"gray",children:"Choose between 2 different sidenav types."}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx(a.Button,{variant:n==="dark"?"gradient":"outlined",onClick:()=>Ae(r,"dark"),children:"Dark"}),e.jsx(a.Button,{variant:n==="white"?"gradient":"outlined",onClick:()=>Ae(r,"white"),children:"White"})]})]})]})]})}Be.displayName="/src/widgets/layout/configurator.jsx";function pe({brandName:t="Limitify"}){const r=new Date().getFullYear();return e.jsx("footer",{className:"py-2 bottom-0",children:e.jsx("div",{className:"flex w-full items-center justify-center px-2 font-['Nunito']",children:e.jsxs(a.Typography,{variant:"small",className:"font-normal text-inherit",children:["ATS © ",r," Powered by Limitify"]})})})}pe.propTypes={brandName:S.string,routes:S.arrayOf(S.object)};pe.displayName="/src/widgets/layout/footer.jsx";S.string,S.arrayOf(S.object).isRequired,S.node;function ge({brandName:t="ATS",routes:r=[{name:"About",path:"#about",id:"about"},{name:"Contact",path:"#contact",id:"contact"}]}){var i;const[l,o]=K(),{fixedNavbar:n,openSidenav:s}=l,{pathname:d}=oe(),h=H(),[b,p]=x.useState(!1),[C,j]=x.useState(""),c=((i=document.querySelector("nav"))==null?void 0:i.offsetHeight)||0;return x.useEffect(()=>{const m=()=>{window.scrollY-c>50?p(!0):p(!1)};return window.addEventListener("scroll",m),()=>window.removeEventListener("scroll",m)},[c]),x.useEffect(()=>{const m=new IntersectionObserver(f=>{f.forEach(A=>{A.isIntersecting&&A.target.id!=="home"&&(j(A.target.id),h(`#${A.target.id}`,{replace:!0}))})},{threshold:1}),u=document.querySelectorAll("section");return u.forEach(f=>m.observe(f)),()=>{u.forEach(f=>m.unobserve(f))}},[h]),x.useEffect(()=>{(d==="/"||d==="")&&(j("home"),h("/",{replace:!0}))},[d,h]),e.jsx(a.Navbar,{color:b?"white":"transparent",className:`transition-all fixed top-0 z-40 px-8 py-2 ${b?"bg-black bg-opacity-90":""}`,fullWidth:!0,blurred:n,children:e.jsxs("div",{className:"flex justify-between gap-6 md:flex-row md:items-center",children:[e.jsx("div",{className:"capitalize",children:e.jsx(a.Typography,{as:"a",href:"#home",variant:"h4",className:"font-['Aquire'] bg-gradient-to-r from-white/40 via-white/60 to-white/80 bg-clip-text",style:{WebkitTextFillColor:"transparent"},children:t})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("ul",{className:"flex items-center gap-4",children:r.map(({name:m,path:u,id:f})=>e.jsx("li",{children:e.jsx(a.Typography,{as:"a",href:u,variant:"h6",className:`py-0.5 px-1 text-inherit transition-colors hover:text-blue-gray-500 font-['Nunito'] font-light ${C===f?"text-blue-gray-500":""}`,children:m})},m))}),e.jsxs(J,{to:"/auth/login",children:[e.jsxs(a.Button,{variant:"text",color:"blue-gray",className:"hidden items-center gap-1 px-4 xl:flex normal-case font-['Nunito'] font-normal",children:[e.jsx(ne,{className:"h-5 w-5 text-blue-gray-500"}),"Log In"]}),e.jsx(a.IconButton,{variant:"text",color:"blue-gray",className:"grid xl:hidden",children:e.jsx(ne,{className:"h-5 w-5 text-blue-gray-500"})})]})]})]})})}ge.propTypes={brandName:S.string,brandLink:S.string,routes:S.arrayOf(S.object)};ge.displayName="/src/widgets/layout/welcome-navbar.jsx";function fe({brandName:t="ATS",brandDesc:r="Attendance Tracking System"}){return K(),e.jsxs("section",{className:"relative w-full min-h-screen py-[15rem] bg-cover bg-center bg-no-repeat bg-scroll ",style:{backgroundImage:"url('/img/bg-masthead.jpg')"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-50"}),e.jsx("div",{className:"relative z-10 flex h-full items-center justify-center",id:"home",children:e.jsxs("div",{className:"text-center text-white mt-10",children:[e.jsx("h1",{className:"mx-auto my-0 text-5xl bg-clip-text font-bold font-['Aquire']",style:{backgroundImage:"linear-gradient(to bottom, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 1))",WebkitTextFillColor:"transparent"},children:"ATS"}),e.jsx("h2",{className:"mt-4 text-xl opacity-75 mb-5 font-['Nunito']",children:"Attendance Tracking System"}),e.jsx("a",{href:"#about",className:"font-['Varela_Round'] mt-6 inline-block py-2 px-6 text-white bg-blue-gray-800 rounded-md hover:bg-opacity-70 transition duration-300",children:"Get Started"})]})})]})}fe.propTypes={brandName:S.string,brandDesc:S.string};fe.displayName="/src/widgets/layout/masthead.jsx";const ae={chart:{toolbar:{show:!1}},title:{show:""},dataLabels:{enabled:!1},xaxis:{axisTicks:{show:!1},axisBorder:{show:!1},labels:{style:{colors:"#37474f",fontSize:"13px",fontFamily:"inherit",fontWeight:300}}},yaxis:{labels:{style:{colors:"#37474f",fontSize:"13px",fontFamily:"inherit",fontWeight:300}}},grid:{show:!0,borderColor:"#dddddd",strokeDashArray:5,xaxis:{lines:{show:!0}},padding:{top:5,right:20}},fill:{opacity:.8},tooltip:{theme:"dark"}};function Va({n:t}){const{number:r}=aa({from:{number:0},number:t,delay:200,config:{mass:1,tension:30,friction:10}});return e.jsx(ta.div,{children:r.to(l=>l.toFixed(0))})}function B({color:t="blue",icon:r,title:l,value:o,footer:n=null}){return e.jsxs(a.Card,{className:"border border-blue-gray-100 shadow-sm",children:[e.jsx(a.CardHeader,{variant:"gradient",color:t,floated:!1,shadow:!1,className:"absolute grid h-12 w-12 place-items-center",children:r}),e.jsxs(a.CardBody,{className:"p-4 text-right",children:[e.jsx(a.Typography,{variant:"small",className:"font-normal text-blue-gray-600",children:l}),e.jsx(a.Typography,{variant:"h4",color:"blue-gray",children:e.jsx(Va,{n:o})})]}),n&&e.jsx(a.CardFooter,{className:"border-t border-blue-gray-50 p-4",children:n})]})}B.propTypes={color:S.oneOf(["white","blue-gray","gray","brown","deep-orange","orange","amber","yellow","lime","light-green","green","teal","cyan","light-blue","blue","indigo","deep-purple","purple","pink","red"]),icon:S.node.isRequired,title:S.node.isRequired,value:S.node.isRequired,footer:S.node};B.displayName="/src/widgets/cards/statistics-card.jsx";function ye({title:t,action:r=null,description:l=null,details:o={}}){return e.jsxs(a.Card,{color:"transparent",shadow:!1,children:[e.jsxs(a.CardHeader,{color:"transparent",shadow:!1,floated:!1,className:"mx-0 mt-0 mb-4 flex items-center justify-between gap-4",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",children:t}),r]}),e.jsxs(a.CardBody,{className:"p-0",children:[l&&e.jsx(a.Typography,{variant:"small",className:"font-normal text-blue-gray-500",children:l}),l&&o?e.jsx("hr",{className:"my-8 border-blue-gray-50"}):null,o&&e.jsx("ul",{className:"flex flex-col gap-4 p-0",children:Object.keys(o).map((n,s)=>e.jsxs("li",{className:"flex items-center gap-4",children:[e.jsxs(a.Typography,{variant:"small",color:"blue-gray",className:"font-semibold capitalize",children:[n,":"]}),typeof o[n]=="string"?e.jsx(a.Typography,{variant:"small",className:"font-normal text-blue-gray-500",children:o[n]}):o[n]]},s))})]})]})}ye.propTypes={title:S.string.isRequired,description:S.node,details:S.object};ye.displayName="/src/widgets/cards/profile-info-card.jsx";S.string.isRequired,S.string.isRequired,S.node.isRequired,S.node;function te({color:t="blue",chart:r,title:l,description:o,footer:n=null}){return e.jsxs(a.Card,{className:"border border-blue-gray-100 shadow-sm",children:[e.jsx(a.CardHeader,{variant:"gradient",color:t,floated:!1,shadow:!1,children:e.jsx(sa,{...r})}),e.jsxs(a.CardBody,{className:"px-6 pt-0",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",children:l}),e.jsx(a.Typography,{variant:"small",className:"font-normal text-blue-gray-600",children:o})]}),n&&e.jsx(a.CardFooter,{className:"border-t border-blue-gray-50 px-6 py-5",children:n})]})}te.propTypes={color:S.oneOf(["white","blue-gray","gray","brown","deep-orange","orange","amber","yellow","lime","light-green","green","teal","cyan","light-blue","blue","indigo","deep-purple","purple","pink","red"]),chart:S.object.isRequired,title:S.node.isRequired,description:S.node.isRequired,footer:S.node};te.displayName="/src/widgets/charts/statistics-chart.jsx";const Ka="https://pkgkheswpxfyewfzanxr.supabase.co",Ga="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBrZ2toZXN3cHhmeWV3ZnphbnhyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE1NzQxMDUsImV4cCI6MjA0NzE1MDEwNX0.4h-seHg8yUDTrRw_HGwQBw3vPDdy_eQR4f6xKcuIX5A",L=ra(Ka,Ga,{persistSession:!0,localStorage:sessionStorage});function be({brandName:t="ATS"}){return e.jsxs(V.div,{className:"flex flex-col items-center justify-center min-h-screen bg-blue-gray-50/50 gap-y-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx(a.Typography,{variant:"h1",className:"font-['Aquire'] bg-gradient-to-r from-black/40 via-black/60 to-black/80 bg-clip-text",style:{WebkitTextFillColor:"transparent"},children:t}),e.jsx(a.Spinner,{color:"gray",className:"h-12 w-12 mb-4"})]})}const Oe=O.createContext();function E(){return x.useContext(Oe)}function Xa({children:t}){const[r,l]=x.useState(null),[o,n]=x.useState(!0),s=H();x.useEffect(()=>{(async()=>{try{const{data:{user:i},error:m}=await L.auth.getUser();if(i){l(i);const u=localStorage.getItem("lastVisitedRoute");s(u||"/dashboard/home")}else l(null);m&&l(null)}catch(i){console.error("Error checking session:",i),l(null)}finally{n(!1)}})();const{data:c}=L.auth.onAuthStateChange((i,m)=>{if(i==="SIGNED_IN"){l(m.user);const u=localStorage.getItem("lastVisitedRoute");s(u||"/dashboard/home"),n(!1)}else i==="SIGNED_OUT"&&(l(null),s("/auth/login"))});return()=>{c&&c.subscription.unsubscribe()}},[s]);async function d(j,c,i,m){try{n(!0);const{data:u,error:f}=await L.auth.signUp({email:c,password:m,options:{data:{displayName:j,phone:i}}});if(f)throw y(f.message,{type:"error"}),f;if(!u)throw new Error("User sign-up failed. No user data returned.");try{const A=await $.post("https://ats-phyn.onrender.com/api/v1/client/create",{},{headers:{"x-tenant-id":u.user.id}});console.log("Client created successfully:",A.data)}catch(A){console.error("Failed to create client:",A),y("Failed to create client. Please try again later.",{type:"error"})}y("Account created successfully! Please check your email for verification.",{type:"success"}),s("/auth/verify-email")}catch(u){console.log("Error during signup:",u)}finally{n(!1)}}async function h(j,c){try{n(!0);const{data:i,error:m}=await L.auth.signInWithPassword({email:j,password:c});if(m)throw y("Login failed: "+m.message,{type:"error"}),m;const{data:u,error:f}=await L.auth.getUser();if(u)l(u),s("/dashboard/home");else throw console.error("No session after login"),new Error("No user session found.");if(f)throw console.error("Error getting session:",f),f}catch(i){console.log("Error during login:",i)}finally{n(!1)}}async function b(j,c,i){try{let m=null;if(i){const A=i.name.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_.-]/g,""),g=`user-${Date.now()}-${A}`;try{const{data:v,error:F}=await L.storage.from("profile_images").upload(g,i,{cacheControl:"3600",upsert:!1});if(F)throw console.error("Error uploading profile image:",F.message),new Error("Failed to upload profile image.");const{data:T}=L.storage.from("profile_images").getPublicUrl(g);m=T.publicUrl}catch(v){throw console.error("Error uploading profile image:",v),new Error("Failed to upload profile image.")}}const{data:u,error:f}=await L.auth.updateUser({email:c,data:{displayName:j,profile:m||null}});if(f)throw console.error("Error updating user information:",f),y(f.message,{type:"error"}),f;y("Account updated successfully!",{type:"success"}),s("/dashboard/home")}catch(m){console.error("Error during update:",m),y("Failed to update account. Please try again.",{type:"error"})}}async function p(){try{await L.auth.signOut(),l(null),s("/auth/login")}catch{y("Error during logout",{type:"error"})}}const C={currentUser:r,loading:o,signup:d,logIn:h,logOut:p,updateInfo:b};return e.jsx(Oe.Provider,{value:C,children:o?e.jsx(be,{}):t})}const se="https://ats-phyn.onrender.com/api/v1",D=async(t,r)=>{try{const l=await $.get(`${se}/${t}`,{headers:{"x-tenant-id":r}});return t.includes("list")||t==="/attendance/class-details"?l.data.data:l.data}catch(l){throw l}},qe=async(t,r,l)=>{if(l){const o=new FormData;o.append("csv",l);try{const n=await $.post(`${se}/${t}`,o,{headers:{"Content-Type":"multipart/form-data","x-tenant-id":r}});return y("File Uploaded",{type:"success"}),n.data}catch(n){y(n.response.data.error,{type:"error"})}}else console.error("No file uploaded")},ze=async t=>{try{const r=await $.post(`${se}/rfid/assign`,{},{headers:{"x-tenant-id":t}});r.status===201?y(r.data.msg,{type:"success"}):r.status===202?y(r.data.msg,{type:"info"}):y(r.data.msg,{type:"warning"})}catch(r){y(r.response.data.message,{type:"error"})}},Za=async(t,r)=>{var l,o;try{const n=await $.post(`${se}/attendance/manual`,{data:t},{headers:{"x-tenant-id":r},validateStatus:s=>s>=200&&s<500});n.status===201?y(n.data.msg,{type:"success"}):n.status===400?y(n.data.msg,{type:"warning"}):y(n.data.msg,{type:"info"})}catch(n){y(((o=(l=n.response)==null?void 0:l.data)==null?void 0:o.message)||"An error occurred",{type:"error"})}},Ye=()=>{const{currentUser:t,loading:r}=E(),l=t==null?void 0:t.id,{data:o,error:n}=I({queryKey:["rfidCards"],queryFn:()=>D("rfid/list",l),staleTime:3e4,enabled:!!l}),{data:s,error:d}=I({queryKey:["activeCards"],queryFn:()=>D("rfid/count-active",l),staleTime:3e4,enabled:!!l}),{data:h,error:b}=I({queryKey:["unassignedCards"],queryFn:()=>D("rfid/count-inactive",l),staleTime:3e4,enabled:!!l});return{rfidCards:o,activeCards:(s==null?void 0:s.data)||0,unassignedCards:(h==null?void 0:h.data)||0,loading:r}},_e=t=>{const{currentUser:r}=E();if(!(r!=null&&r.id))throw new Error("User ID is missing from the authentication context.");const l=r.id,{data:o,error:n}=I({queryKey:["students",t],queryFn:()=>D("student/list",l),staleTime:3e4,enabled:!!l}),{data:s,error:d}=I({queryKey:["student"],queryFn:()=>D(`student/search/${t}`,l),enabled:!!l&&!!t,staleTime:5e3}),{data:h,error:b}=I({queryKey:["activeStudents"],queryFn:()=>D("student/active-students",l),staleTime:3e4,enabled:!!l}),{data:p,error:C}=I({queryKey:["unassignedStudents"],queryFn:()=>D("student/unassigned-students",l),staleTime:3e4,enabled:!!l});return{students:o,student:s?s.data:null,activeStudents:(h==null?void 0:h.activeStudents.length)||0,unassignedStudents:(p==null?void 0:p.unassignedStudents.length)||0}},Ue=t=>{const{currentUser:r,loading:l}=E(),o=M(t).format("YYYY-MM-DD"),n=r==null?void 0:r.id,{data:s,error:d}=I({queryKey:["classAttendance",o],queryFn:()=>D(`attendance/class-details?date=${o}`,n),staleTime:3e4}),{data:h,error:b}=I({queryKey:["presence"],queryFn:()=>D("attendance/count-present",n),staleTime:3e4}),{data:p,error:C}=I({queryKey:["late"],queryFn:()=>D("attendance/count-late",n),staleTime:3e4}),{data:j,error:c}=I({queryKey:["absent"],queryFn:()=>D("attendance/count-absent",n),staleTime:3e4});return{classAttendance:s?s.data:[],presence:h?h.data:0,late:p?p.data:0,absent:j?j.data:0,loading:l}},We=()=>{const{currentUser:t,loading:r}=E(),l=t==null?void 0:t.id,{data:o,error:n}=I({queryKey:["classes"],queryFn:()=>D("student/list-classes",l),staleTime:3e4}),{data:s,error:d}=I({queryKey:["attendanceLog"],queryFn:()=>D("attendance/class-present",l),staleTime:3e4});return{classes:o||[],attendanceLog:s?s==null?void 0:s.presence:null,loading:r}},Ja=()=>{const{currentUser:t}=E(),r=t==null?void 0:t.id;r||console.warn("Waiting for User ID");const{data:l,error:o,isLoading:n}=I({queryKey:["nextLog",r],queryFn:()=>D("cron-schedule",r),staleTime:5e3});return{nextLog:x.useMemo(()=>!(l!=null&&l.initializeAttendance)||!(l!=null&&l.setAbsent)?null:l,[l]),isLoading:n,isError:!!o}},Qa=(t,r)=>{const{currentUser:l,loading:o}=E(),n=l==null?void 0:l.id,{data:s,error:d,isLoading:h}=I({queryKey:["report",t,r,n],queryFn:()=>n?D(`attendance/report?month=${t}&year=${r}`,n):Promise.reject("Tenant ID is required"),staleTime:5e3,enabled:!!n&&!!r&&!!t});return d&&console.error("Error fetching report",d),{report:s?s.data:null,isLoading:o||h,error:d}},et=t=>{var j,c,i,m;const{currentUser:r,loading:l}=E(),o=r==null?void 0:r.id,n=M(new Date).year(),{data:s,error:d}=I({queryKey:["report"],queryFn:()=>D(`attendance/report?month=${t}&year=${n}`,o),staleTime:3e4,enabled:!!o&&!!t}),{data:h,error:b}=I({queryKey:["week"],queryFn:()=>D("attendance/weekly-summary",o),staleTime:3e4,enabled:!!o}),p=Array.isArray((j=s==null?void 0:s.data)==null?void 0:j.metadata)&&((c=s==null?void 0:s.data)==null?void 0:c.metadata.slice().sort((u,f)=>u.class<f.class?-1:u.class>f.class?1:0).map(u=>u.class))||[],C=Array.isArray((i=s==null?void 0:s.data)==null?void 0:i.metadata)&&((m=s==null?void 0:s.data)==null?void 0:m.metadata.slice().sort((u,f)=>u.class<f.class?-1:u.class>f.class?1:0).map(u=>u.attendances))||[];return{classNames:p,attendances:C,week:h?h.weeklyAttendance:{},loading:l}},at=(t,r)=>{try{const l=t==null?void 0:t.replace(" ","T"),o=r==null?void 0:r.replace(" ","T"),n=new Date(l),s=new Date(o);if(isNaN(n.getTime())||isNaN(s.getTime()))return"Invalid date range";const d=n.toLocaleDateString("en-US",{month:"short",day:"2-digit"}),h=n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),b=s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1});return`${d} ${h}-${b}`}catch(l){return console.error("Error formatting date range:",l),"Invalid date range"}},tt=()=>{const{nextLog:t}=Ja(),[r,l]=x.useState([]);return x.useEffect(()=>{if(!t||typeof t!="object"){l([]);return}const o=[{icon:Ee,color:"text-red-500",title:"Unauthorized RFID Card Detected",description:"22 DEC 7:20 AM",isActive:!1},{icon:na,color:"text-green-500",title:"RFID Cards assigned to students",description:"21 DEC 11 PM",isActive:!1},{icon:la,color:"text-blue-gray-300",title:"Students Logging Schedule",description:t.initializeAttendance&&t.setAbsent?at(t.initializeAttendance,t.setAbsent):"N/A",isActive:!!t.initializeAttendance&&!!t.setAbsent},{icon:Ie,color:"text-blue-500",title:"New card added for student with ID STD-409",description:"20 DEC 2:20 AM",isActive:!1},{icon:oa,color:"text-orange-300",title:"System Maintenance",description:"17 DEC",isActive:!1}];l(o)},[t]),e.jsx(a.CardBody,{className:"pt-0 max-h-96 overflow-y-scroll",children:r.filter(o=>o.isActive).map(({icon:o,color:n,title:s,description:d},h)=>e.jsxs("div",{className:"flex items-start gap-4 py-3",children:[e.jsx("div",{className:`relative p-1 after:absolute after:-bottom-6 after:left-2/4 after:w-0.5 after:-translate-x-2/4 after:bg-blue-gray-50 after:content-[''] ${h===r.length-1?"after:h-0":"after:h-4/6"}`,children:O.createElement(o,{className:`!w-5 !h-5 ${n}`})}),e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"small",className:`block font-medium ${n}`,children:s}),e.jsx(a.Typography,{as:"span",variant:"small",className:"text-xs font-medium text-blue-gray-500",children:d})]})]},d))})};function st(){const{presence:t,late:r,absent:l}=Ue(),{activeCards:o}=Ye(),{classes:n,attendanceLog:s}=We(),d=new Date,h=d.getMonth(),p=new Date(d.setMonth(h-1)).toLocaleString("en-US",{month:"long"}),{classNames:C,attendances:j,week:c}=et(p),i=["Monday","Tuesday","Wednesday","Thursday","Friday"],m=i.map(T=>{var w;return((w=c[T])==null?void 0:w.present)||0}),u=i.map(T=>{var w;return((w=c[T])==null?void 0:w.late)||0}),f=i.map(T=>{var w;return((w=c[T])==null?void 0:w.absent)||0}),g={color:"white",title:"Attendance Trends",description:"Last Week Performance",footer:"just updated",chart:{type:"bar",height:220,series:[{name:"Present",data:m},{name:"Late",data:u},{name:"Absent",data:f}],options:{...ae,colors:["#689f38","#f9a825","#d84315"],plotOptions:{bar:{columnWidth:"20%",borderRadius:5}},xaxis:{...ae.xaxis,categories:["Mon","Tue","Wed","Thu","Fri"]}}}},F={color:"white",title:"Attendance By Grade",description:"Last Month Perfomance",footer:"just updated",chart:{type:"bar",height:220,series:[{name:"Logs",data:j}],options:{...ae,colors:["#0288d1","#558b2f","#009688","#283593","#fbc02d","#ef6c00"],plotOptions:{bar:{columnWidth:"10%",borderRadius:2,distributed:!0}},xaxis:{...ae.xaxis,categories:C}}}};return e.jsxs("div",{className:"mt-12",children:[e.jsxs("div",{className:"mb-12 grid gap-y-10 gap-x-6 md:grid-cols-2 xl:grid-cols-4",children:[e.jsx(B,{color:"green",title:"Present Students",value:t||0,icon:e.jsx(ia,{className:"w-6 h-6 text-white"}),footer:e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"})},1),e.jsx(B,{color:"red",title:"Absent Students",value:l||0,icon:e.jsx(Ee,{className:"w-6 h-6 text-white"}),footer:e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"})},2),e.jsx(B,{color:"amber",title:"Late Arrivals",value:r||0,icon:e.jsx(re,{className:"w-6 h-6 text-white"}),footer:e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"})},3),e.jsx(B,{color:"teal",title:"Active Cards",value:o||0,icon:e.jsx(ie,{className:"w-6 h-6 text-white"}),footer:e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"})},4)]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-y-12 gap-x-6 md:grid-cols-1 xl:grid-cols-2",children:[e.jsx(te,{...g,footer:e.jsxs(a.Typography,{variant:"small",className:"flex items-center font-normal text-blue-gray-600",children:[e.jsx(re,{strokeWidth:2,className:"h-4 w-4 text-blue-gray-400"})," ",g.footer]})},g.title),e.jsx(te,{...F,footer:e.jsxs(a.Typography,{variant:"small",className:"flex items-center font-normal text-blue-gray-600",children:[e.jsx(re,{strokeWidth:2,className:"h-4 w-4 text-blue-gray-400"})," ",F.footer]})},F.title)]}),e.jsxs("div",{className:"mb-4 grid grid-cols-1 gap-6 xl:grid-cols-3",children:[e.jsxs(a.Card,{className:"overflow-hidden xl:col-span-2 border border-blue-gray-100 shadow-sm",children:[e.jsxs(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 flex items-center justify-between p-6",children:[e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-1",children:"Classrooms"}),e.jsxs(a.Typography,{variant:"small",className:"flex items-center gap-1 font-normal text-blue-gray-600",children:[e.jsx(ca,{strokeWidth:3,className:"h-4 w-4 text-blue-gray-200"}),e.jsx("strong",{children:n.length})," registered rooms"]})]}),e.jsxs(a.Menu,{placement:"left-start",children:[e.jsx(a.MenuHandler,{children:e.jsx(a.IconButton,{size:"sm",variant:"text",color:"blue-gray",children:e.jsx(ce,{strokeWidth:3,fill:"currentColor",className:"h-5 w-5"})})}),e.jsx(a.MenuList,{children:e.jsx(a.MenuItem,{children:e.jsx(J,{to:"/dashboard/attendance/students",children:"View Details"})})})]})]}),e.jsx(a.CardBody,{className:"overflow-x-scroll px-0 pt-0 pb-2 max-h-96",children:e.jsxs("table",{className:"w-full min-w-[640px] table-auto",children:[e.jsx("thead",{children:e.jsx("tr",{children:["Class Name","Total Students","Attendance"].map(T=>e.jsx("th",{className:"border-b border-blue-gray-50 py-3 px-6 text-left stiky",children:e.jsx(a.Typography,{variant:"small",className:"text-[11px] font-medium uppercase text-blue-gray-400",children:T})},T))})}),e.jsx("tbody",{children:s&&Array.isArray(n)&&n.map(({grade:T,studentsCount:w,completion:Q},z)=>{const G=`py-3 px-5 ${z===n.length-1?"":"border-b border-blue-gray-50"}`;return e.jsxs("tr",{children:[e.jsx("td",{className:G,children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-bold",children:T})})}),e.jsx("td",{className:G,children:e.jsx(a.Typography,{variant:"small",className:"text-xs font-medium text-blue-gray-600",children:w})}),e.jsx("td",{className:G,children:e.jsxs("div",{className:"w-10/12",children:[e.jsxs(a.Typography,{variant:"small",className:"mb-1 block text-xs font-medium text-blue-gray-600",children:[(s[T]/w*100).toFixed(),"%"]}),e.jsx(a.Progress,{value:s[T]&&w?Math.round(s[T]/w*100):0,variant:"gradient",color:s[T]&&w?Math.round(s[T]/w*100)===100?"green":Math.round(s[T]/w*100)<=100&&Math.round(s[T]/w*100)>=50?"blue":"red":"blue",className:"h-1"})]})})]},T)})})]})})]}),e.jsxs(a.Card,{className:"border border-blue-gray-100 shadow-sm",children:[e.jsxs(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 p-6",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-2",children:"Real-Time Logs"}),e.jsxs(a.Typography,{variant:"small",className:"flex items-center gap-1 font-normal text-blue-gray-600",children:[e.jsx(da,{strokeWidth:3,className:"h-3.5 w-3.5 text-green-500"}),"current updates"]})]}),e.jsx(tt,{})]})]})]})}function rt({isOpen:t,onClose:r}){const{currentUser:l,updateInfo:o}=E(),[n,s]=x.useState(l.user_metadata.displayName),[d,h]=x.useState(l.email),[b,p]=x.useState(""),[C,j]=x.useState(!1),[c,i]=x.useState(null),[m,u]=x.useState(""),f=v=>{const F=v.target.files[0];F&&(i(F),u(URL.createObjectURL(F)))},A=()=>{document.getElementById("profile-image-input").click()};async function g(v){v.preventDefault();try{await o(n,d,c||null),p(null)}catch(F){p(F.message)}}return x.useEffect(()=>(t?(document.body.style.overflow="hidden",b!==""&&y(b,{type:"error"})):document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t,b]),t?e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm"}),e.jsxs(W.div,{className:"relative z-10 bg-white rounded-lg shadow-lg p-8 w-full lg:w-2/5 mx-2 flex items-center flex-col justify-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:[e.jsx(a.Typography,{variant:"h1",className:"font-['Aquire'] bg-gradient-to-r from-black/40 via-black/60 to-black/80 bg-clip-text",style:{WebkitTextFillColor:"transparent"},children:"ATS"}),e.jsx(a.Typography,{variant:"h6",color:"gray",className:"mb-1 font-normal font-['Nunito']",children:"Edit profile info"}),e.jsxs("form",{className:"mt-8 mb-2 mx-auto w-80 max-w-screen-lg lg:w-1/2",children:[e.jsxs("div",{className:"flex flex-col gap-2 m-auto",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Edit Profile"}),e.jsx("div",{className:"flex items-center justify-center",onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),children:e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx(a.Avatar,{src:m||l&&l.user_metadata.profile||"/img/no-profile.jpg",alt:n||l.email,size:"xl",variant:"rounded",className:"rounded-md shadow-lg shadow-blue-gray-500/40 bg-fixed bg-cover bg-no-repeat"}),C&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(a.Tooltip,{content:"Upload Image",children:e.jsx(a.IconButton,{onClick:A,className:"bg-white shadow-lg shadow-blue-gray-500/40 z-50",children:e.jsx(ma,{className:"h-5 w-5 text-blue-gray-500"})})})}),e.jsx("input",{type:"file",id:"profile-image-input",accept:"image/*",className:"hidden w-0 h-0 absolute",onChange:f})]})})]}),e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Organization Name"}),e.jsx(a.Input,{size:"lg",placeholder:"Name",value:n,onChange:v=>s(v.currentTarget.value),className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}})]}),e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Your email"}),e.jsx(a.Input,{size:"lg",placeholder:"name@mail.com",type:"email",value:d,onChange:v=>h(v.currentTarget.value),className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}})]}),e.jsxs("div",{className:"flex gap-4 mt-6 items-center",children:[e.jsx(a.Button,{color:"blue-gray",onClick:r,variant:"outlined",children:"Cancel"}),e.jsx(a.Button,{color:"blue",onClick:v=>g(v),variant:"outlined",children:"Save"})]})]})]})]}):null}function nt(){const{currentUser:t}=E(),r=t==null?void 0:t.user_metadata,[l,o]=x.useState("info"),[n,s]=x.useState(!1),[d,h]=x.useState(""),[b,p]=x.useState(""),C=async()=>{if(!d||!b){y.error("Start Time and End Time are required!");return}try{(await $.post("/api/v1/initialize-cron",{startTime:d,endTime:b},{headers:{"x-tenant-id":t==null?void 0:t.id}})).status===200?y.success("Schedule initialized successfully!"):y.error("Failed to initialize schedule")}catch(c){console.error("Error initializing schedule:",c),y.error("An error occurred. Please try again.")}},j=()=>s(!n);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"relative mt-8 h-72 w-full overflow-hidden rounded-xl bg-[url('/img/bg-signup.jpg')] bg-cover	bg-center",children:e.jsx("div",{className:"absolute inset-0 h-full w-full bg-gray-900/75"})}),e.jsx(a.Card,{className:"mx-3 -mt-16 mb-6 lg:mx-4 border border-blue-gray-100",children:e.jsxs(a.CardBody,{className:"p-4",children:[e.jsxs("div",{className:"mb-10 flex items-center justify-between flex-wrap gap-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(a.Avatar,{src:r&&r.profile||"/img/no-profile.jpg",alt:(r==null?void 0:r.displayName)||t.email,size:"xl",variant:"rounded",className:"rounded-lg shadow-lg shadow-blue-gray-500/40"}),e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h5",color:"blue-gray",className:"mb-1",children:(r==null?void 0:r.displayName)||t.email}),e.jsx(a.Typography,{variant:"small",className:"font-normal text-blue-gray-600",children:"Owner"})]})]}),e.jsx("div",{className:"w-96 items-center",children:e.jsx(a.Tabs,{value:l,children:e.jsxs(a.TabsHeader,{children:[e.jsxs(a.Tab,{value:"info",onClick:()=>o("info"),children:[e.jsx(ua,{className:"-mt-1 mr-2 inline-block h-5 w-5"}),"Info"]}),e.jsxs(a.Tab,{value:"metrics",onClick:()=>o("metrics"),children:[e.jsx(ha,{className:"-mt-1 mr-2 inline-block h-5 w-5"}),"Metrics"]})]})})})]}),e.jsx("div",{className:"relative h-64 overflow-hidden max-w-sm",children:e.jsxs(W.div,{className:"flex max-w-sm h-full gap-4",initial:{x:l==="info"?"0%":"-100%",opacity:0},animate:{x:l==="info"?"0%":"-100%",opacity:1},transition:{duration:.5},children:[e.jsx(W.div,{className:"w-full flex-shrink-0",children:e.jsx(ye,{title:"Profile Information",description:"School based in Kigali, Rwanda",details:{"School mobile":`+${r.phone}`,"School email":`${t.email}`},action:e.jsx(a.Tooltip,{content:"Edit Profile",children:e.jsx(xa,{className:"h-4 w-4 cursor-pointer text-blue-gray-500",onClick:j})})})}),e.jsxs(W.div,{className:"w-full flex-shrink-0",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-4",children:"Metrics"}),e.jsxs("div",{className:"flex flex-col gap-4 w-5/6 md:w-3/4",children:[e.jsx(a.Input,{type:"time",label:"Start Time",value:d,onChange:c=>h(c.target.value),placeholder:"08:00 AM"}),e.jsx(a.Input,{type:"time",label:"End Time",value:b,onChange:c=>p(c.target.value),placeholder:"04:00 PM"}),e.jsx(a.Button,{color:"light-blue",onClick:C,className:"self-start",children:"Initialize"})]})]})]})})]})}),n&&e.jsx(rt,{onClose:()=>s(!1),isOpen:n})]})}function lt(){var Ne,ve;const{currentUser:t}=E(),{classes:r}=We(),[l,o]=x.useState(""),[n,s]=x.useState(M().toDate()),{classAttendance:d}=Ue(n),h=x.useRef(),[b,p]=x.useState(null),[C,j]=x.useState(!1),[c,i]=x.useState({}),[m,u]=x.useState(new Set),[f,A]=x.useState([]),g=r.filter(N=>N.grade===l)[0]||null,v=x.useMemo(()=>d,[d]);pa.HIGH,ga.LARGE;const F=(g==null?void 0:g.studentsCount)||0;x.useEffect(()=>{const N=(v==null?void 0:v.filter(R=>R.className===l))||[];A(R=>R.length===N.length&&R.every((P,q)=>P===N[q])?R:N)},[v,l]);const T=(N,R)=>{i(k=>({...k,[N]:{...k[N],status:R}})),u(k=>new Set(k).add(N))},w=x.useRef({}),Q=(N,R)=>{i(k=>{var q;return(((q=k[N])==null?void 0:q.notes)||w.current[N]||"")===R?k:(w.current[N]=R,{...k,[N]:{...k[N],notes:R}})}),u(k=>new Set(k).add(N))},z=(N,R,k)=>{var X;const P=(b==null?void 0:b.studentID)===R&&(b==null?void 0:b.statusType)===k,q=((X=c[R])==null?void 0:X.status)||N;return e.jsx(de,{className:`h-5 w-5 ${q===k?k==="present"?"text-green-500":k==="absent"?"text-red-500":"text-amber-500":P?"text-gray-400":"hidden"}`,"aria-hidden":"true"})},G=async()=>{const N=f.map(k=>({...k,students:k.students.map(P=>c[P.studentID]?{...P,...c[P.studentID]}:P)}));A(N),i({}),u(new Set),j(!1);const R={...N,date:M(n).format("YYYY-MM-DD")};try{await Za(R,t==null?void 0:t.id)}catch(k){throw k}},Ke=()=>{i({}),u(new Set),j(!1)},Ge=N=>{const R=M(N.target.value).toDate();R<=M().toDate()&&s(R)},Xe=()=>{const N=M(),R=M(n);return R.isSame(N,"day")?`Today ${R.format("MMM D, YYYY")}`:R.isSame(N.subtract(1,"day"),"day")?`Yesterday ${R.format("MMM D, YYYY")}`:R.format("MMM D, YYYY")};return e.jsxs("div",{className:"mt-12 mb-8 flex flex-col gap-12",children:[e.jsxs("div",{className:"w-full flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx(a.Typography,{variant:"h5",className:"font-bold font-['Nunito']",children:"Class Attendance"}),e.jsxs("div",{className:"flex items-center gap-4 justify-end",children:[e.jsx(a.Typography,{variant:"small",className:"font-semibold font-['Nunito']",children:Xe()}),e.jsx("div",{className:"w-72",children:e.jsx(a.Input,{type:"date",onChange:Ge,value:M(n).format("YYYY-MM-DD"),max:M().format("YYYY-MM-DD"),className:"border rounded px-2 py-1 text-sm font-['Nunito']"})})]})]}),e.jsx("div",{className:"w-72",children:e.jsx(a.Select,{label:"Select Classroom",value:l,onChange:N=>o(N),children:Array.isArray(r)&&r.map(N=>e.jsx(a.Option,{value:N.grade,children:N.grade},N.grade))},l)}),l&&e.jsxs(e.Fragment,{children:[e.jsxs(a.Card,{ref:h,children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-1 mx-5 my-5",children:e.jsx(a.Typography,{variant:"h5",color:"blue-gray",className:"mb-1 font-['Nunito'] font-bold",children:t.user_metadata.displayName})}),e.jsxs(a.Typography,{variant:"small",className:"flex items-center gap-1 font-normal text-blue-gray-600 font-['Nunito'] mx-5",children:["Class Attendance on ",M(n).format("YYYY-MM-DD")]})]}),e.jsxs(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 flex p-6 flex-col w-full",children:[e.jsxs("div",{className:"w-full items-center justify-between flex",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-1",children:l}),e.jsxs(a.Menu,{placement:"left-start",children:[e.jsx(a.MenuHandler,{children:e.jsx(a.IconButton,{size:"sm",variant:"text",color:"blue-gray",children:e.jsx(ce,{strokeWidth:3,fill:"currentColor",className:"h-5 w-5"})})}),e.jsxs(a.MenuList,{children:[e.jsx(a.MenuItem,{onClick:()=>j(N=>!N),children:C?"Cancel":"Edit"}),C&&e.jsx(a.MenuItem,{onClick:G,children:"Save All Changes"}),C&&e.jsx(a.MenuItem,{onClick:Ke,children:"Leave Edit Mode"})]})]})]}),e.jsx("div",{children:e.jsxs(a.Typography,{variant:"small",color:"blue-gray",className:"font-normal font-['Nunito']",children:["Total Students: ",F]})})]}),e.jsx(a.CardBody,{className:"overflow-x-scroll",children:e.jsxs("table",{className:"w-full table-auto border",children:[e.jsx("thead",{children:e.jsx("tr",{children:["Student ID","Name","Present","Absent","Late","Arrival Time","Remarks"].map((N,R)=>e.jsx("th",{className:"border-b border-blue-gray-50 py-3 px-1 text-left",children:e.jsx(a.Typography,{variant:"small",className:"text-[11px] font-bold uppercase text-blue-gray-400",children:N})},`${N}-${R}`))})}),e.jsx("tbody",{children:(ve=(Ne=f[0])==null?void 0:Ne.students)==null?void 0:ve.map((N,R)=>{var we,Ce,Te;const{studentID:k,studentName:P,status:q,arrivalTime:X,notes:ee}=N,Z=`py-2 px-2 ${R===((Ce=(we=f[0])==null?void 0:we.students)==null?void 0:Ce.length)-1?"":"border-b border-blue-gray-50"}`;return e.jsxs("tr",{children:[e.jsx("td",{className:`${Z} w-32`,children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-bold font-['Nunito']",children:k})}),e.jsx("td",{className:`${Z}`,children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-['Nunito']",children:P})}),["present","absent","late"].map(_=>e.jsx("td",{className:`${Z} cursor-pointer`,onMouseEnter:()=>C&&p({studentID:k,statusType:_}),onMouseLeave:()=>C&&p(null),onClick:()=>C&&T(k,_),children:z(q,k,_)},_)),e.jsx("td",{className:`${Z} font-light font-['Nunito'] text-sm`,children:X&&M(X).format("HH:mm")}),e.jsx("td",{className:`${Z}`,children:C?e.jsx(a.Input,{placeholder:"Add notes",value:((Te=c[k])==null?void 0:Te.notes)??w.current[k]??ee??"",onChange:_=>Q(k,_.target.value),className:"resize-none border border-gray-300 rounded px-2 py-2 text-sm"}):e.jsx(a.Typography,{variant:"small",className:"font-['Nunito']",children:ee&&ee==="N/A"?"":ee||"N/A"})})]},k)})})]})}),e.jsx("div",{className:"watermark text-center mt-8",children:e.jsx("p",{style:{opacity:.1,fontSize:"24px"},className:"font-['Aquire']",children:"ATS"})})]}),e.jsx("div",{className:"hidden gap-4 mt-4 lg:flex",children:e.jsxs(a.Button,{variant:"filled",color:"blue",className:"flex items-center gap-2",onClick:()=>De(h,{filename:`${l}_Attendance_${M(n).format("YYYY-MM-DD")}.pdf`}),children:[e.jsx(fa,{className:"w-5 h-5"}),"Download PDF"]})})]})]})}function je({brandName:t="ATS"}){return e.jsxs(V.div,{className:"flex flex-col items-center justify-center mt-40 bg-transparent",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx(a.Typography,{variant:"h1",className:"font-['Aquire'] bg-gradient-to-r from-black/40 via-black/60 to-black/80 bg-clip-text",style:{WebkitTextFillColor:"transparent"},children:t}),e.jsx("p",{className:'font-normal font-["Nunito"]',children:"This feature is still in development"})]})}function ot(){return e.jsx(je,{})}function it(){return e.jsx(je,{})}function ct(){const{rfidCards:t,activeCards:r,unassignedCards:l}=Ye(),{currentUser:o}=E();x.useState("");const[n,s]=x.useState(""),[d,h]=x.useState(null),b=c=>{c.preventDefault(),h(c.target.files[0])};function p(){fetch("/card/download-template").then(c=>{if(!c.ok)throw new Error("Failed to download template");return c.blob()}).then(c=>{const i=window.URL.createObjectURL(c),m=document.createElement("a");m.style.display="none",m.href=i,m.download="Card_Template.csv",document.body.appendChild(m),m.click(),window.URL.revokeObjectURL(i)}).catch(c=>{console.error("Error downloading the template:",c)})}const C=async()=>{if(n!=="")try{const c=await $.post("/api/v1/rfid/set",{rfid_ID:n},{headers:{"x-tenant-id":`${o.id}`}});s(""),y(c.data.msg,{type:"success"})}catch(c){y(c.response.data.error,{type:"error"})}},j=async(c,i,m)=>{var u,f,A,g,v,F;if(c&&i)try{(await $.post(`/api/v1/rfid/deactivate/${c}`,{},{headers:{"x-tenant-id":`${o.id}`}})).status===201?y("Card deactivated successfully",{type:"success"}):y("Failed to deactivate card",{type:"warning"})}catch(T){y(((f=(u=T.response)==null?void 0:u.data)==null?void 0:f.message)||"Error occurred while deactivating card",{type:"error"})}else if(!i&&m)try{(await $.post(`/api/v1/rfid/activate/${c}`,{},{headers:{"x-tenant-id":`${o.id}`}})).status===201?y("Card activated successfully",{type:"success"}):y("Failed to activate card",{type:"warning"})}catch(T){y(((g=(A=T.response)==null?void 0:A.data)==null?void 0:g.message)||"Error occurred while activating card",{type:"error"})}else if(!m)try{(await $.delete(`/api/v1/rfid/delete/${c}`,{headers:{"x-tenant-id":`${o.id}`}})).status===201?y("Card deleted successfully",{type:"success"}):y("Failed to delete card",{type:"warning"})}catch(T){y(((F=(v=T.response)==null?void 0:v.data)==null?void 0:F.message)||"Error occurred while deleting card",{type:"error"})}};return e.jsxs("div",{className:"mt-12",children:[e.jsxs("div",{className:"mb-5 grid gap-y-10 gap-x-6 md:grid-cols-2 xl:grid-cols-4",children:[e.jsx(B,{color:"teal",title:"Active Cards",value:r,icon:e.jsx(ie,{className:"w-6 h-6 text-white"}),footer:e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"})},1),e.jsx(B,{color:"blue-gray",title:"Unassigned Cards",value:l,icon:e.jsx(Ie,{className:"w-6 h-6 text-white"}),footer:e.jsxs("div",{className:"w-full flex justify-between items-center",children:[e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"}),e.jsxs(a.Menu,{placement:"left-start",children:[e.jsx(a.MenuHandler,{children:e.jsx(a.IconButton,{size:"sm",variant:"text",color:"blue-gray",children:e.jsx(ya,{strokeWidth:3,fill:"currenColor",className:"h-6 w-6"})})}),e.jsx(a.MenuList,{children:e.jsx(a.MenuItem,{onClick:()=>ze(o.id),children:"Assign All"})})]})]})},2)]}),e.jsx("div",{className:"mb-6 grid grid-cols-1 gap-y-12 gap-x-6 md:grid-cols-1 xl:grid-cols-2",children:e.jsxs(a.Card,{children:[e.jsx(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 flex items-center justify-between p-6",children:e.jsx("div",{children:e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-1",children:"Card Management"})})}),e.jsx(a.CardBody,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx(a.Typography,{variant:"h6",className:"mb-4 font-semibold font-['Nunito']",children:"Register New Card"}),e.jsx(a.Input,{label:"Card ID",value:n,onChange:c=>s(c.target.value),placeholder:"Enter Card ID"}),e.jsx(a.Button,{color:"light-blue",onClick:C,children:"Register Card"})]}),e.jsxs("div",{className:"w-full max-w-sm flex flex-col items-start gap-4",children:[e.jsx(a.Typography,{variant:"h6",className:"text-sm font-semibold font-['Nunito']",children:"Import cards (CSV Format)"}),e.jsxs("label",{className:"w-full",children:[e.jsx("input",{type:"file",onChange:b,className:"hidden",id:"file-input"}),e.jsx(a.Input,{label:"Select File",variant:"outlined",placeholder:"example.csv",value:d?d.name:"",readOnly:!0,onClick:()=>document.getElementById("file-input").click()})]}),e.jsxs("div",{className:"w-full flex items-center gap-2",children:[e.jsx(a.Button,{color:"light-blue",onClick:()=>qe("rfid/upload",o.id,d),disabled:!d,children:"Upload"}),e.jsx(a.Button,{color:"blue-gray",onClick:p(),variant:"outlined",children:"Download Template"})]})]})]})})]})}),e.jsxs(a.Card,{className:"overflow-hidden xl:col-span-2 border border-blue-gray-100 shadow-sm",children:[e.jsx(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 flex items-center justify-between p-6",children:e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-1",children:"Cards Overview"}),e.jsxs(a.Typography,{variant:"small",className:"flex items-center gap-1 font-normal text-blue-gray-600",children:[e.jsx("strong",{children:t==null?void 0:t.length})," registered cards"]})]})}),e.jsx(a.CardBody,{className:"overflow-x-scroll px-0 pt-0 pb-2 max-h-96",children:e.jsxs("table",{className:"w-full min-w-[640px] table-auto",children:[e.jsx("thead",{children:e.jsx("tr",{children:["RFID ID","Assigned To","Class","Status","Actions"].map(c=>e.jsx("th",{className:"border-b border-blue-gray-50 py-3 px-5 text-left",children:e.jsx(a.Typography,{variant:"small",className:"text-[11px] font-bold uppercase text-blue-gray-400",children:c})},c))})}),e.jsx("tbody",{children:Array.isArray(t)&&t.map((c,i)=>{const m=`py-3 px-5 ${i===t.length-1?"":"border-b border-blue-gray-50"}`;return e.jsxs("tr",{children:[e.jsx("td",{className:m,children:e.jsx(a.Typography,{variant:"small",children:c.rfid_ID})}),e.jsx("td",{className:m,children:e.jsx(a.Typography,{variant:"small",children:c.assignedTo!==null?c.assignedTo:"N/A"})}),e.jsx("td",{className:m,children:e.jsx(a.Typography,{variant:"small",children:c.student?c.student.grade:"N/A"})}),e.jsx("td",{className:m,children:c.activated?e.jsx(de,{className:"h-5 w-5 text-green-500"}):e.jsx($e,{className:"h-5 w-5 text-red-500"})}),e.jsx("td",{className:`${m} `,children:e.jsx(a.Button,{size:"sm",variant:"outlined",color:c.activated?"amber":c.student?"green":"red",onClick:()=>j(c.rfid_ID,c.activated,c.student),children:c.activated?"Deactivate":c.student?"Activate":"Remove"})})]},c.rfid_ID)})})]})})]})]})}function dt(){const{students:t,activeStudents:r,unassignedStudents:l}=_e(),{currentUser:o}=E(),[n,s]=x.useState({studentID:"STD-",studentName:"",gender:"",grade:"",contact:""}),[d,h]=x.useState(null),b=i=>{i.preventDefault(),h(i.target.files[0])},p=i=>{const{name:m,value:u}=i.target;s(f=>({...f,[m]:u}))},C=async i=>{if(i.preventDefault(),n.gender)try{const m=await $.post("/api/v1/student/create",n,{headers:{"x-tenant-id":`${o.id}`}});y(m.data.msg,{type:"success"})}catch(m){y(m.response.data.error,{type:"error"})}else y("Fill out all required fields",{type:"error"})};function j(){fetch("/student/download-template").then(i=>{if(!i.ok)throw new Error("Failed to download template");return i.blob()}).then(i=>{const m=window.URL.createObjectURL(i),u=document.createElement("a");u.style.display="none",u.href=m,u.download="Student_Template.csv",document.body.appendChild(u),u.click(),window.URL.revokeObjectURL(m)}).catch(i=>{console.error("Error downloading the template:",i)})}const c=async(i,m,u)=>{var f,A,g,v,F,T;if(m&&i==="active")try{(await $.delete(`/api/v1/student/delete/${u}`,{headers:{"x-tenant-id":`${o.id}`}})).status===201?y("Student terminated successfully",{type:"success"}):y("Failed to terminate student",{type:"warning"})}catch(w){y(((A=(f=w.response)==null?void 0:f.data)==null?void 0:A.message)||"Error occurred while assigning student",{type:"error"})}else if(!m&&i==="active")try{const w=await $.post(`/api/v1/rfid/assign-single/${u}`,{},{headers:{"x-tenant-id":`${o.id}`}});w.status===201?y("Student assigned successfully",{type:"success"}):y(w.data.msg,{type:"warning"})}catch(w){y(((v=(g=w.response)==null?void 0:g.data)==null?void 0:v.message)||"Error occurred while assigning student",{type:"error"})}else try{(await $.delete(`/api/v1/student/delete/${u}`,{headers:{"x-tenant-id":`${o.id}`}})).status===201?y("Student terminated successfully",{type:"success"}):y("Failed to terminate student",{type:"warning"})}catch(w){y(((T=(F=w.response)==null?void 0:F.data)==null?void 0:T.message)||"Error occurred while assigning student",{type:"error"})}};return e.jsxs("div",{className:"mt-12 mb-8 flex flex-col gap-12",children:[e.jsxs("div",{className:"mb-5 grid gap-y-10 gap-x-6 md:grid-cols-2 xl:grid-cols-4",children:[e.jsx(B,{color:"teal",title:"Active Students",value:r||0,icon:e.jsx(ba,{className:"w-6 h-6 text-white"}),footer:e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"})},1),e.jsx(B,{color:"blue-gray",title:"Unassigned Students",value:l||0,icon:e.jsx(ja,{className:"w-6 h-6 text-white"}),footer:e.jsxs("div",{className:"w-full flex justify-between items-center",children:[e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"updated 2hrs ago"}),e.jsxs(a.Menu,{placement:"left-start",children:[e.jsx(a.MenuHandler,{children:e.jsx(a.IconButton,{size:"sm",variant:"text",color:"blue-gray",children:e.jsx(ce,{strokeWidth:3,fill:"currenColor",className:"h-6 w-6"})})}),e.jsx(a.MenuList,{children:e.jsx(a.MenuItem,{onClick:()=>ze(o.id),children:"Assign All"})})]})]})},2),e.jsx(B,{color:"deep-orange",title:"Ineligible Students",value:t?t.length-r:0,icon:e.jsx(Na,{className:"w-6 h-6 text-white"}),footer:e.jsx(a.Typography,{className:"font-normal text-blue-gray-600",children:"recent update"})},3)]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-y-12 gap-x-6 md:grid-cols-1 xl:grid-cols-2",children:[e.jsxs(a.Card,{className:"w-full max-w-3xl mx-auto",children:[e.jsx(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 flex items-center justify-between p-6",children:e.jsx("div",{children:e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-1",children:"Student Registration"})})}),e.jsx(a.CardBody,{children:e.jsxs("form",{onSubmit:C,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(a.Input,{label:"Student ID",name:"studentID",value:n.studentID,onChange:p,required:!0}),e.jsx(a.Input,{label:"Student Name",name:"studentName",value:n.studentName,onChange:p,required:!0}),e.jsxs(a.Select,{label:"Gender",name:"gender",value:n.gender,onChange:i=>s({...n,gender:i}),children:[e.jsx(a.Option,{value:"Male",children:"Male"}),e.jsx(a.Option,{value:"Female",children:"Female"})]}),e.jsx(a.Input,{label:"Grade",name:"grade",value:n.grade,onChange:p,required:!0}),e.jsx(a.Input,{label:"Contact",name:"contact",value:n.contact,onChange:p,required:!0}),e.jsx("div",{className:"w-full flex items-center justify-center",children:e.jsx(a.Button,{type:"submit",color:"light-blue",className:"max-w-sm",children:"Register Student"})})]})})]}),e.jsxs("div",{className:"w-full max-w-sm mx-auto flex flex-col items-start gap-4",children:[e.jsx(a.Typography,{variant:"h6",className:"text-sm font-semibold font-['Nunito']",children:"Import students (CSV Format)"}),e.jsxs("label",{className:"w-full",children:[e.jsx("input",{type:"file",onChange:b,className:"hidden",id:"file-input"}),e.jsx(a.Input,{label:"Select File",variant:"outlined",placeholder:"example.csv",value:d?d.name:"",readOnly:!0,onClick:()=>document.getElementById("file-input").click()})]}),e.jsxs("div",{className:"w-full flex items-center gap-2",children:[e.jsx(a.Button,{color:"light-blue",onClick:()=>qe("student/upload",o.id,d),disabled:!d,children:"Upload"}),e.jsx(a.Button,{color:"blue-gray",onClick:j(),variant:"outlined",children:"Download Template"})]})]})]}),e.jsxs(a.Card,{className:"overflow-hidden xl:col-span-2 border border-blue-gray-100 shadow-sm",children:[e.jsx(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 flex items-center justify-between p-6",children:e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-1",children:"Students Overview"}),e.jsxs(a.Typography,{variant:"small",className:"flex items-center gap-1 font-normal text-blue-gray-600",children:[e.jsx("strong",{children:t==null?void 0:t.length})," registered students"]})]})}),e.jsx(a.CardBody,{className:"overflow-x-scroll px-0 pt-0 pb-2 max-h-96",children:e.jsxs("table",{className:"w-full min-w-[640px] table-auto",children:[e.jsx("thead",{children:e.jsx("tr",{children:["Student ID","Student Name","Class","Assigned","Actions"].map(i=>e.jsx("th",{className:"border-b border-blue-gray-50 py-3 px-5 text-left",children:e.jsx(a.Typography,{variant:"small",className:"text-[11px] font-bold uppercase text-blue-gray-400",children:i})},i))})}),e.jsx("tbody",{children:Array.isArray(t)&&t.map((i,m)=>{const u=`py-3 px-5 ${m===t.length-1?"":"border-b border-blue-gray-50"}`;return e.jsxs("tr",{children:[e.jsx("td",{className:u,children:e.jsx(a.Typography,{variant:"small",children:i.studentID})}),e.jsx("td",{className:u,children:e.jsx(a.Typography,{variant:"small",children:i.studentName})}),e.jsx("td",{className:u,children:e.jsx(a.Typography,{variant:"small",children:i.grade})}),e.jsx("td",{className:u,children:i.rfidCard?e.jsx(de,{className:"h-5 w-5 text-green-500"}):i.status==="active"?e.jsx(va,{className:"h-5 w-5 text-gray-500"}):e.jsx($e,{className:"h-5 w-5 text-red-500"})}),e.jsx("td",{className:u,children:e.jsx(a.Button,{size:"sm",variant:"outlined",color:i.rfidCard?"blue-gray":i.status==="active"?"green":"red",onClick:()=>c(i.status,i.rfidCard,i.studentID),children:i.rfidCard?"Terminate":i.status==="active"?"assign":"remove"})})]},i.studentID)})})]})})]})]})}function mt(){return e.jsx(je,{})}wa.register(Ca,Ta,Sa);function ut(){const{currentUser:t}=E(),[r,l]=x.useState(""),[o,n]=x.useState(""),{report:s}=Qa(r,o),d=x.useRef(),[h]=ka(),b=h.get("search"),{student:p}=_e(b),C={labels:["Present","Late","Absent"],datasets:[{data:[parseFloat(p==null?void 0:p.present),parseFloat(p==null?void 0:p.late),parseFloat(p==null?void 0:p.absent)],backgroundColor:["#4CAF50","#FF9800","#F44336"],hoverBackgroundColor:["#45A149","#F4A641","#D9392F"],borderWidth:1}]},j=new Date().getFullYear(),c=new Date().getMonth()+1,i=new Date().toLocaleDateString(),m=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}],u=Array.from({length:j-2020+1},(g,v)=>2020+v),f=g=>o===j&&g>c,A={labels:[`Male - ${((s==null?void 0:s.totalMales)/(s==null?void 0:s.totalStudents)*100).toFixed(1)}%`,`Female - ${((s==null?void 0:s.totalFemales)/(s==null?void 0:s.totalStudents)*100).toFixed(1)}%`],datasets:[{data:[((s==null?void 0:s.totalMales)/(s==null?void 0:s.totalStudents)*100).toFixed(1)||0,((s==null?void 0:s.totalFemales)/(s==null?void 0:s.totalStudents)*100).toFixed(1)||0],backgroundColor:["#92C5F9","#B6A6E9"],hoverBackgroundColor:["#4394E5","#876FD4"]}]};return e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-y-12 gap-x-6",children:[p&&e.jsxs(e.Fragment,{children:[e.jsx(a.Typography,{variant:"h5",className:"font-bold font-['Nunito']",children:"Student Analysis"}),e.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-4 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Aa,{className:"h-10 w-10 text-blue-500"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 font-['Nunito']",children:p.name}),e.jsx("p",{className:"text-gray-500 font-['Nunito']",children:p.studentID})]})]}),e.jsxs("div",{className:"flex items-center mb-6 justify-between",children:[e.jsxs("span",{className:"text-gray-700 text-sm mt-2 flex flex-col",children:[e.jsx("p",{className:"font-bold font-['Nunito'] text-black",children:"Attendance Breakdown"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("p",{children:[p.present," Present"]}),e.jsxs("p",{children:[p.late," Late"]}),e.jsxs("p",{children:[p.absent," Absent"]})]})]}),e.jsx("div",{className:"w-40 h-40",children:e.jsx(Ra,{data:C})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Grade:"}),e.jsx("p",{children:p.grade})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Gender:"}),e.jsx("p",{children:p.gender})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Contact:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fa,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{children:p.contact})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Card Active:"}),e.jsx("p",{className:p.cardActive?"text-green-600":"text-red-600",children:p.cardActive?"Yes":"No"})]})]})]})]}),e.jsx(a.Typography,{variant:"h5",className:"font-bold font-['Nunito']",children:"Attendance Report"}),e.jsxs("div",{className:"flex gap-4 flex-col lg:flex-row max-w-sm",children:[e.jsx(a.Select,{label:"Select Month",value:r.toString(),onChange:g=>l(g),className:"w-full",children:m.map(({value:g,label:v})=>e.jsx(a.Option,{value:v,disabled:f(g),children:v},g))}),e.jsx(a.Select,{label:"Select Year",value:o.toString(),onChange:g=>n(Number(g)),className:"w-full",children:u.map(g=>e.jsx(a.Option,{value:g.toString(),children:g},g))})]}),s&&r&&o&&e.jsxs(e.Fragment,{children:[e.jsxs(a.Card,{className:"p-4 shadow-lg",ref:d,children:[e.jsx(a.CardHeader,{floated:!1,shadow:!1,color:"transparent",className:"m-0 flex items-center justify-between p-5",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(a.Avatar,{src:t&&t.user_metadata.profile||"/img/no-profile.jpg",alt:(t==null?void 0:t.user_metadata.displayName)||t.email,size:"md",variant:"rounded",className:"rounded-lg shadow-blue-gray-500/40"}),e.jsx(a.Typography,{variant:"h5",color:"blue-gray",className:"mb-1 font-['Nunito'] font-bold",children:t.user_metadata.displayName})]}),e.jsx(a.Typography,{variant:"small",className:"flex items-center gap-1 font-normal text-blue-gray-600 font-['Nunito']",children:"Students Attendance Report"})]})}),e.jsxs(a.CardBody,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h6",className:"font-['Nunito'] font-semibold mb-2 text-black",children:"Report Details"}),e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito'] font-normal",children:["Report for ",r," ",o]}),e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito'] font-medium",children:["Generated on: ",i]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(a.Typography,{variant:"h6",className:"font-['Nunito'] font-semibold text-black",children:"Overview"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-4",children:[e.jsx("div",{className:"p-4 rounded-lg shadow-md flex items-center bg-gray-50",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{children:e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito']",children:[e.jsx("strong",{className:"font-medium",children:"Total Students:"})," ",(s==null?void 0:s.totalStudents)||0]})}),e.jsx("div",{children:e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito']",children:[e.jsx("strong",{className:"font-medium",children:"Male:"})," ",(s==null?void 0:s.totalMales)||0]})}),e.jsx("div",{children:e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito']",children:[e.jsx("strong",{className:"font-medium",children:"Female:"})," ",(s==null?void 0:s.totalFemales)||0]})}),e.jsx("div",{children:e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito']",children:[e.jsx("strong",{className:"font-medium",children:"On-Time Arrivals:"})," ",(s==null?void 0:s.attendances)||0]})}),e.jsx("div",{children:e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito']",children:[e.jsx("strong",{className:"font-medium",children:"Late Arrivals:"})," ",(s==null?void 0:s.lateArrivals)||0]})}),e.jsx("div",{children:e.jsxs(a.Typography,{className:"text-gray-700 font-['Nunito']",children:[e.jsx("strong",{className:"font-medium",children:"Absences:"})," ",(s==null?void 0:s.absences)||0]})})]})}),e.jsx("div",{className:"p-4 rounded-lg h-80 flex items-center justify-center",children:e.jsx(Ea,{data:A})})]})]}),e.jsxs("div",{className:"mt-6 overflow-x-auto",children:[e.jsx(a.Typography,{variant:"h6",className:"mb-2 font-['Nunito'] font-semibold",children:"Detailed Report"}),e.jsxs("table",{className:"w-full min-w-[640px] table-auto border",children:[e.jsx("thead",{children:e.jsx("tr",{children:["Class","Total Students","Male","Female","Presence","Late","Absence"].map(g=>e.jsx("th",{className:"border-b border-blue-gray-50 py-3 px-5 text-left",children:e.jsx(a.Typography,{variant:"small",className:"text-[11px] font-bold uppercase text-blue-gray-400",children:g})},g))})}),e.jsx("tbody",{children:Array.isArray(s==null?void 0:s.metadata)&&s.metadata.slice().sort((g,v)=>g.class<v.class?-1:g.class>v.class?1:0).map((g,v)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-2 border-b border-gray-200",children:g.class}),e.jsx("td",{className:"px-6 py-2 border-b border-gray-200",children:g.totalStudents}),e.jsx("td",{className:"px-6 py-2 border-b border-gray-200",children:g.male}),e.jsx("td",{className:"px-6 py-2 border-b border-gray-200",children:g.female}),e.jsx("td",{className:"px-6 py-2 border-b border-gray-200",children:g.attendances}),e.jsx("td",{className:"px-6 py-2 border-b border-gray-200",children:g.late}),e.jsx("td",{className:"px-6 py-2 border-b border-gray-200",children:g.absences})]},v))})]})]})]}),e.jsx(a.CardFooter,{className:"border-t border-gray-200 mt-4 bottom-0",children:e.jsx(a.Typography,{variant:"small",color:"gray",children:"This report is generated for institutional use only and provides an accurate summary of students attendance."})}),e.jsx("div",{className:"watermark text-center mt-8",children:e.jsx("p",{style:{opacity:.1,fontSize:"24px"},className:"font-['Aquire']",children:"ATS"})})]}),e.jsx("div",{className:"hidden gap-4 mt-4 lg:flex",children:e.jsxs(a.Button,{variant:"filled",color:"blue",className:"flex items-center gap-2",onClick:()=>De(d,{filename:`ATS_Monthly_Report_${s==null?void 0:s.month}_${o}.pdf`}),children:[e.jsx(Ia,{className:"w-5 h-5"}),"Download PDF"]})})]})]})}function ht(){const t=x.useRef(),r=x.useRef(),{logIn:l}=E(),[o,n]=x.useState(""),[s,d]=x.useState(!1);async function h(b){b.preventDefault();try{n(""),d(!0),await l(t.current.value,r.current.value)}catch{n("Failed to sign in")}d(!1)}return e.jsx(e.Fragment,{children:e.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("section",{className:"m-8 flex gap-4",children:[e.jsxs("div",{className:"w-full lg:w-3/5 mt-24",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(a.Typography,{variant:"h2",className:"font-bold mb-4",children:"Log In"}),e.jsx(a.Typography,{variant:"paragraph",color:"blue-gray",className:"text-lg font-normal",children:"Enter your email and password to Sign In."})]}),e.jsxs("form",{className:"mt-8 mb-2 mx-auto w-80 max-w-screen-lg lg:w-1/2",onSubmit:h,children:[e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Your email"}),e.jsx(a.Input,{size:"lg",placeholder:"name@mail.com",inputRef:t,className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}}),e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Password"}),e.jsx(a.Input,{type:"password",size:"lg",inputRef:r,placeholder:"********",className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}})]}),e.jsx(a.Button,{className:"mt-6",fullWidth:!0,disabled:s,onClick:async b=>{await h(b)},children:"Log In"}),e.jsx("div",{className:"flex items-center justify-between gap-2 mt-6",children:e.jsx(a.Typography,{variant:"small",className:"font-medium text-gray-900",children:e.jsx("a",{href:"#",children:"Forgot Password"})})}),e.jsx("div",{className:"space-y-4 mt-8",children:e.jsxs(a.Button,{size:"lg",color:"white",className:"flex items-center gap-2 justify-center shadow-md",fullWidth:!0,children:[e.jsxs("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("g",{clipPath:"url(#clip0_1156_824)",children:[e.jsx("path",{d:"M16.3442 8.18429C16.3442 7.64047 16.3001 7.09371 16.206 6.55872H8.66016V9.63937H12.9813C12.802 10.6329 12.2258 11.5119 11.3822 12.0704V14.0693H13.9602C15.4741 12.6759 16.3442 10.6182 16.3442 8.18429Z",fill:"#4285F4"}),e.jsx("path",{d:"M8.65974 16.0006C10.8174 16.0006 12.637 15.2922 13.9627 14.0693L11.3847 12.0704C10.6675 12.5584 9.7415 12.8347 8.66268 12.8347C6.5756 12.8347 4.80598 11.4266 4.17104 9.53357H1.51074V11.5942C2.86882 14.2956 5.63494 16.0006 8.65974 16.0006Z",fill:"#34A853"}),e.jsx("path",{d:"M4.16852 9.53356C3.83341 8.53999 3.83341 7.46411 4.16852 6.47054V4.40991H1.51116C0.376489 6.67043 0.376489 9.33367 1.51116 11.5942L4.16852 9.53356Z",fill:"#FBBC04"}),e.jsx("path",{d:"M8.65974 3.16644C9.80029 3.1488 10.9026 3.57798 11.7286 4.36578L14.0127 2.08174C12.5664 0.72367 10.6469 -0.0229773 8.65974 0.000539111C5.63494 0.000539111 2.86882 1.70548 1.51074 4.40987L4.1681 6.4705C4.8001 4.57449 6.57266 3.16644 8.65974 3.16644Z",fill:"#EA4335"})]}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_1156_824",children:e.jsx("rect",{width:"16",height:"16",fill:"white",transform:"translate(0.5)"})})})]}),e.jsx("span",{children:"Sign in With Google"})]})}),e.jsxs(a.Typography,{variant:"paragraph",className:"text-center text-blue-gray-500 font-medium mt-4",children:["Not registered?",e.jsx(J,{to:"/auth/sign-up",className:"text-gray-900 ml-1",children:"Create account"})]})]})]}),e.jsx("div",{className:"w-2/5 h-full hidden lg:block",children:e.jsx("img",{src:"/img/pattern.png",className:"h-full w-full object-cover rounded-3xl"})})]})})})}function xt(){const t=x.useRef(null),r=x.useRef(null),[l,o]=x.useState(null),n=x.useRef(null),s=x.useRef(null),{signup:d,currentUser:h}=E(),[b,p]=x.useState(""),[C,j]=x.useState(!1);H();async function c(m){if(m.preventDefault(),n.current.value!==s.current.value)return p("Passwords do not match");if(t.current.value===null)return p("Provide your organization name");if(l===null)return p("Provide your phone number");try{p(""),j(!0),await d(t.current.value,r.current.value,l,n.current.value)}catch{p("Failed to create an account")}j(!1)}const i=(m,u,f)=>{o(m)};return x.useEffect(()=>{b!==""&&y(b,{type:"error"})},[b]),e.jsx(e.Fragment,{children:e.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("section",{className:"m-8 flex",children:[e.jsx("div",{className:"w-2/5 h-full hidden lg:block",children:e.jsx("img",{src:"/img/pattern.png",className:"h-full w-full object-cover rounded-3xl"})}),e.jsxs("div",{className:"w-full lg:w-3/5 flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(a.Typography,{variant:"h2",className:"font-bold mb-4",children:"Join Us Today"}),e.jsx(a.Typography,{variant:"paragraph",color:"blue-gray",className:"text-lg font-normal",children:"Enter your email and password to register."})]}),e.jsxs("form",{className:"mt-8 mb-2 mx-auto w-80 max-w-screen-lg lg:w-1/2",children:[e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Organization Name"}),e.jsx(a.Input,{size:"lg",placeholder:"Name",inputRef:t,className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}})]}),e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Your email"}),e.jsx(a.Input,{size:"lg",placeholder:"name@mail.com",type:"email",inputRef:r,className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}})]}),e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Phone Number"}),e.jsx(Da,{country:"rw",masks:{rw:"... ... ..."},onlyCountries:["rw"],inputClass:"bg-transparent border-none focus:ring-2 focus:ring-gray-900 duration-200",containerClass:"rounded-md",buttonClass:"bg-transparent border-none",inputStyle:{width:"100%",height:"45px"},placeholder:"XXXX-XXX-XXX",onChange:i})]}),e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Your password"}),e.jsx(a.Input,{size:"lg",type:"password",inputRef:n,placeholder:"********",className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}})]}),e.jsxs("div",{className:"mb-1 flex flex-col gap-6",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"-mb-3 font-medium",children:"Confirm Password"}),e.jsx(a.Input,{size:"lg",placeholder:"********",inputRef:s,type:"password",className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"}})]}),e.jsx(a.Button,{className:"mt-6",fullWidth:!0,onClick:async m=>{await c(m)},disabled:C,children:C?"Loading":"Register Now"}),e.jsx("div",{className:"space-y-4 mt-8",children:e.jsxs(a.Button,{size:"lg",color:"white",className:"flex items-center gap-2 justify-center shadow-md",fullWidth:!0,children:[e.jsxs("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("g",{clipPath:"url(#clip0_1156_824)",children:[e.jsx("path",{d:"M16.3442 8.18429C16.3442 7.64047 16.3001 7.09371 16.206 6.55872H8.66016V9.63937H12.9813C12.802 10.6329 12.2258 11.5119 11.3822 12.0704V14.0693H13.9602C15.4741 12.6759 16.3442 10.6182 16.3442 8.18429Z",fill:"#4285F4"}),e.jsx("path",{d:"M8.65974 16.0006C10.8174 16.0006 12.637 15.2922 13.9627 14.0693L11.3847 12.0704C10.6675 12.5584 9.7415 12.8347 8.66268 12.8347C6.5756 12.8347 4.80598 11.4266 4.17104 9.53357H1.51074V11.5942C2.86882 14.2956 5.63494 16.0006 8.65974 16.0006Z",fill:"#34A853"}),e.jsx("path",{d:"M4.16852 9.53356C3.83341 8.53999 3.83341 7.46411 4.16852 6.47054V4.40991H1.51116C0.376489 6.67043 0.376489 9.33367 1.51116 11.5942L4.16852 9.53356Z",fill:"#FBBC04"}),e.jsx("path",{d:"M8.65974 3.16644C9.80029 3.1488 10.9026 3.57798 11.7286 4.36578L14.0127 2.08174C12.5664 0.72367 10.6469 -0.0229773 8.65974 0.000539111C5.63494 0.000539111 2.86882 1.70548 1.51074 4.40987L4.1681 6.4705C4.8001 4.57449 6.57266 3.16644 8.65974 3.16644Z",fill:"#EA4335"})]}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_1156_824",children:e.jsx("rect",{width:"16",height:"16",fill:"white",transform:"translate(0.5)"})})})]}),e.jsx("span",{children:"Sign in With Google"})]})}),e.jsxs(a.Typography,{variant:"paragraph",className:"text-center text-blue-gray-500 font-medium mt-4",children:["Already have an account?",e.jsx(J,{to:"/auth/login",className:"text-gray-900 ml-1",children:"Log In"})]})]})]})]})})})}function pt(){const[t,r]=x.useState(""),l=n=>{const[s,d]=n.split("@");return`${s.slice(0,3)+"*****"}@${d}`};x.useEffect(()=>{(async()=>{const{data:s}=await L.auth.getUser();s&&s.email&&r(s.email)})()},[]);const o=async()=>{try{const{user:n,error:s}=await L.auth.getUser();if(n){const{error:d}=await L.auth.api.resendConfirmationEmail(n.email);d?y.error(d.message):y.success("Verification email resent! Please check your inbox.")}}catch{y.error("Error while resending email.")}};return e.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-100",children:e.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white shadow-xl rounded-lg",children:[e.jsx(a.Typography,{variant:"h5",color:"blue-gray",className:"text-center mb-6",children:"Verify Your Email"}),t&&e.jsxs(a.Typography,{color:"gray",className:"text-center mb-4",children:["Thank you for signing up! We have sent a verification email to"," ",e.jsx("strong",{children:l(t)}),". Please check your email (and the spam folder) to verify your account."]}),e.jsx("div",{className:"text-center",children:e.jsx(a.Button,{color:"blue",onClick:o,className:"w-full",children:"Resend Verification Email"})}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs(a.Typography,{color:"gray",className:"text-sm",children:["If you've already verified your email, you can go back to the ",e.jsx("a",{href:"/auth/login",className:"text-blue-500 hover:text-blue-700",children:"Login"})," page."]})})]})})}const U={className:"w-5 h-5 text-inherit"},Re=[{title:"Overview",layout:"dashboard",pages:[{icon:e.jsx($a,{...U}),name:"dashboard",path:"/home",element:e.jsx(st,{})},{icon:e.jsx(ne,{...U}),name:"profile",path:"/profile",element:e.jsx(nt,{})}]},{title:"Attendance",layout:"dashboard",pages:[{icon:e.jsx(Ma,{...U}),name:"Records",menu:!0,menuList:[{name:"Students Log",path:"/attendance/students",element:e.jsx(lt,{})},{name:"Staff Log",path:"/attendance/staff",element:e.jsx(ot,{})}]}]},{title:"Tools",layout:"dashboard",pages:[{icon:e.jsx(ie,{...U}),name:"Setup",path:"/card",element:e.jsx(ct,{})},{icon:e.jsx(La,{...U}),name:"Register",menu:!0,menuList:[{name:"Students",path:"/register/students",element:e.jsx(dt,{})},{name:"Staff",path:"/register/staff",element:e.jsx(mt,{})}]}]},{title:"Reports & Analytics",layout:"dashboard",pages:[{icon:e.jsx(Pa,{...U}),name:"Insights",path:"/reports",menu:!0,menuList:[{name:"Students Report",path:"/reports/students",element:e.jsx(ut,{})},{name:"Staff Report",path:"/reports/staff",element:e.jsx(it,{})}]}]}],gt=[{title:"Authentication",layout:"auth",pages:[{name:"sign up",path:"/sign-up",element:e.jsx(xt,{})},{name:"log in",path:"/login",element:e.jsx(ht,{})},{name:"verify email",path:"/verify-email",element:e.jsx(pt,{})}]}];function ft({isOpen:t,onClose:r}){const{logOut:l}=E(),o=H();async function n(){try{await l(),o("/",{replace:!0})}catch(s){console.log(s)}}return x.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),t?e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm"}),e.jsxs(W.div,{className:"relative z-10 bg-white rounded-lg shadow-lg p-8 w-80 text-center gap-2",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:[e.jsx(a.Typography,{variant:"h1",className:"font-['Aquire'] bg-gradient-to-r from-black/40 via-black/60 to-black/80 bg-clip-text",style:{WebkitTextFillColor:"transparent"},children:"ATS"}),e.jsx(a.Typography,{variant:"h6",color:"gray",className:"mb-4 font-normal font-['Nunito']",children:"Are you sure you want to log out?"}),e.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[e.jsx(a.Button,{color:"red",onClick:n,variant:"outlined",children:"Log Out"}),e.jsx(a.Button,{color:"blue-gray",onClick:r,variant:"outlined",children:"Cancel"})]})]})]}):null}function He(){const[t,r]=K(),{sidenavType:l}=t,{currentUser:o,loading:n}=E(),[s,d]=x.useState(null),[h,b]=x.useState(!1);if(x.useEffect(()=>{d(o?o.user_metadata:null)},[o]),n||!s)return e.jsx(be,{});const p=()=>b(!h);return e.jsxs(W.div,{className:"min-h-screen flex flex-col bg-blue-gray-50/50",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx(xe,{routes:Re,brandImg:l==="dark"?"/img/ATS.png":"/img/ATS_dark.png",onLogOutClick:p}),e.jsxs("div",{className:"flex-1 xl:ml-80 flex flex-col",children:[e.jsx(Pe,{user:s}),e.jsx(Be,{}),e.jsx(a.IconButton,{size:"lg",color:"white",className:"fixed bottom-8 right-8 z-40 rounded-full shadow-blue-gray-900/10",ripple:!1,onClick:()=>Le(r,!0),children:e.jsx(Ba,{className:"h-5 w-5"})}),e.jsx("div",{className:"flex-grow p-4",children:e.jsx(me,{children:Re.map(({layout:C,pages:j},c)=>C==="dashboard"&&j.map(({path:i,element:m,menu:u,menuList:f},A)=>e.jsxs(O.Fragment,{children:[e.jsx(Y,{exact:!0,path:i,element:m}),u&&f&&f.map((g,v)=>e.jsx(Y,{exact:!0,path:g.path,element:g.element},`${A}-${v}`))]},A)))})}),e.jsx("div",{className:"mt-auto flex justify-center items-center",children:e.jsx("div",{className:"w-full max-w-screen-xl p-2",children:e.jsx(pe,{})})})]}),h&&e.jsx(ft,{onClose:()=>b(!1),isOpen:h})]})}He.displayName="/src/layout/dashboard.jsx";function le(){return e.jsx(V.div,{className:"relative min-h-screen w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(me,{children:gt.map(({layout:t,pages:r})=>t==="auth"&&r.map(({path:l,element:o})=>e.jsx(Y,{exact:!0,path:l,element:o})))})})}le.displayName="/src/layout/Auth.jsx";function Ve(){const t=new Date().getFullYear(),r=x.useRef(),[l,o]=x.useState(null);x.useState(null);const n=d=>{d.preventDefault(),o(r.current.value)},s=async d=>{if(d.preventDefault(),!l){window.alert("Please enter a valid email address.");return}try{const h=await fetch("http://localhost:3000/api/v1/client/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l})});if(console.log(h),h.ok){window.alert("Subscription sent successfully!"),o("");return}else window.alert("Failed to send subscription request. Please try again.")}catch(h){console.error("Error:",h),window.alert("An error occured. Please try again.")}};return e.jsxs(V.div,{className:"min-h-screen bg-transparent",id:"home",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx(ge,{brandName:"ATS"}),e.jsx(fe,{}),e.jsx("section",{className:" flex items-center justify-center text-center pt-40 bg-gradient-to-b from-black via-black/90 to-black/80",id:"about",children:e.jsx("div",{className:"container px-4 sm:px-6 lg:px-8 xl:px-10",children:e.jsx("div",{className:"flex justify-center gap-x-4 lg:gap-x-5",children:e.jsxs("div",{className:"w-full lg:w-2/3 items-center justify-center",children:[e.jsx("h2",{className:"text-white mb-4 font-['Nunito'] text-3xl",children:"ATS - Attendance Tracking System"}),e.jsx("p",{className:"text-white/70 mb-20 font-['Nunito'] font-light",children:"ATS (Attendance Tracking System) is an innovative solution for efficient attendance management in schools and organizations. Designed for quick and accurate check-ins, ATS enables real-time data collection and enhances accountability. Streamline your attendance process and create a more productive environment with this advanced system."})]})})})}),e.jsxs("section",{id:"contact",children:[e.jsx("div",{className:"py-20 text-white text-center bg-cover bg-center bg-no-repeat bg-fixed",style:{backgroundImage:"url('/img/bg-signup.jpg')"},children:e.jsxs("div",{className:"container mx-auto px-4 lg:px-8",children:[e.jsx("i",{className:"far fa-paper-plane fa-2x mb-4"}),e.jsx("h2",{className:"text-3xl font-semibold mb-6 font-['Nunito']",children:"Subscribe to get registered!"}),e.jsx("form",{className:"w-full max-w-lg mx-auto",id:"contactForm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-center font-['Nunito']",children:[e.jsx("input",{className:"px-4 py-2 rounded-lg border border-gray-700 bg-gray-800 text-white w-full sm:w-2/3 font-thin focus:outline-none focus:ring-1 focus:ring-blue-gray-200 transition duration-300",id:"emailAddress",type:"email",placeholder:"Enter email address...","aria-label":"Enter email address...",ref:r,onChange:d=>n(d)}),e.jsx("button",{className:"mt-4 sm:mt-0 sm:ml-4 px-6 py-2 rounded-lg bg-blue-gray-800 text-white hover:bg-opacity-70 transition duration-300",id:"submitButton",type:"submit",onClick:d=>s(d),children:"Notify Me!"})]})})]})}),e.jsx("div",{className:"py-20 bg-black text-white font-['Nunito']",children:e.jsxs("div",{className:"container mx-auto px-4 lg:px-8",children:[e.jsxs("div",{className:"flex flex-wrap justify-center gap-6",children:[e.jsx("div",{className:"w-full sm:w-1/3 lg:w-1/4",children:e.jsxs("div",{className:"bg-gradient-to-b from-blue-gray-900 via-blue-gray-900/75 to-blue-gray-900/40 p-6 rounded-lg text-center",children:[e.jsx("i",{className:"fas fa-map-marked-alt text-primary mb-4"}),e.jsx("h4",{className:"text-xl font-light",children:"Address"}),e.jsx("hr",{className:"my-4 mx-auto w-16 border-t border-blue-500"}),e.jsx("p",{className:"text-sm font-thin",children:"Kigali, Rwanda"})]})}),e.jsx("div",{className:"w-full sm:w-1/3 lg:w-1/4",children:e.jsxs("div",{className:"bg-gradient-to-b from-blue-gray-900 via-blue-gray-900/75 to-blue-gray-900/40 p-6 rounded-lg text-center",children:[e.jsx("i",{className:"fas fa-envelope text-primary mb-4"}),e.jsx("h4",{className:"text-xl font-light",children:"Email"}),e.jsx("hr",{className:"my-4 mx-auto w-16 border-t border-blue-500"}),e.jsx("p",{className:"text-sm font-thin",children:e.jsx("a",{href:"mailto:limitify.ai@gmail.com",children:"limitify.ai@gmail.com"})})]})}),e.jsx("div",{className:"w-full sm:w-1/3 lg:w-1/4",children:e.jsxs("div",{className:"bg-gradient-to-b from-blue-gray-900 via-blue-gray-900/75 to-blue-gray-900/40 p-6 rounded-lg text-center",children:[e.jsx("i",{className:"fas fa-mobile-alt text-primary mb-4"}),e.jsx("h4",{className:"text-xl font-light",children:"Phone"}),e.jsx("hr",{className:"my-4 mx-auto w-16 border-t border-blue-500"}),e.jsx("p",{className:"text-sm font-thin",children:"+250 0793 109 171"})]})})]}),e.jsxs("div",{className:"flex justify-center mt-8",children:[e.jsx("a",{className:"text-white mx-3",href:"https://x.com/k4ldrick",children:e.jsx("i",{className:"fab fa-x-twitter"})}),e.jsx("a",{className:"text-white mx-3",href:"https://www.instagram.com/limitify/",children:e.jsx("i",{className:"fab fa-instagram"})})]})]})})]}),e.jsx("footer",{className:"bg-black py-4 text-center text-gray-50 font-['Nunito']",children:e.jsx("div",{className:"container mx-auto px-4 lg:px-5 font-normal",children:e.jsxs("p",{children:["ATS © ",t," Powered by Limitify"]})})})]})}Ve.displayName="/src/layout/Welcome.jsx";function yt({element:t}){const{currentUser:r,isloading:l}=E(),o=oe(),n=H();return x.useEffect(()=>{if(localStorage.setItem("lastVisitedRoute",o.pathname),l)return e.jsx(be,{brandName:"ATS"});r||n("/auth/login")},[r,n,o]),t}const bt=new Oa;function jt(){const{currentUser:t}=E();return e.jsxs("div",{children:[e.jsx(qa,{client:bt,children:e.jsxs(me,{children:[e.jsx(Y,{path:"/",element:t&&t.session?e.jsx(ke,{to:"/dashboard/home"}):e.jsx(Ve,{})}),e.jsx(Y,{exact:!0,path:"/dashboard/*",element:e.jsx(yt,{element:e.jsx(He,{})})}),e.jsx(Y,{path:"/auth/*",element:e.jsx(le,{})}),e.jsx(Y,{path:"*",element:t&&t.session?e.jsx(ke,{to:"/dashboard/home"}):e.jsx(le,{})})]})}),e.jsx(za,{position:"bottom-right",autoClose:"3000",theme:"colored",transition:Ya,pauseOnHover:!0})]})}_a.createRoot(document.getElementById("root")).render(e.jsx(O.StrictMode,{children:e.jsx(Ua,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(Xa,{children:e.jsx(a.ThemeProvider,{children:e.jsx(he,{children:e.jsx(jt,{})})})})})}));
